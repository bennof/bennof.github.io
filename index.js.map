{"version":3,"sources":["webpack://TR/webpack/universalModuleDefinition","webpack://TR/webpack/bootstrap","webpack://TR/./src/data/array.js","webpack://TR/./src/data/index.js","webpack://TR/./src/data/table.js","webpack://TR/./src/dox/file.js","webpack://TR/./src/dox/index.js","webpack://TR/./src/dox/url.js","webpack://TR/./src/io/file.js","webpack://TR/./src/io/index.js","webpack://TR/./src/io/loader.js","webpack://TR/./src/io/url.js","webpack://TR/./src/math/filter/index.js","webpack://TR/./src/math/index.js","webpack://TR/./src/math/plot.js","webpack://TR/./src/math/solver/index.js","webpack://TR/./src/math/stat/distributions/bernoulli.js","webpack://TR/./src/math/stat/distributions/binomial.js","webpack://TR/./src/math/stat/distributions/chi_squared.js","webpack://TR/./src/math/stat/gamma.js","webpack://TR/./src/math/stat/index.js","webpack://TR/./src/scss/simple.scss?6fe7","webpack://TR/./src/tabularrasa.js"],"names":["array_map","Fun","Arr","i","R","Array","length","array2d_col","arr","idx","len","r","cmp","number","A","B","string","localeCompare","any","toString","Table","Name","Header","name","header","data","sorted","Data","push","Pos","undefined","col","indexOf","offset","Target","Inputs","In","D","I","bind","apply","concat","Acc","Keys","Colum","Query","Cidx","Out","slice","Select","init","sort","Last","Cmp","Value","Key","Idx","search","binsearch","Left","Right","Mid","Row","Obj","Object","keys","console","log","j","L","text","l","json","JSON","parse","Text","FS","No_Header","Last_Char","Field","Col","No_Quote","C","First_Row","pop","row","escape_csv","str","Esc","o","read","Filen","Type","Reader","FileReader","cb","onload","Event","target","result","onerror","error","code","readAsDataURL","readAsText","save","Mime","FileLink","document","createElement","startsWith","setAttribute","encodeURIComponent","btoa","createEvent","initEvent","dispatchEvent","click","load_inner_html","uri","load_data","e","innerHTML","exec_js","cTagLoader","forEach","load","cCodeView","update","cCalcValues","MathJax","typeset","Elem","elem","querySelectorAll","src","xhr","XMLHttpRequest","open","send","innerText","responseText","eval","call","window","Cb","onreadystatechange","readyState","status","Router","tag","querySelector","get_url","onhashchange","map","url","location","getAttribute","TagLoader","elems","CodeView","id","getElementById","CalcValues","val","header_map","Xhttp","HL","getAllResponseHeaders","trim","split","shift","join","hash_map","URL","R1","Res","Hash","hash","substr","decodeURIComponent","query_map","Url","html","clean_code","TagStore","router","Tag","Map","Src","Root","Elems","EntityMap","escape_html","String","replace","s","New","CodeElems","filter","x","f","sides","cyclic","h","l1","l2","y","RFFT","size","mode","p_radix2","p_bluestein","out","inp","cosTable","sinTable","Math","cos","PI","sin","reverse_bits","levels","temp","real","imag","halfsize","tablestep","k","tpre","tpim","bits","new_array_0","n","fft_radix2","reverseBits","transformBluestein","m","areal","newArrayOfZeros","aimag","breal","bimag","creal","cimag","convolveComplex","convolveReal","xreal","ximag","yreal","yimag","outreal","outimag","transform","inverseTransform","Func","Str","func","args","start","end","step","a","seq","Chart","xMarkerPlugin","get_x_pos","chart","meta","getDatasetMeta","_model","draw_line","marker","xoffset","scale","scales","context","ctx","beginPath","strokeStyle","color","lineWidth","moveTo","top","lineTo","bottom","stroke","fillStyle","textAlign","fillText","title","afterDatasetsDraw","easing","config","xMarker","yMarkerPlugin","xscale","yscale","y_value","getPixelForValue","value","left","right","yMarker","plugins","register","Plot","labels","datasets","xmarker","ymarker","destroy","label","fcolor","type","borderColor","fill","options","responsive","maintainAspectRatio","Solver","df","EulerSolver","t0","X0","d","HeunSolver","u","RungeKuttaSolver","k1","k2","k3","k4","pdf","p","cdf","quantile","NaN","expected","variance","sqrt","choose","c","pows","pow","floor","_","reduce","prev","next","kl","ku","inc","max","min","Int","pe","exp","lngamma","gamma_inc_lower","inv_gamma_inc_lower","EPS","Number","EPSILON","FPMIN","MIN_VALUE","gamma","z","h2","g","p_ln","sum","err","t","pp","lna1","afac","a1","gln","fabs","tau","sqrt2","s2pi","is2pi","erf","cnorm","mu","sig","norm","boxmullerrand","v","random","dnorm","pnorm","rnorm","floating_mean","chi_squared_value","X","Y","chi2","linear_regression","xm","ym","sx","sx2","sy","sxy","b","hh","toFixed","err_a","err_b","exponential_regression"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIO,SAASA,SAAT,CAAmBC,GAAnB,EAAuBC,GAAvB,EAA2B;AAC9B,MAAIC,CAAJ;AAAA,MAAOC,CAAC,GAAG,IAAIC,KAAJ,CAAUH,GAAG,CAACI,MAAd,CAAX;;AACA,OAAKH,CAAC,GAAC,CAAP,EAASA,CAAC,GAACD,GAAG,CAACI,MAAf,EAAsBH,CAAC,EAAvB;AACIC,KAAC,CAACD,CAAD,CAAD,GAAOF,GAAG,CAACC,GAAG,CAACC,CAAD,CAAJ,EAAQA,CAAR,CAAV;AADJ;;AAEA,SAAOC,CAAP;AACH;AAAA;AAEM,SAASG,WAAT,CAAqBC,GAArB,EAAyBC,GAAzB,EAA8B;AACjC,MAAIC,GAAG,GAAGF,GAAG,CAACF,MAAd;AACA,MAAIK,CAAC,GAAG,IAAIN,KAAJ,CAAUK,GAAV,CAAR;;AACA,OAAI,IAAIP,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACO,GAAf,EAAoBP,CAAC,EAArB;AACIQ,KAAC,CAACR,CAAD,CAAD,GAAKK,GAAG,CAACL,CAAD,CAAH,CAAOM,GAAP,CAAL;AADJ;;AAEA,SAAOE,CAAP;AACH,C;;;;;;;;;;;;ACvCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC3BA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AAEO,IAAMC,GAAG,GAAE;AACdC,QAAM,EAAE,gBAASC,CAAT,EAAYC,CAAZ,EAAe;AAAE,WAAOD,CAAC,GAACC,CAAT;AAAa,GADxB;AAEdC,QAAM,EAAE,gBAASF,CAAT,EAAYC,CAAZ,EAAe;AAAE,WAAOD,CAAC,CAACG,aAAF,CAAgBF,CAAhB,CAAP;AAA4B,GAFvC;AAGdG,KAAG,EAAE,aAASJ,CAAT,EAAYC,CAAZ,EAAe;AAAE,WAAOD,CAAC,CAACK,QAAF,GAAaF,aAAb,CAA2BF,CAAC,CAACI,QAAF,EAA3B,CAAP;AAAkD;AAH1D,CAAX;AAMA,IAAMC,KAAb;AAEI,iBAAYC,IAAZ,EAAkBC,MAAlB,EAAyB;AAAA;;AACrB,SAAKC,IAAL,GAAYF,IAAZ;AACA,SAAKG,MAAL,GAAcF,MAAM,IAAI,EAAxB;AACA,SAAKG,IAAL,GAAY,EAAZ;AACA,SAAKC,MAAL,GAAc,CAAC,CAAf,CAJqB,CAIH;AACrB;;AAPL;AAAA;AAAA,4BASY;AACJ,WAAKD,IAAL,GAAY,EAAZ;AACA,WAAKC,MAAL,GAAc,CAAC,CAAf;AACH;AAZL;AAAA;AAAA,6BAca;AACL,aAAO,KAAKD,IAAL,CAAUnB,MAAjB;AACH;AAhBL;AAAA;AAAA,8BAkBce,IAlBd,EAkBmBM,IAlBnB,EAkByB;AACjB,WAAKH,MAAL,CAAYI,IAAZ,CAAiBP,IAAjB;AACA,UAAIQ,GAAG,GAAG,KAAKL,MAAL,CAAYlB,MAAZ,GAAoB,CAA9B;;AACA,WAAK,IAAIH,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAC,KAAKsB,IAAL,CAAUnB,MAAzB,EAAiCH,CAAC,EAAlC,EAAqC;AACjC,YAAGwB,IAAI,IAAIA,IAAI,CAACxB,CAAD,CAAf,EAAoB;AAChB,eAAKsB,IAAL,CAAUtB,CAAV,EAAa0B,GAAb,IAAoBF,IAAI,CAACxB,CAAD,CAAxB;AACH,SAFD,MAEO;AACH,eAAKsB,IAAL,CAAUtB,CAAV,EAAa0B,GAAb,IAAoBC,SAApB;AACH;AACJ;AACJ;AA5BL;AAAA;AAAA,8BA8BeP,IA9Bf,EA8BqB;AACb,UAAIpB,CAAJ;AAAA,UAAOQ,CAAC,GAAG,IAAIN,KAAJ,CAAU,KAAKoB,IAAL,CAAUnB,MAApB,CAAX;AAAA,UAAwCyB,GAAG,GAAI,OAAOR,IAAP,IAAe,QAAhB,GAA4B,KAAKC,MAAL,CAAYQ,OAAZ,CAAoBT,IAApB,CAA5B,GAAwDA,IAAtG;;AACA,WAAKpB,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC,KAAKsB,IAAL,CAAUnB,MAAtB,EAA8BH,CAAC,EAA/B,EAAkC;AAC9BQ,SAAC,CAACR,CAAD,CAAD,GAAO,KAAKsB,IAAL,CAAUtB,CAAV,EAAa4B,GAAb,CAAP;AACH;;AACD,aAAOpB,CAAP;AACH;AApCL;AAAA;AAAA,wBAsCQV,GAtCR,EAsCagC,MAtCb,EAsCqB3B,MAtCrB,EAsC6B;AACrB,UAAIA,MAAM,IAAIwB,SAAV,IAAuBxB,MAAM,GAAG,KAAKmB,IAAL,CAAUnB,MAA1C,IAAoDA,MAAM,GAAG,CAAjE,EAAoEA,MAAM,GAAG,KAAKmB,IAAL,CAAUnB,MAAnB;AACpE,UAAI2B,MAAM,IAAIH,SAAd,EAAyBG,MAAM,GAAG,CAAT;AACzB,UAAIN,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;;AACA,WAAKA,CAAC,GAAG8B,MAAT,EAAiB9B,CAAC,GAAGG,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9BwB,YAAI,CAACxB,CAAD,CAAJ,GAAUF,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAL,EAASA,CAAT,CAAb;AACH;AACJ;AA7CL;AAAA;AAAA,yBA+CSF,GA/CT,EA+CciC,MA/Cd,EA+CsBD,MA/CtB,EA+C8B3B,MA/C9B,EA+CqC;AAC7B,UAAIA,MAAM,IAAIwB,SAAV,IAAuBxB,MAAM,GAAG,KAAKmB,IAAL,CAAUnB,MAA9C,EAAsDA,MAAM,GAAG,KAAKmB,IAAL,CAAUnB,MAAnB;AACtD,UAAI2B,MAAM,IAAIH,SAAd,EAAyBG,MAAM,GAAG,CAAT;AACzB,UAAI9B,CAAJ;AAAA,UAAOwB,IAAI,GAAG,KAAKF,IAAnB;AAAA,UAAyBM,GAAG,GAAI,OAAOG,MAAP,IAAiB,QAAlB,GAA8B,KAAKV,MAAL,CAAYQ,OAAZ,CAAoBE,MAApB,CAA9B,GAA4DA,MAA3F;;AACA,WAAK/B,CAAC,GAAC8B,MAAP,EAAc9B,CAAC,GAACG,MAAhB,EAAuBH,CAAC,EAAxB,EAA2B;AACvBwB,YAAI,CAACxB,CAAD,CAAJ,CAAQ4B,GAAR,IAAe9B,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAL,EAASA,CAAT,CAAlB;AACH;AACJ;AAtDL;AAAA;AAAA,yBAwDSF,GAxDT,EAwDaiC,MAxDb,EAwDoBC,MAxDpB,EAwD4BF,MAxD5B,EAwDoC3B,MAxDpC,EAwD2C;AACnC,UAAIA,MAAM,IAAIwB,SAAV,IAAuBxB,MAAM,GAAG,KAAKmB,IAAL,CAAUnB,MAA9C,EAAsDA,MAAM,GAAG,KAAKmB,IAAL,CAAUnB,MAAnB;AACtD,UAAI2B,MAAM,IAAIH,SAAd,EAAyBG,MAAM,GAAG,CAAT;AACzB,UAAIN,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;AAAA,UAAyBY,CAAzB;AAAA,UACIqB,EAAE,GAAGpC,2DAAS,CAAC,UAASqC,CAAT,EAAW;AACtB,eAAQ,OAAOA,CAAP,IAAY,QAAb,GAAyB,KAAKb,MAAL,CAAYQ,OAAZ,CAAoBK,CAApB,CAAzB,GAAkDA,CAAzD;AAA6D,OADnD,EACoDF,MADpD,CADlB;AAAA,UAGIJ,GAAG,GAAI,OAAOM,CAAP,IAAY,QAAb,GAAyB,KAAKb,MAAL,CAAYQ,OAAZ,CAAoBE,MAApB,CAAzB,GAAuDA,MAHjE;;AAIA,WAAK/B,CAAC,GAAC8B,MAAP,EAAc9B,CAAC,GAACG,MAAhB,EAAuBH,CAAC,EAAxB,EAA2B;AACvBY,SAAC,GAAGf,2DAAS,CAAE,UAASsC,CAAT,EAAW;AAAC,iBAAO,KAAKA,CAAL,CAAP;AAAgB,SAA5B,CAA6BC,IAA7B,CAAkCZ,IAAI,CAACxB,CAAD,CAAtC,CAAF,EAA6CiC,EAA7C,CAAb;AACAT,YAAI,CAACxB,CAAD,CAAJ,CAAQ4B,GAAR,IAAe9B,GAAG,CAACuC,KAAJ,CAAU,IAAV,EAAe,CAACb,IAAI,CAACxB,CAAD,CAAL,EAAUsC,MAAV,CAAiB1B,CAAjB,CAAf,CAAf;AACH;AACJ;AAnEL;AAAA;AAAA,yBAqESd,GArET,EAqEcyC,GArEd,EAqEkB;AACV,UAAIf,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwC,IAAI,CAACrC,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9BuC,WAAG,GAAGzC,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAL,EAASuC,GAAT,CAAT;AACH;;AACD,aAAOA,GAAP;AACH;AA3EL;AAAA;AAAA,0BA6EUzC,GA7EV,EA6EeyC,GA7Ef,EA6EoBP,MA7EpB,EA6E4B;AACpB,UAAIR,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;AAAA,UAAyBY,CAAzB;AAAA,UACIqB,EAAE,GAAGpC,2DAAS,CAAC,UAASqC,CAAT,EAAW;AACtB,eAAQ,OAAOA,CAAP,IAAY,QAAb,GAAyB,KAAKb,MAAL,CAAYQ,OAAZ,CAAoBK,CAApB,CAAzB,GAAkDA,CAAzD;AAA6D,OADnD,EACoDF,MADpD,CADlB;;AAGA,WAAKhC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwB,IAAI,CAACrB,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9BY,SAAC,GAAGf,2DAAS,CAAE,UAASsC,CAAT,EAAW;AAAC,iBAAO,KAAKA,CAAL,CAAP;AAAgB,SAA5B,CAA6BC,IAA7B,CAAkCZ,IAAI,CAACxB,CAAD,CAAtC,CAAF,EAA6CiC,EAA7C,CAAb;AACArB,SAAC,CAACa,IAAF,CAAOc,GAAP;AACAA,WAAG,GAAGzC,GAAG,CAACuC,KAAJ,CAAU,IAAV,EAAezB,CAAf,CAAN;AACH;;AACD,aAAO2B,GAAP;AACH;AAvFL;AAAA;AAAA,2BAyFWzC,GAzFX,EAyFe2C,KAzFf,EAyFqBC,KAzFrB,EAyF2B;AACnB,UAAIC,IAAI,GAAI,OAAOF,KAAP,KAAiB,QAAlB,GAA+B,KAAKpB,MAAL,CAAYQ,OAAZ,CAAoBY,KAApB,CAA/B,GAA4DA,KAAvE;AACA,UAAIG,GAAG,GAAG,IAAI3B,KAAJ,CAAU,KAAKG,IAAL,GAAU,SAApB,EAA8B,KAAKC,MAAL,CAAYwB,KAAZ,CAAkB,CAAlB,CAA9B,CAAV;AACA,UAAIrB,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;;AACA,UAAIyC,KAAJ,EAAU;AACN,aAAKzC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwB,IAAI,CAACrB,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9B,cAAI,KAAKF,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAJ,CAAQ2C,IAAR,CAAD,EAAeD,KAAf,CAAZ,EACIE,GAAG,CAACtB,IAAJ,CAASG,IAAT,CAAcD,IAAI,CAACxB,CAAD,CAAlB;AACP;AACJ,OALD,MAKO;AACH,aAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwB,IAAI,CAACrB,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9B,cAAI,KAAKF,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAL,EAAS0C,KAAT,CAAZ,EACIE,GAAG,CAACtB,IAAJ,CAASG,IAAT,CAAcD,IAAI,CAACxB,CAAD,CAAlB;AACP;AACJ;;AACD,aAAO4C,GAAP;AACH;AAzGL;AAAA;AAAA,2BA2GW9C,GA3GX,EA2GegD,MA3Gf,EA2GsBJ,KA3GtB,EA2G4B;AACpB,UAAIlB,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;AAAA,UAAyBY,CAAzB;AAAA,UAA4BX,CAA5B;AAAA,UACIgC,EAAE,GAAGpC,2DAAS,CAAC,UAASqC,CAAT,EAAW;AACtB,eAAQ,OAAOA,CAAP,IAAY,QAAb,GAAyBb,MAAM,CAACQ,OAAP,CAAeK,CAAf,CAAzB,GAA6CA,CAApD;AAAwD,OAD9C,EAC+CY,MAD/C,CADlB;AAGA,UAAIF,GAAG,GAAGG,IAAI,CAAC,KAAK3B,IAAL,GAAU,SAAX,EAAqBvB,2DAAS,CAAC,UAASsC,CAAT,EAAW;AAAC,eAAO,KAAKd,MAAL,CAAYc,CAAZ,CAAP;AAAsB,OAAnC,EAAoCF,EAApC,CAA9B,CAAd;;AACA,WAAKjC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwB,IAAI,CAACrB,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9BY,SAAC,GAAGf,2DAAS,CAAE,UAASsC,CAAT,EAAW;AAAC,iBAAO,KAAKA,CAAL,CAAP;AAAgB,SAA5B,CAA6BC,IAA7B,CAAkCZ,IAAI,CAACxB,CAAD,CAAtC,CAAF,EAA6CiC,EAA7C,CAAb;AACArB,SAAC,CAACa,IAAF,CAAOiB,KAAP;AACAzC,SAAC,GAAGH,GAAG,CAACuC,KAAJ,CAAU,IAAV,EAAezB,CAAf,CAAJ;AACA,YAAGX,CAAH,EACI2C,GAAG,CAACtB,IAAJ,CAASG,IAAT,CAAcxB,CAAd;AACP;;AACD,aAAO2C,GAAP;AACH;AAxHL;AAAA;AAAA,2BA0HW9C,GA1HX,EA0He2C,KA1Hf,EA0HqB;AACb,UAAIE,IAAI,GAAI,OAAOF,KAAP,KAAiB,QAAlB,GAA+B,KAAKpB,MAAL,CAAYQ,OAAZ,CAAoBY,KAApB,CAA/B,GAA4DA,KAAvE;AACA,UAAI,CAAC,KAAKlB,MAAN,IAAgB,KAAKA,MAAL,IAAeoB,IAAnC,EACI,KAAKK,IAAL,CAAUlD,GAAV,EAAc6C,IAAd;AACJ,UAAInB,IAAI,GAAG,KAAKF,IAAhB;AAAA,UAAsBtB,CAAtB;AACA,UAAIiD,IAAI,GAACzB,IAAI,CAAC,CAAD,CAAJ,CAAQmB,IAAR,CAAT;AAAA,UAAwBC,GAAG,GAAG,IAAI3B,KAAJ,CAAU,KAAKG,IAAL,GAAU,UAAV,GAAqBqB,KAA/B,EAAqC,KAAKpB,MAAL,CAAYwB,KAAZ,CAAkB,CAAlB,CAArC,CAA9B;AACAD,SAAG,CAACtB,IAAJ,CAASG,IAAT,CAAcD,IAAI,CAAC,CAAD,CAAlB;;AACA,WAAKxB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwB,IAAI,CAACrB,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9B,YAAI,KAAKF,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAJ,CAAQ2C,IAAR,CAAD,EAAeM,IAAf,CAAZ,EACIL,GAAG,CAACtB,IAAJ,CAASG,IAAT,CAAcD,IAAI,CAACxB,CAAD,CAAlB;AACJiD,YAAI,GAAGzB,IAAI,CAACxB,CAAD,CAAJ,CAAQ2C,IAAR,CAAP;AACH;;AACD,aAAOC,GAAP;AACH;AAvIL;AAAA;AAAA,yBAyIS9C,GAzIT,EAyIc2C,KAzId,EAyIoB;AACZ,UAAIE,IAAI,GAAI,OAAOF,KAAP,KAAiB,QAAlB,GAA+B,KAAKpB,MAAL,CAAYQ,OAAZ,CAAoBY,KAApB,CAA/B,GAA4DA,KAAvE;;AACA,UAAIS,GAAG,GAAG,SAANA,GAAM,CAASvC,CAAT,EAAWC,CAAX,EAAc;AACpB,eAAO,KAAKH,GAAL,CAASE,CAAC,CAAC,KAAKL,GAAN,CAAV,EAAqBM,CAAC,CAAC,KAAKN,GAAN,CAAtB,CAAP;AACH,OAFD;;AAGA,WAAKgB,IAAL,GAAY,KAAKA,IAAL,CAAU0B,IAAV,CAAeE,GAAG,CAACd,IAAJ,CAAS;AAAC9B,WAAG,EAAEqC,IAAN;AAAYlC,WAAG,EAAEX;AAAjB,OAAT,CAAf,CAAZ;AACA,WAAKyB,MAAL,GAAcoB,IAAd;AACA,aAAOA,IAAP;AACH;AAjJL;AAAA;AAAA,mCAmJmB7C,GAnJnB,EAmJuBqD,KAnJvB,EAmJ6BV,KAnJ7B,EAmJmCW,GAnJnC,EAmJuC;AAC/B,UAAIC,GAAG,GAAG,KAAKC,MAAL,CAAYxD,GAAZ,EAAgBqD,KAAhB,EAAsBV,KAAtB,CAAV;;AACA,UAAIY,GAAG,IAAI,CAAX,EAAc;AACV,YAAIV,IAAI,GAAI,OAAOS,GAAP,KAAe,QAAhB,GAA6B,KAAK/B,MAAL,CAAYQ,OAAZ,CAAoBuB,GAApB,CAA7B,GAAwDA,GAAnE;AACA,eAAO,KAAK9B,IAAL,CAAU+B,GAAV,EAAeV,IAAf,CAAP;AACH;AACJ;AAzJL;AAAA;AAAA,2BA2JW7C,GA3JX,EA2JeqD,KA3Jf,EA2JqBV,KA3JrB,EA2J2B;AACnB,UAAIE,IAAJ;AACA,UAAI,OAAOF,KAAP,KAAiB,QAArB,EACIE,IAAI,GAAG,KAAKtB,MAAL,CAAYQ,OAAZ,CAAoBY,KAApB,CAAP,CADJ,KAGIE,IAAI,GAAGF,KAAP;;AACJ,UAAI,KAAKlB,MAAL,IAAe,KAAKA,MAAL,IAAeoB,IAAlC,EAAwC;AAAE;AACtC,eAAO,KAAKY,SAAL,CAAezD,GAAf,EAAoBqD,KAApB,EAA2BR,IAA3B,CAAP;AACH,OAFD,MAEO;AACH,YAAI3C,CAAJ;AAAA,YAAOwB,IAAI,GAAC,KAAKF,IAAjB;;AACA,aAAKtB,CAAC,GAAC,CAAP,EAAUA,CAAC,GAACwB,IAAI,CAACrB,MAAjB,EAAyBH,CAAC,EAA1B,EAA6B;AACzB,cAAG,KAAKF,GAAG,CAAC0B,IAAI,CAACxB,CAAD,CAAJ,CAAQ2C,IAAR,CAAD,EAAeQ,KAAf,CAAX,EAAiC;AAC7B,mBAAOnD,CAAP;AACH;AACJ;AACJ;;AACD,aAAO,CAAC,CAAR;AACH;AA5KL;AAAA;AAAA,kCA8KkBF,GA9KlB,EA8KsBqD,KA9KtB,EA8K4BV,KA9K5B,EA8KkC;AAC1B,UAAIE,IAAI,GAAI,OAAOF,KAAP,KAAiB,QAAlB,GAA+B,KAAKpB,MAAL,CAAYQ,OAAZ,CAAoBY,KAApB,CAA/B,GAA4DA,KAAvE;AACA,UAAI,CAAC,KAAKlB,MAAN,IAAgB,KAAKA,MAAL,IAAeoB,IAAnC,EACIK,IAAI,CAAClD,GAAD,EAAK6C,IAAL,EAAU,IAAV,CAAJ;AACJ,aAAO,KAAKY,SAAL,CAAezD,GAAf,EAAoBqD,KAApB,EAA2BR,IAA3B,CAAP;AACH;AAnLL;AAAA;AAAA,8BAqLc7C,GArLd,EAqLmBqD,KArLnB,EAqL0BR,IArL1B,EAqL+B;AACvB,UAAIa,IAAI,GAAG,CAAX;AAAA,UAAcC,KAAK,GAAG,KAAKnC,IAAL,CAAUnB,MAAV,GAAmB,CAAzC;AAAA,UAA4CuD,GAA5C;AAAA,UAAiDzD,CAAjD;AAAA,UAAoDuB,IAAI,GAAG,KAAKF,IAAhE;;AACA,aAAOkC,IAAI,IAAIC,KAAf,EAAsB;AAAE;AACtBC,WAAG,GAAGF,IAAI,GAAI,CAACC,KAAK,GAAGD,IAAT,IAAiB,CAA/B,CADoB,CACe;AACnC;;AACAvD,SAAC,GAAGH,GAAG,CAACqD,KAAD,EAAO3B,IAAI,CAACkC,GAAD,CAAJ,CAAUf,IAAV,CAAP,CAAP;AACA,YAAI1C,CAAC,IAAI,CAAT,EAAY;AACV,iBAAOyD,GAAP,CADF,KAGE,IAAIzD,CAAC,GAAG,CAAR,EAAW;AACTwD,eAAK,GAAGC,GAAG,GAAG,CAAd,CADF,KAEK;AACHF,cAAI,GAAGE,GAAG,GAAG,CAAb;AACL;;AACD,aAAO,CAAC,CAAR;AACH;AApML;AAAA;AAAA,gCAsMgBC,GAtMhB,EAsMoB;AACZ,UAAIC,GAAG,GAAG,EAAV;;AACA,WAAI,IAAI5D,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,KAAKqB,MAAL,CAAYlB,MAA3B,EAAmCH,CAAC,EAApC,EAAuC;AACnC4D,WAAG,CAAC,KAAKvC,MAAL,CAAYrB,CAAZ,CAAD,CAAH,GAAsB,KAAKsB,IAAL,CAAUqC,GAAV,EAAe3D,CAAf,CAAtB;AACH;;AACD,aAAO4D,GAAP;AACH;AA5ML;AAAA;AAAA,gCA8MgBA,GA9MhB,EA8M8B;AAAA,UAAVP,GAAU,uEAAJ,CAAC,CAAG;AACtB,UAAIb,IAAI,GAAGqB,MAAM,CAACC,IAAP,CAAYF,GAAZ,CAAX;;AACA,UAAIP,GAAG,GAAG,CAAV,EAAY;AACRA,WAAG,GAAG,KAAK/B,IAAL,CAAUnB,MAAhB;AACA,aAAKmB,IAAL,CAAUG,IAAV,CAAe,IAAIvB,KAAJ,CAAU,KAAKmB,MAAL,CAAYlB,MAAtB,CAAf;AACH;;AAED,WAAI,IAAIH,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACwC,IAAI,CAACrC,MAApB,EAA4BH,CAAC,EAA7B,EAAiC;AAC7B,YAAI0B,GAAG,GAAG,KAAKL,MAAL,CAAYQ,OAAZ,CAAoBW,IAAI,CAACxC,CAAD,CAAxB,CAAV;;AACA,YAAG0B,GAAG,IAAI,CAAC,CAAX,EAAa;AACTqC,iBAAO,CAACC,GAAR,CAAY,4BAA0BxB,IAAI,CAACxC,CAAD,CAA1C;AACH,SAFD,MAEO;AACH,eAAKsB,IAAL,CAAU+B,GAAV,EAAe3B,GAAf,IAAsBkC,GAAG,CAACpB,IAAI,CAACxC,CAAD,CAAL,CAAzB;AACH;AACJ;AACJ;AA7NL;AAAA;AAAA,kCA+NkB4D,GA/NlB,EA+NuB;AACd,UAAI5D,CAAJ,EAAMiE,CAAN,EAASC,CAAT,EAAY1B,IAAZ,EAAkBa,GAAlB;;AACA,WAAIrD,CAAC,GAAC,CAAN,EAASA,CAAC,GAAC4D,GAAG,CAACzD,MAAf,EAAuBH,CAAC,EAAxB,EAA2B;AACxBkE,SAAC,GAAG,IAAIhE,KAAJ,CAAU,KAAKmB,MAAL,CAAYlB,MAAtB,CAAJ;AACAqC,YAAI,GAAGqB,MAAM,CAACC,IAAP,CAAYF,GAAG,CAAC5D,CAAD,CAAf,CAAP;;AACA,aAAIiE,CAAC,GAAC,CAAN,EAASA,CAAC,GAACzB,IAAI,CAACrC,MAAhB,EAAwB8D,CAAC,EAAzB,EAA6B;AACzBZ,aAAG,GAAG,KAAKhC,MAAL,CAAYQ,OAAZ,CAAoBW,IAAI,CAACyB,CAAD,CAAxB,CAAN;;AACA,cAAIZ,GAAG,IAAG,CAAV,EAAc;AACVa,aAAC,CAACb,GAAD,CAAD,GAASO,GAAG,CAAC5D,CAAD,CAAH,CAAOwC,IAAI,CAACyB,CAAD,CAAX,CAAT;AACH;AACJ;;AACD,aAAK3C,IAAL,CAAUG,IAAV,CAAeyC,CAAf;AACH;AACJ;AA5OL;AAAA;AAAA,8BA8OcC,IA9Od,EA8OoB;AACZ,UAAIC,CAAJ;AAAA,UAAOpE,CAAP;AAAA,UAAUiE,CAAV;AAAA,UAAaI,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAApB;;AACA,WAAInE,CAAC,GAAC,CAAN,EAASA,CAAC,GAAGqE,IAAI,CAAClE,MAAlB,EAA0BH,CAAC,EAA3B,EAA8B;AAC1BoE,SAAC,GAAG,IAAIlE,KAAJ,CAAU,KAAKmB,MAAL,CAAYlB,MAAtB,CAAJ;;AACA,aAAI8D,CAAC,GAAC,CAAN,EAASA,CAAC,GAAC,KAAK5C,MAAL,CAAYlB,MAAvB,EAA+B8D,CAAC,EAAhC,EAAoC;AAChCG,WAAC,CAACH,CAAD,CAAD,GAAOI,IAAI,CAACrE,CAAD,CAAJ,CAAQ,KAAKqB,MAAL,CAAY4C,CAAZ,CAAR,CAAP;AACH;;AACD,aAAK3C,IAAL,CAAUG,IAAV,CAAe2C,CAAf;AACH;AAEJ;AAxPL;AAAA;AAAA,6BA0PaI,IA1Pb,EA0PmBC,EA1PnB,EA0PuBC,SA1PvB,EA0PkC;AAC1B,UAAIC,SAAS,GAAG,EAAhB;AAAA,UAAoBC,KAAK,GAAG,EAA5B;AAAA,UAAgChB,GAAG,GAAG,CAAC,EAAD,CAAtC;AAAA,UAA4CiB,GAAG,GAAG,CAAlD;AAAA,UAAqDlB,GAAG,GAAG,CAA3D;AAAA,UAA8DmB,QAAQ,GAAG,CAAC,CAA1E;AAAA,UAA6EC,CAA7E;AAAA,UAAgFd,CAAhF;AAAA,UAAmFe,SAAS,GAAIN,SAAD,GAAa,CAAb,GAAiB,CAAC,CAAjH;AACA,WAAKpD,IAAL,GAAY,EAAZ;AACA,WAAKD,MAAL,GAAc,EAAd;AACA,WAAKE,MAAL,GAAc,CAAC,CAAf;AACA,WAAKD,IAAL,CAAUG,IAAV,CAAemC,GAAf;;AAEA,WAAKK,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGO,IAAI,CAACrE,MAArB,EAA6B8D,CAAC,EAA9B,EAAkC;AAC9Bc,SAAC,GAAGP,IAAI,CAACP,CAAD,CAAR,CAD8B,CACjB;;AACb,YAAI,SAASc,CAAb,EAAgB;AAAE;AACd,cAAID,QAAQ,IAAIC,CAAC,KAAKJ,SAAtB,EACIC,KAAK,IAAIG,CAAT,CAFQ,CAEI;;AAChBD,kBAAQ,GAAG,CAACA,QAAZ,CAHY,CAGU;AACzB,SAJD,MAKK,IAAIL,EAAE,KAAKM,CAAP,IAAYD,QAAhB,EAA0B;AAAE;AAC7B,cAAIE,SAAJ,EAAe;AACX,iBAAK3D,MAAL,CAAYwD,GAAG,EAAf,IAAqBD,KAArB;AACH,WAFD,MAGK;AACDhB,eAAG,CAACiB,GAAG,EAAJ,CAAH,GAAaD,KAAb;AACH;;AACDG,WAAC,GAAGH,KAAK,GAAG,EAAZ;AACH,SARI,MASA,IAAI,SAASG,CAAT,IAAcD,QAAlB,EAA4B;AAAE;AAC3B,cAAI,SAASH,SAAb,EACIC,KAAK,GAAGA,KAAK,CAAC/B,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAR,CAFqB,CAEO;;AAChC,cAAImC,SAAJ,EAAe;AACXA,qBAAS,GAAG,CAACA,SAAb;AACA,iBAAK3D,MAAL,CAAYwD,GAAZ,IAAmBD,KAAnB;AACAG,aAAC,GAAGH,KAAK,GAAG,EAAZ;AACH,WAJD,MAKK;AACDhB,eAAG,CAACiB,GAAD,CAAH,GAAWD,KAAX;AACA,iBAAKtD,IAAL,CAAU,EAAEqC,GAAZ,IAAmBC,GAAG,GAAG,EAAzB;AACH;;AACDmB,WAAC,GAAGH,KAAK,GAAG,EAAZ;AACAC,aAAG,GAAG,CAAN;AACH,SAdA,MAeI;AACDD,eAAK,IAAIG,CAAT;AACH;;AACDJ,iBAAS,GAAGI,CAAZ;AACP;;AACD,UAAIF,GAAG,IAAI,CAAX,EAAc;AACVjB,WAAG,CAACiB,GAAD,CAAH,GAAWD,KAAX;AACH;;AACD,UAAIhB,GAAG,CAACzD,MAAJ,IAAc,KAAKkB,MAAL,CAAYlB,MAA9B,EACI,KAAKmB,IAAL,CAAU2D,GAAV;AACP;AA1SL;AAAA;AAAA,8BA4ScR,EA5Sd,EA4SkB;AACV,UAAIN,IAAI,GAAG,EAAX;AAAA,UAAee,GAAf;;AACA,UAAI,KAAK7D,MAAT,EAAiB;AACb,aAAK,IAAIrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKqB,MAAL,CAAYlB,MAAhC,EAAwCH,CAAC,EAAzC,EAA6C;AACzC,cAAIA,CAAC,GAAG,CAAR,EACImE,IAAI,IAAIM,EAAR;AACJN,cAAI,IAAIgB,UAAU,CAAC,KAAK9D,MAAL,CAAYrB,CAAZ,CAAD,EAAiByE,EAAjB,CAAlB;AACH;;AACDN,YAAI,IAAI,MAAR;AACH;;AACD,WAAK,IAAInE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKsB,IAAL,CAAUnB,MAA9B,EAAsCH,CAAC,EAAvC,EAA2C;AACvCkF,WAAG,GAAG,KAAK5D,IAAL,CAAUtB,CAAV,CAAN;;AACA,aAAK,IAAIiE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiB,GAAG,CAAC/E,MAAxB,EAAgC8D,CAAC,EAAjC,EAAqC;AACjC,cAAIA,CAAC,GAAG,CAAR,EACIE,IAAI,IAAIM,EAAR;AACJN,cAAI,IAAIgB,UAAU,CAACC,GAAG,CAACF,GAAG,CAACjB,CAAD,CAAJ,CAAJ,EAAcQ,EAAd,CAAlB;AACH;;AACDN,YAAI,IAAI,MAAR;AACH;;AACD,aAAOA,IAAP;AACH;AAhUL;;AAAA;AAAA;AAiUC;;AAED,SAASgB,UAAT,CAAoBhC,KAApB,EAA2BsB,EAA3B,EAA+B;AAC3B,MAAIxE,CAAC,GAAG,EAAR;AAAA,MAAY8E,CAAZ;AAAA,MAAeM,GAAG,GAAG,KAArB;AACA,MAAI,CAAClC,KAAL,EACI,OAAO,EAAP;;AACJ,OAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,KAAK,CAAChD,MAA1B,EAAkC8D,CAAC,EAAnC,EAAuC;AACnCc,KAAC,GAAG5B,KAAK,CAACc,CAAD,CAAT;;AACA,QAAIc,CAAC,IAAI,IAAT,EAAe;AACX9E,OAAC,IAAI8E,CAAL;AACA9E,OAAC,IAAI8E,CAAL;AACAM,SAAG,GAAG,IAAN;AACH,KAJD,MAKK,IAAIN,CAAC,IAAI,IAAL,IAAaA,CAAC,IAAI,IAAlB,IAA0BA,CAAC,IAAIN,EAAnC,EAAuC;AACxCxE,OAAC,IAAI8E,CAAL;AACAM,SAAG,GAAG,IAAN;AACH,KAHI,MAIA;AACDpF,OAAC,IAAI8E,CAAL;AACH;AACJ;;AACD,MAAIM,GAAJ,EAAS;AACL,WAAO,OAAOpF,CAAP,GAAW,IAAlB;AACH,GAFD,MAGK;AACD,WAAOA,CAAP;AACH;AACJ;;AAED,SAASmF,GAAT,CAAaE,CAAb,EAAgB;AACZ,UAAQA,CAAR;AACI,SAAK,IAAL;AACE,aAAO,MAAP;;AACF,SAAK3D,SAAL;AACE,aAAO,WAAP;;AACF;AACE,aAAO2D,CAAC,CAACtE,QAAF,EAAP;AANN;AAQH,C;;;;;;;;;;;;ACzYD;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;AAIA;;;;;;AAMO,SAASuE,IAAT,CAAczF,GAAd,EAAkB0F,KAAlB,EAAwBC,IAAxB,EAA6B;AAChC,MAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,QAAM,CAACE,EAAP,GAAY9F,GAAZ;;AACA4F,QAAM,CAACG,MAAP,GAAgB,UAASC,KAAT,EAAgB;AAC5B,SAAKF,EAAL,CAAQ,GAAR,EAAYE,KAAK,CAACC,MAAN,CAAaC,MAAzB;AACH,GAFD;;AAGAN,QAAM,CAACO,OAAP,GAAiB,UAASH,KAAT,EAAgB;AAC7B,SAAKF,EAAL,CAAQ,GAAR,EAAYE,KAAK,CAACC,MAAN,CAAaG,KAAb,CAAmBC,IAA/B;AACH,GAFD;;AAGA,MAAGV,IAAI,IAAI,SAAX,EACIC,MAAM,CAACU,aAAP,CAAqBZ,KAArB,EADJ,KAGIE,MAAM,CAACW,UAAP,CAAkBb,KAAlB;AACP;AAAA;AAED;;;;;;;AAMO,SAASc,IAAT,CAAcd,KAAd,EAAqBe,IAArB,EAA2B/E,IAA3B,EAAiC;AAAE;AACtC,MAAIgF,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAf;AACA,MAAIH,IAAI,CAACI,UAAL,CAAgB,MAAhB,CAAJ,EACIH,QAAQ,CAACI,YAAT,CAAsB,MAAtB,EAA8B,UAAQL,IAAR,GAAa,GAAb,GAAmBM,kBAAkB,CAACrF,IAAD,CAAnE,EADJ,KAGIgF,QAAQ,CAACI,YAAT,CAAsB,MAAtB,EAA8B,UAAQL,IAAR,GAAa,GAAb,GAAmBO,IAAI,CAACtF,IAAD,CAArD;AACJgF,UAAQ,CAACI,YAAT,CAAsB,UAAtB,EAAkCpB,KAAlC;;AAEA,MAAIiB,QAAQ,CAACM,WAAb,EAA0B;AACtB,QAAIjB,KAAK,GAAGW,QAAQ,CAACM,WAAT,CAAqB,aAArB,CAAZ;AACAjB,SAAK,CAACkB,SAAN,CAAgB,OAAhB,EAAyB,IAAzB,EAA+B,IAA/B;AACAR,YAAQ,CAACS,aAAT,CAAuBnB,KAAvB;AACH,GAJD,MAIO;AACHU,YAAQ,CAACU,KAAT;AACH;AACJ,C;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpED;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAKA;CAGA;;AACA,SAASC,eAAT,CAAyBC,GAAzB,EAA6BrB,MAA7B,EAAqC;AACjCsB,WAAS,CAACD,GAAD,EAAM,UAASE,CAAT,EAAW;AACtBvB,UAAM,CAACwB,SAAP,GAAmBD,CAAnB;AACAE,WAAO,CAACzB,MAAD,CAAP;AACA0B,cAAU,CAACC,OAAX,CAAmB,UAAAtD,CAAC;AAAA,aAAIA,CAAC,CAACuD,IAAF,CAAO5B,MAAP,CAAJ;AAAA,KAApB;AACA6B,aAAS,CAACF,OAAV,CAAkB,UAAAtD,CAAC;AAAA,aAAIA,CAAC,CAACyD,MAAF,CAAS9B,MAAT,CAAJ;AAAA,KAAnB;AACA+B,eAAW,CAACJ,OAAZ,CAAoB,UAAAtD,CAAC;AAAA,aAAIA,CAAC,CAACyD,MAAF,CAAS9B,MAAT,CAAJ;AAAA,KAArB;AACA,QAAI,OAAOgC,OAAP,IAAkB,WAAtB,EACIA,OAAO,CAACC,OAAR;AACP,GARQ,CAAT;AASH;;AAAA;;AAED,SAASR,OAAT,CAAiBS,IAAjB,EAAsB;AAClB,MAAIC,IAAI,GAAGD,IAAI,CAACE,gBAAL,CAAsB,QAAtB,CAAX;AACAD,MAAI,CAACR,OAAL,CAAc,UAASJ,CAAT,EAAY;AACtB,QAAGA,CAAC,CAACc,GAAF,IAAS,EAAZ,EAAgB;AACZ,UAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,SAAG,CAACE,IAAJ,CAAS,KAAT,EAAgBjB,CAAC,CAACc,GAAlB,EAAuB,KAAvB,EAFY,CAEoB;;AAChCC,SAAG,CAACG,IAAJ,CAAS,IAAT;AACAlB,OAAC,CAACmB,SAAF,GAAcJ,GAAG,CAACK,YAAlB;AACH;;AACDC,QAAI,CAACC,IAAL,CAAUC,MAAV,EAAiBvB,CAAC,CAACmB,SAAnB;AACH,GARD;AASH,C,CAED;;;AACA,SAASpB,SAAT,CAAmBD,GAAnB,EAAuB0B,EAAvB,EAA2B;AACvB,MAAIT,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACAD,KAAG,CAACU,kBAAJ,GAAyB,UAAUzB,CAAV,EAAa;AAClC,QAAIe,GAAG,CAACW,UAAJ,IAAkB,CAAtB,EAAwB;AACpB,UAAIX,GAAG,CAACY,MAAJ,IAAc,GAAlB,EAAuB;AACnBH,UAAE,CAACT,GAAG,CAACK,YAAL,CAAF;AACH,OAFD,MAEO;AACH3E,eAAO,CAACC,GAAR,CAAY,aAAWqE,GAAG,CAACY,MAAf,GAAsB,GAAlC;AACH;AACJ;AACJ,GARD;;AASAZ,KAAG,CAACE,IAAJ,CAAS,KAAT,EAAgBnB,GAAhB,EAAqB,IAArB;AACAiB,KAAG,CAACG,IAAJ;AACH;;AAAA;;IAEKU,M;AACF,oBAAgC;AAAA,QAApBC,GAAoB,uEAAd,aAAc;;AAAA;;AAC5B,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAKpD,MAAL,GAAcU,QAAQ,CAAC2C,aAAT,CAAuB,MAAID,GAAJ,GAAQ,GAA/B,CAAd;AACA,SAAKE,OAAL;AAEAR,UAAM,CAACS,YAAP,GAAsB,KAAKD,OAAL,CAAajH,IAAb,CAAkB,IAAlB,CAAtB;AACH;;;;8BAES;AACN,UAAImH,GAAG,GAAGC,6CAAA,CAAaX,MAAM,CAACY,QAApB,CAAV;AACA,UAAIrC,GAAG,GAAImC,GAAG,CAAC,KAAKJ,GAAN,CAAJ,GAAiBI,GAAG,CAAC,KAAKJ,GAAN,CAApB,GAAiC,KAAKpD,MAAL,CAAY2D,YAAZ,CAAyB,KAAKP,GAA9B,CAA3C;AACApF,aAAO,CAACC,GAAR,CAAY,SAASoD,GAArB;AACAD,qBAAe,CAACC,GAAD,EAAK,KAAKrB,MAAV,CAAf;AACH;;;;;;AAGL,IAAM0B,UAAU,GAAG,EAAnB;;IACMkC,S;AACF,uBAAiD;AAAA,QAArC5D,MAAqC,uEAA5BU,QAA4B;AAAA,QAAlB0C,GAAkB,uEAAZ,WAAY;;AAAA;;AAC7C,SAAKA,GAAL,GAAWA,GAAX;AACA1B,cAAU,CAAChG,IAAX,CAAgB,IAAhB;AACA,SAAKkG,IAAL,CAAU5B,MAAV;AACH;;;;2BAEuB;AAAA,UAAnBA,MAAmB,uEAAVU,QAAU;AACpB,UAAIzG,CAAJ;AAAA,UAAOkI,IAAP;AAAA,UAAad,GAAb;AAAA,UAAkBwC,KAAK,GAAG7D,MAAM,CAACoC,gBAAP,CAAwB,MAAI,KAAKgB,GAAT,GAAa,GAArC,CAA1B;;AACA,WAAMnJ,CAAC,GAAC,CAAR,EAAWA,CAAC,GAAC4J,KAAK,CAACzJ,MAAnB,EAA2BH,CAAC,EAA5B,EAAgC;AAC5BkI,YAAI,GAAG0B,KAAK,CAAC5J,CAAD,CAAZ;AACAoH,WAAG,GAAGc,IAAI,CAACwB,YAAL,CAAkB,KAAKP,GAAvB,CAAN;AACAhC,uBAAe,CAACC,GAAD,EAAKc,IAAL,CAAf;AACH;AACJ;;;;;;AAGL,IAAMN,SAAS,GAAG,EAAlB;;IACMiC,Q;AACF,sBAA8C;AAAA,QAAlC9D,MAAkC,uEAAzBU,QAAyB;AAAA,QAAf0C,GAAe,uEAAT,QAAS;;AAAA;;AAC1C,SAAKA,GAAL,GAAWA,GAAX;AACAvB,aAAS,CAACnG,IAAV,CAAe,IAAf;AACA,SAAKoG,MAAL,CAAY9B,MAAZ;AACH;;;;6BAEwB;AAAA,UAAlBA,MAAkB,uEAATU,QAAS;AACrB,UAAIzG,CAAJ;AAAA,UAAOkI,IAAP;AAAA,UAAa4B,EAAb;AAAA,UAAiBF,KAAK,GAAG7D,MAAM,CAACoC,gBAAP,CAAwB,UAAQ,KAAKgB,GAAb,GAAiB,GAAzC,CAAzB;;AACA,WAAMnJ,CAAC,GAAC,CAAR,EAAWA,CAAC,GAAC4J,KAAK,CAACzJ,MAAnB,EAA2BH,CAAC,EAA5B,EAAgC;AAC5BkI,YAAI,GAAG0B,KAAK,CAAC5J,CAAD,CAAZ;AACA8J,UAAE,GAAG5B,IAAI,CAACwB,YAAL,CAAkB,KAAKP,GAAvB,CAAL;AACAjB,YAAI,CAACO,SAAL,GAAiBhC,QAAQ,CAACsD,cAAT,CAAwBD,EAAxB,EAA4BrB,SAA7C;AACH;AACJ;;;;;;AACJ;AAED,IAAMX,WAAW,GAAG,EAApB;;IACMkC,U;AACF,wBAA4C;AAAA,QAAhCjE,MAAgC,uEAAvBU,QAAuB;AAAA,QAAb0C,GAAa,uEAAP,MAAO;;AAAA;;AACxC,SAAKA,GAAL,GAAWA,GAAX;AACArB,eAAW,CAACrG,IAAZ,CAAiB,IAAjB;AACA,SAAKoG,MAAL,CAAY9B,MAAZ;AACH;;;;6BAEwB;AAAA,UAAlBA,MAAkB,uEAATU,QAAS;AACrB,UAAIzG,CAAJ;AAAA,UAAOkI,IAAP;AAAA,UAAa+B,GAAb;AAAA,UAAkBL,KAAK,GAAG7D,MAAM,CAACoC,gBAAP,CAAwB,MAAI,KAAKgB,GAAT,GAAa,GAArC,CAA1B;;AACA,WAAMnJ,CAAC,GAAC,CAAR,EAAWA,CAAC,GAAC4J,KAAK,CAACzJ,MAAnB,EAA2BH,CAAC,EAA5B,EAAgC;AAC5BkI,YAAI,GAAG0B,KAAK,CAAC5J,CAAD,CAAZ;AACAiK,WAAG,GAAG/B,IAAI,CAACwB,YAAL,CAAkB,KAAKP,GAAvB,CAAN;AACAjB,YAAI,CAACX,SAAL,GAAiBoB,IAAI,CAACC,IAAL,CAAUC,MAAV,EAAiBoB,GAAjB,CAAjB;AACH;AACJ;;;;;;;;;;;;;;;;;;AC5IL;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AACO,SAASC,UAAT,CAAoBC,KAApB,EAA0B;AAC7B,MAAInK,CAAJ;AAAA,MAAOiI,IAAP;AAAA,MAAa7E,GAAb;AAAA,MAAkBD,KAAlB;AAAA,MAAyBlD,CAAC,GAAC,EAA3B;AAAA,MAA+BmK,EAAE,GAAGD,KAAK,CAACE,qBAAN,GAA8BC,IAA9B,GAAqCC,KAArC,CAA2C,SAA3C,CAApC;;AACA,OAAMvK,CAAC,GAAC,CAAR,EAAWA,CAAC,GAACoK,EAAE,CAACjK,MAAhB,EAAwBH,CAAC,EAAzB,EAA8B;AAC1BiI,QAAI,GAAGmC,EAAE,CAACpK,CAAD,CAAF,CAAMuK,KAAN,CAAY,IAAZ,CAAP;AACAnH,OAAG,GAAK6E,IAAI,CAACuC,KAAL,EAAR;AACArH,SAAK,GAAG8E,IAAI,CAACwC,IAAL,CAAU,IAAV,CAAR;AACAxK,KAAC,CAACmD,GAAD,CAAD,GAASD,KAAT;AACH;;AACD,SAAOlD,CAAP;AACH;AAEM,SAASyK,QAAT,CAAkBC,GAAlB,EAAsB;AACzB,MAAI3K,CAAJ;AAAA,MAAO4K,EAAP;AAAA,MAAWC,GAAG,GAAC,EAAf;AAAA,MAAmBC,IAAI,GAAIH,GAAG,CAACI,IAAJ,CAASC,MAAT,CAAgB,CAAhB,CAAD,CAAqBT,KAArB,CAA2B,GAA3B,CAA1B;;AACA,OAAKvK,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC8K,IAAI,CAAC3K,MAAjB,EAAyBH,CAAC,EAA1B,EAA8B;AAC1B4K,MAAE,GAAGE,IAAI,CAAC9K,CAAD,CAAJ,CAAQuK,KAAR,CAAc,GAAd,CAAL;AACAM,OAAG,CAACD,EAAE,CAAC,CAAD,CAAH,CAAH,GAAWK,kBAAkB,CAACL,EAAE,CAAC,CAAD,CAAH,CAAlB,IAA6BA,EAAE,CAAC,CAAD,CAA1C;AACH;;AACD,SAAOC,GAAP;AACH,C,CAED;;AACO,SAASK,SAAT,CAAmBP,GAAnB,EAAuB;AAC1B,MAAI3K,CAAJ;AAAA,MAAO4K,EAAP;AAAA,MAAWC,GAAG,GAAC,EAAf;AAAA,MAAmBnI,KAAK,GAAIiI,GAAG,CAACrH,MAAJ,CAAW0H,MAAX,CAAkB,CAAlB,CAAD,CAAuBT,KAAvB,CAA6B,GAA7B,CAA3B;;AACA,OAAKvK,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC0C,KAAK,CAACvC,MAAlB,EAA0BH,CAAC,EAA3B,EAA+B;AAC3B4K,MAAE,GAAGlI,KAAK,CAAC1C,CAAD,CAAL,CAASuK,KAAT,CAAe,GAAf,CAAL;AACAM,OAAG,CAACD,EAAE,CAAC,CAAD,CAAH,CAAH,GAAWA,EAAE,CAAC,CAAD,CAAF,IAASA,EAAE,CAAC,CAAD,CAAtB;AACH;;AACD,SAAOC,GAAP;AACH,C;;;;;;;;;;;;ACvDD;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;AAIA;;;;;;AAMO,SAAStF,IAAT,CAAczF,GAAd,EAAkB0F,KAAlB,EAAwBC,IAAxB,EAA6B;AAChC,MAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,QAAM,CAACE,EAAP,GAAY9F,GAAZ;;AACA4F,QAAM,CAACG,MAAP,GAAgB,UAASC,KAAT,EAAgB;AAC5B,SAAKF,EAAL,CAAQ,GAAR,EAAYE,KAAK,CAACC,MAAN,CAAaC,MAAzB;AACH,GAFD;;AAGAN,QAAM,CAACO,OAAP,GAAiB,UAASH,KAAT,EAAgB;AAC7B,SAAKF,EAAL,CAAQ,GAAR,EAAYE,KAAK,CAACC,MAAN,CAAaG,KAAb,CAAmBC,IAA/B;AACH,GAFD;;AAGA,MAAGV,IAAI,IAAI,SAAX,EACIC,MAAM,CAACU,aAAP,CAAqBZ,KAArB,EADJ,KAGIE,MAAM,CAACW,UAAP,CAAkBb,KAAlB;AACP;AAAA;AAED;;;;;;;AAMO,SAASc,IAAT,CAAcd,KAAd,EAAqBe,IAArB,EAA2B/E,IAA3B,EAAiC;AAAE;AACtC,MAAIgF,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAf;AACA,MAAIH,IAAI,CAACI,UAAL,CAAgB,MAAhB,CAAJ,EACIH,QAAQ,CAACI,YAAT,CAAsB,MAAtB,EAA8B,UAAQL,IAAR,GAAa,GAAb,GAAmBM,kBAAkB,CAACrF,IAAD,CAAnE,EADJ,KAGIgF,QAAQ,CAACI,YAAT,CAAsB,MAAtB,EAA8B,UAAQL,IAAR,GAAa,GAAb,GAAmBO,IAAI,CAACtF,IAAD,CAArD;AACJgF,UAAQ,CAACI,YAAT,CAAsB,UAAtB,EAAkCpB,KAAlC;;AAEA,MAAIiB,QAAQ,CAACM,WAAb,EAA0B;AACtB,QAAIjB,KAAK,GAAGW,QAAQ,CAACM,WAAT,CAAqB,aAArB,CAAZ;AACAjB,SAAK,CAACkB,SAAN,CAAgB,OAAhB,EAAyB,IAAzB,EAA+B,IAA/B;AACAR,YAAQ,CAACS,aAAT,CAAuBnB,KAAvB;AACH,GAJD,MAIO;AACHU,YAAQ,CAACU,KAAT;AACH;AACJ,C;;;;;;;;;;;;ACpED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AACA;AACA;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;CAMA;;AACO,SAAS7C,IAAT,CAAc8G,GAAd,EAAmBrC,EAAnB,EAAuB;AAC1BxH,MAAI,CAAC6J,GAAD,EAAK,UAAU7D,CAAV,EAAY;AACjBwB,MAAE,CAACxE,IAAI,CAACC,KAAL,CAAW+C,CAAX,CAAD,CAAF;AACH,GAFG,CAAJ;AAGH;AAAA,C,CAED;;AACO,SAAS8D,IAAT,CAAcD,GAAd,EAAkBpJ,MAAlB,EAA0B;AAC7BT,MAAI,CAAC6J,GAAD,EAAM,UAAS7D,CAAT,EAAW;AACjBvF,UAAM,CAACwF,SAAP,GAAmBD,CAAnB;AACA+D,cAAU,CAACtJ,MAAD,EAAQ,YAAR,CAAV;AACAyF,WAAO,CAACzF,MAAD,CAAP;AACA,QAAIuJ,QAAJ,EAAcnC,GAAG,CAACmC,QAAD,EAAUvJ,MAAV,CAAH;AACjB,GALG,CAAJ;AAMH;AAAA;;AAED,SAASyF,OAAT,CAAiBS,IAAjB,EAAsB;AAClB,MAAIC,IAAI,GAAGD,IAAI,CAACE,gBAAL,CAAsB,QAAtB,CAAX;AACAD,MAAI,CAACR,OAAL,CAAa,UAASJ,CAAT,EAAY;AACrBqB,QAAI,CAACC,IAAL,CAAUC,MAAV,EAAiBvB,CAAC,CAACmB,SAAnB;AACH,GAFD;AAGH,C,CAED;;;AACO,SAASnH,IAAT,CAAc6J,GAAd,EAAkBrC,EAAlB,EAAsB;AACzB,MAAIT,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACAD,KAAG,CAACU,kBAAJ,GAAyB,UAAUzB,CAAV,EAAa;AAClC,QAAIe,GAAG,CAACW,UAAJ,IAAkB,CAAtB,EAAwB;AACpB,UAAIX,GAAG,CAACY,MAAJ,IAAc,GAAlB,EAAuB;AACnBH,UAAE,CAACT,GAAG,CAACK,YAAL,CAAF;AACH,OAFD,MAEO;AACH3E,eAAO,CAACC,GAAR,CAAY,aAAWqE,GAAG,CAACY,MAAf,GAAsB,GAAlC;AACH;AACJ;AACJ,GARD;;AASAZ,KAAG,CAACE,IAAJ,CAAS,KAAT,EAAgB4C,GAAhB,EAAqB,IAArB;AACA9C,KAAG,CAACG,IAAJ;AACH;AAAA;AAEM,SAAS+C,MAAT,CAAgBC,GAAhB,EAAoB;AAAE;AACzB,MAAIvD,IAAI,GAAGxB,QAAQ,CAAC2C,aAAT,CAAuB,MAAIoC,GAAJ,GAAQ,GAA/B,CAAX;AACA,MAAIC,GAAG,GAAGf,wDAAQ,CAAC7B,MAAM,CAACY,QAAR,CAAlB;AACA,MAAIiC,GAAG,GAAID,GAAG,CAACD,GAAD,CAAJ,GAAYC,GAAG,CAACD,GAAD,CAAH,GAAS,OAArB,GAA+BvD,IAAI,CAACyB,YAAL,CAAkB8B,GAAlB,CAAzC,CAHuB,CAIvB;;AACAJ,MAAI,CAACM,GAAD,EAAKzD,IAAL,CAAJ,CALuB,CAMvB;;AACAY,QAAM,CAACS,YAAP,GAAsB,YAAY;AAC9B,QAAImC,GAAG,GAAGf,wDAAQ,CAAC7B,MAAM,CAACY,QAAR,CAAlB;AACA,QAAIiC,GAAG,GAAID,GAAG,CAACD,GAAD,CAAJ,GAAYC,GAAG,CAACD,GAAD,CAAH,GAAS,OAArB,GAA+BvD,IAAI,CAACyB,YAAL,CAAkB8B,GAAlB,CAAzC;AACAJ,QAAI,CAACM,GAAD,EAAKzD,IAAL,CAAJ;AACH,GAJD;AAKH;AAAA,C,CAED;;AACA,IAAIqD,QAAQ,GAAG,IAAf;AACO,SAASnC,GAAT,CAAaqC,GAAb,EAAmC;AAAA,MAAjBG,IAAiB,uEAAVlF,QAAU;AACtC,MAAIzG,CAAJ;AAAA,MAAOiI,IAAP;AAAA,MAAakD,GAAb;AAAA,MAAkBS,KAAK,GAAGD,IAAI,CAACxD,gBAAL,CAAsB,MAAIqD,GAAJ,GAAQ,GAA9B,CAA1B;AACAF,UAAQ,GAAGE,GAAX;;AACA,OAAMxL,CAAC,GAAC,CAAR,EAAWA,CAAC,GAAC4L,KAAK,CAACzL,MAAnB,EAA2BH,CAAC,EAA5B,EAAgC;AAC5BiI,QAAI,GAAG2D,KAAK,CAAC5L,CAAD,CAAZ;AACAmL,OAAG,GAAGlD,IAAI,CAACyB,YAAL,CAAkB8B,GAAlB,CAAN;AACAJ,QAAI,CAACD,GAAD,EAAKlD,IAAL,CAAJ;AACH;AACJ;AAAA,C,CAID;;AACA,IAAI4D,SAAS,GAAG;AAAC,OAAK,OAAN;AAAc,OAAK,MAAnB;AAA0B,OAAK,MAA/B;AAAsC,OAAK,QAA3C;AAAoD,OAAK,OAAzD;AAAiE,OAAK;AAAtE,CAAhB;;AACA,SAASC,WAAT,CAAqBjL,MAArB,EAA6B;AAAE,SAAOkL,MAAM,CAAClL,MAAD,CAAN,CAAemL,OAAf,CAAuB,YAAvB,EAAqC,UAAUC,CAAV,EAAa;AAAE,WAAOJ,SAAS,CAACI,CAAD,CAAhB;AAAsB,GAA1E,CAAP;AAAqF;;AAAA;AAC7G,SAASZ,UAAT,CAAoBtJ,MAApB,EAA4B;AAC/B,MAAI/B,CAAJ;AAAA,MAAOiI,IAAP;AAAA,MAAaiE,GAAb;AAAA,MAAkBC,SAAS,GAAGpK,MAAM,CAACoG,gBAAP,CAAwB,cAAxB,CAA9B;;AACA,OAAInI,CAAC,GAAC,CAAN,EAASA,CAAC,GAACmM,SAAS,CAAChM,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAC9BiI,QAAI,GAAGkE,SAAS,CAACnM,CAAD,CAAhB;AACAkM,OAAG,GAAGJ,WAAW,CAAC7D,IAAI,CAACV,SAAN,CAAjB;AACAU,QAAI,CAACV,SAAL,GAAiB2E,GAAjB;AACH;AACJ;AAAA,C;;;;;;;;;;;;AC1GD;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AACO,SAAShC,UAAT,CAAoBC,KAApB,EAA0B;AAC7B,MAAInK,CAAJ;AAAA,MAAOiI,IAAP;AAAA,MAAa7E,GAAb;AAAA,MAAkBD,KAAlB;AAAA,MAAyBlD,CAAC,GAAC,EAA3B;AAAA,MAA+BmK,EAAE,GAAGD,KAAK,CAACE,qBAAN,GAA8BC,IAA9B,GAAqCC,KAArC,CAA2C,SAA3C,CAApC;;AACA,OAAMvK,CAAC,GAAC,CAAR,EAAWA,CAAC,GAACoK,EAAE,CAACjK,MAAhB,EAAwBH,CAAC,EAAzB,EAA8B;AAC1BiI,QAAI,GAAGmC,EAAE,CAACpK,CAAD,CAAF,CAAMuK,KAAN,CAAY,IAAZ,CAAP;AACAnH,OAAG,GAAK6E,IAAI,CAACuC,KAAL,EAAR;AACArH,SAAK,GAAG8E,IAAI,CAACwC,IAAL,CAAU,IAAV,CAAR;AACAxK,KAAC,CAACmD,GAAD,CAAD,GAASD,KAAT;AACH;;AACD,SAAOlD,CAAP;AACH;AAEM,SAASyK,QAAT,CAAkBC,GAAlB,EAAsB;AACzB,MAAI3K,CAAJ;AAAA,MAAO4K,EAAP;AAAA,MAAWC,GAAG,GAAC,EAAf;AAAA,MAAmBC,IAAI,GAAIH,GAAG,CAACI,IAAJ,CAASC,MAAT,CAAgB,CAAhB,CAAD,CAAqBT,KAArB,CAA2B,GAA3B,CAA1B;;AACA,OAAKvK,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC8K,IAAI,CAAC3K,MAAjB,EAAyBH,CAAC,EAA1B,EAA8B;AAC1B4K,MAAE,GAAGE,IAAI,CAAC9K,CAAD,CAAJ,CAAQuK,KAAR,CAAc,GAAd,CAAL;AACAM,OAAG,CAACD,EAAE,CAAC,CAAD,CAAH,CAAH,GAAWK,kBAAkB,CAACL,EAAE,CAAC,CAAD,CAAH,CAAlB,IAA6BA,EAAE,CAAC,CAAD,CAA1C;AACH;;AACD,SAAOC,GAAP;AACH,C,CAED;;AACO,SAASK,SAAT,CAAmBP,GAAnB,EAAuB;AAC1B,MAAI3K,CAAJ;AAAA,MAAO4K,EAAP;AAAA,MAAWC,GAAG,GAAC,EAAf;AAAA,MAAmBnI,KAAK,GAAIiI,GAAG,CAACrH,MAAJ,CAAW0H,MAAX,CAAkB,CAAlB,CAAD,CAAuBT,KAAvB,CAA6B,GAA7B,CAA3B;;AACA,OAAKvK,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC0C,KAAK,CAACvC,MAAlB,EAA0BH,CAAC,EAA3B,EAA+B;AAC3B4K,MAAE,GAAGlI,KAAK,CAAC1C,CAAD,CAAL,CAASuK,KAAT,CAAe,GAAf,CAAL;AACAM,OAAG,CAACD,EAAE,CAAC,CAAD,CAAH,CAAH,GAAWA,EAAE,CAAC,CAAD,CAAF,IAASA,EAAE,CAAC,CAAD,CAAtB;AACH;;AACD,SAAOC,GAAP;AACH,C;;;;;;;;;;;;;;;;;;;;ACvDD;;;;;;;;;;;;;;;;;;;;;;AAuBA;;;AAKO,SAASuB,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAgD;AAAA,MAA1BC,KAA0B,uEAAlB,CAAkB;AAAA,MAAfC,MAAe,uEAAN,KAAM;AACtD,MAAIC,CAAJ;AAAA,MAAOrI,CAAC,GAAGiI,CAAC,CAAClM,MAAb;AAAA,MAAqBuM,EAAE,GAAGJ,CAAC,CAACnM,MAA5B;AAAA,MAAoCwM,EAApC;AAAA,MAAwCC,CAAC,GAAG,IAAI1M,KAAJ,CAAUkE,CAAV,CAA5C;;AAEA,MAAImI,KAAK,IAAI,CAAb,EAAgB;AACf,SAAI,IAAIvM,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACoE,CAAf,EAAkBpE,CAAC,EAAnB,EAAsB;AACrByM,OAAC,GAAG,GAAJ;AACAE,QAAE,GAAKD,EAAE,GAAG1M,CAAP,GAAaA,CAAb,GAAgB0M,EAArB;;AACA,WAAI,IAAIzI,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC0I,EAAf,EAAmB1I,CAAC,EAApB;AACCwI,SAAC,IAAIH,CAAC,CAACrI,CAAD,CAAD,GAAKoI,CAAC,CAACrM,CAAC,GAACiE,CAAH,CAAX;AADD,OAHqB,CAIF;;;AACnB2I,OAAC,CAAC5M,CAAD,CAAD,GAAOyM,CAAP;AACA;AACD,GARD,MAQO;AAAE;AACR,SAAI,IAAIzM,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACoE,CAAf,EAAkBpE,CAAC,EAAnB,EAAsB;AACrByM,OAAC,GAAG,GAAJ;;AACA,WAAI,IAAIxI,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACyI,EAAf,EAAmBzI,CAAC,EAApB;AACCwI,SAAC,IAAIH,CAAC,CAACrI,CAAD,CAAD,GAAKoI,CAAC,CAAC,CAACrM,CAAC,GAACiE,CAAH,IAAMG,CAAP,CAAX;AADD,OAFqB,CAGA;;;AACrBwI,OAAC,CAAC5M,CAAD,CAAD,GAAOyM,CAAP;AACA;AACD;;AACD,SAAOG,CAAP;AACA;;IAGKC,I;AACF,gBAAYC,IAAZ,EAAiB;AAAA;;AACb,SAAKA,IAAL,GAAYA,IAAZ;;AACA,QAAI,CAACA,IAAI,GAAIA,IAAI,GAAG,CAAhB,KAAuB,CAA3B,EAA8B;AAC1B,WAAKC,IAAL,GAAU,cAAV;AACA,WAAKC,QAAL,CAAcF,IAAd;AACH,KAHD,MAGO;AACH,WAAKC,IAAL,GAAU,WAAV;AACA,WAAKE,WAAL,CAAiBH,IAAjB;AACH;AACJ;;;;iCAEY;AACT,aAAO5M,KAAK,CAAC,KAAG,KAAK4M,IAAL,GAAU,CAAV,GAAY,CAAf,CAAD,CAAZ;AACH;;;wBAEGI,G,EAAIC,G,EAAI;AACR,UAAIA,GAAG,CAAChN,MAAJ,IAAc,KAAK2M,IAAnB,IAA2BI,GAAG,CAAC/M,MAAJ,IAAc,KAAGgN,GAAG,CAAChN,MAAJ,GAAW,CAAX,GAAa,CAAhB,CAA7C,EACI,OAAO,4BAAP;;AAEJ,UAAG,KAAK4M,IAAL,GAAU,cAAb,EAA4B,CAE3B,CAFD,MAEO,IAAG,KAAKA,IAAL,GAAU,WAAb,EAAyB,CAE/B,CAFM,MAEA,OAAO,wBAAsB,KAAKA,IAAlC;;AAEP,aAAQ,CAAR;AACH;;;yBAEIG,G,EAAIC,G,EAAK;AACV,UAAID,GAAG,CAAC/M,MAAJ,IAAc,KAAK2M,IAAnB,IAA2BK,GAAG,CAAChN,MAAJ,IAAc,KAAG+M,GAAG,CAAC/M,MAAJ,GAAW,CAAX,GAAa,CAAhB,CAA7C,EACI,OAAO,4BAAP;;AAEJ,UAAG,KAAK4M,IAAL,GAAU,cAAb,EAA4B,CAE3B,CAFD,MAEO,IAAG,KAAKA,IAAL,GAAU,WAAb,EAAyB,CAE/B,CAFM,MAEA,OAAO,wBAAsB,KAAKA,IAAlC;;AAEP,aAAQ,CAAR;AACH,K,CAED;;;;6BACSD,I,EAAK;AACV;AACH,WAAKM,QAAL,GAAgB,IAAIlN,KAAJ,CAAU4M,IAAI,GAAG,CAAjB,CAAhB;AACA,WAAKO,QAAL,GAAgB,IAAInN,KAAJ,CAAU4M,IAAI,GAAG,CAAjB,CAAhB;;AACA,WAAK,IAAI9M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8M,IAAI,GAAG,CAA3B,EAA8B9M,CAAC,EAA/B,EAAmC;AAClC,aAAKoN,QAAL,CAAcpN,CAAd,IAAmBsN,IAAI,CAACC,GAAL,CAAS,IAAID,IAAI,CAACE,EAAT,GAAcxN,CAAd,GAAkB8M,IAA3B,CAAnB;AACA,aAAKO,QAAL,CAAcrN,CAAd,IAAmBsN,IAAI,CAACG,GAAL,CAAS,IAAIH,IAAI,CAACE,EAAT,GAAcxN,CAAd,GAAkB8M,IAA3B,CAAnB;AACA;AACD,K,CAED;;;;gCACYA,I,EAAK;AACb,WAAKM,QAAL,GAAgB,IAAIlN,KAAJ,CAAU4M,IAAV,CAAhB;AACH,WAAKO,QAAL,GAAgB,IAAInN,KAAJ,CAAU4M,IAAV,CAAhB;;AACA,WAAK,IAAI9M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8M,IAApB,EAA0B9M,CAAC,EAA3B,EAA+B;AAC9B,YAAIiE,CAAC,GAAGjE,CAAC,GAAGA,CAAJ,IAAS8M,IAAI,GAAG,CAAhB,CAAR;AACA,aAAKM,QAAL,CAAcpN,CAAd,IAAmBsN,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,EAAL,GAAUvJ,CAAV,GAAc6I,IAAvB,CAAnB;AACA,aAAKO,QAAL,CAAcrN,CAAd,IAAmBsN,IAAI,CAACG,GAAL,CAASH,IAAI,CAACE,EAAL,GAAUvJ,CAAV,GAAc6I,IAAvB,CAAnB;AACA;AACD,K,CAED;;;;2BACOxL,I,EAAK;AACR;AACA,WAAK,IAAItB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8M,IAAzB,EAA+B9M,CAAC,EAAhC,EAAoC;AAChC,YAAIiE,CAAC,GAAGyJ,YAAY,CAAC1N,CAAD,EAAI2N,MAAJ,CAApB;;AACA,YAAI1J,CAAC,GAAGjE,CAAR,EAAW;AACP,cAAI4N,IAAI,GAAGC,IAAI,CAAC7N,CAAD,CAAf;AACA6N,cAAI,CAAC7N,CAAD,CAAJ,GAAU6N,IAAI,CAAC5J,CAAD,CAAd;AACA4J,cAAI,CAAC5J,CAAD,CAAJ,GAAU2J,IAAV;AACAA,cAAI,GAAGE,IAAI,CAAC9N,CAAD,CAAX;AACA8N,cAAI,CAAC9N,CAAD,CAAJ,GAAU8N,IAAI,CAAC7J,CAAD,CAAd;AACA6J,cAAI,CAAC7J,CAAD,CAAJ,GAAU2J,IAAV;AACH;AACJ,OAZO,CAcR;;;AACH,WAAK,IAAId,IAAI,GAAG,CAAhB,EAAmBA,IAAI,IAAI,KAAKA,IAAhC,EAAsCA,IAAI,IAAI,CAA9C,EAAiD;AAChD,YAAIiB,QAAQ,GAAGjB,IAAI,GAAG,CAAtB;AACA,YAAIkB,SAAS,GAAG,KAAKlB,IAAL,GAAYA,IAA5B;;AACA,aAAK,IAAI9M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8M,IAAzB,EAA+B9M,CAAC,IAAI8M,IAApC,EAA0C;AACzC,eAAK,IAAI7I,CAAC,GAAGjE,CAAR,EAAWiO,CAAC,GAAG,CAApB,EAAuBhK,CAAC,GAAGjE,CAAC,GAAG+N,QAA/B,EAAyC9J,CAAC,IAAIgK,CAAC,IAAID,SAAnD,EAA8D;AAC7D,gBAAI5J,CAAC,GAAGH,CAAC,GAAG8J,QAAZ;AACA,gBAAIG,IAAI,GAAIL,IAAI,CAACzJ,CAAD,CAAJ,GAAU,KAAKgJ,QAAL,CAAca,CAAd,CAAV,GAA6BH,IAAI,CAAC1J,CAAD,CAAJ,GAAU,KAAKiJ,QAAL,CAAcY,CAAd,CAAnD;AACA,gBAAIE,IAAI,GAAG,CAACN,IAAI,CAACzJ,CAAD,CAAL,GAAW,KAAKiJ,QAAL,CAAcY,CAAd,CAAX,GAA8BH,IAAI,CAAC1J,CAAD,CAAJ,GAAU,KAAKgJ,QAAL,CAAca,CAAd,CAAnD;AACAJ,gBAAI,CAACzJ,CAAD,CAAJ,GAAUyJ,IAAI,CAAC5J,CAAD,CAAJ,GAAUiK,IAApB;AACAJ,gBAAI,CAAC1J,CAAD,CAAJ,GAAU0J,IAAI,CAAC7J,CAAD,CAAJ,GAAUkK,IAApB;AACAN,gBAAI,CAAC5J,CAAD,CAAJ,IAAWiK,IAAX;AACAJ,gBAAI,CAAC7J,CAAD,CAAJ,IAAWkK,IAAX;AACA;AACD;AACE;AACJ;;;;KAGL;AACA;;;AACA,SAAST,YAAT,CAAsBrB,CAAtB,EAAyB+B,IAAzB,EAA+B;AAC3B,MAAIxB,CAAC,GAAG,CAAR;;AACA,OAAK,IAAI5M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoO,IAApB,EAA0BpO,CAAC,EAA3B;AACI4M,KAAC,GAAIA,CAAC,IAAI,CAAN,GAAYP,CAAC,GAAG,CAApB,EAAwBA,CAAC,MAAM,CAA/B;AADJ;;AAEA,SAAOO,CAAP;AACH,C,CAED;;;AACA,SAASyB,WAAT,CAAqBC,CAArB,EAAwB;AACvB,MAAI9N,CAAC,GAAG,IAAIN,KAAJ,CAAUoO,CAAV,CAAR;;AACA,OAAK,IAAItO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB;AACCQ,KAAC,CAACR,CAAD,CAAD,GAAO,GAAP;AADD;;AAEA,SAAOQ,CAAP;AACA,C,CAED;;;AAIA,SAAS+N,UAAT,CAAoBV,IAApB,EAA0BC,IAA1B,EAAgC;AAC/B;AACA,MAAIQ,CAAC,GAAGT,IAAI,CAAC1N,MAAb;AACA,MAAImO,CAAC,IAAIR,IAAI,CAAC3N,MAAd,EACC,MAAM,oBAAN;AACD,MAAImO,CAAC,IAAI,CAAT,EAAa;AACZ;AACD,MAAIX,MAAM,GAAG,CAAC,CAAd;;AACA,OAAK,IAAI3N,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC5B,QAAI,KAAKA,CAAL,IAAUsO,CAAd,EACCX,MAAM,GAAG3N,CAAT,CAF2B,CAEd;AACd;;AACD,MAAI2N,MAAM,IAAI,CAAC,CAAf,EACC,MAAM,4BAAN,CAb8B,CAe/B;;AACA,MAAIP,QAAQ,GAAG,IAAIlN,KAAJ,CAAUoO,CAAC,GAAG,CAAd,CAAf;AACA,MAAIjB,QAAQ,GAAG,IAAInN,KAAJ,CAAUoO,CAAC,GAAG,CAAd,CAAf;;AACA,OAAK,IAAItO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAAC,GAAG,CAAxB,EAA2BtO,CAAC,EAA5B,EAAgC;AAC/BoN,YAAQ,CAACpN,CAAD,CAAR,GAAcsN,IAAI,CAACC,GAAL,CAAS,IAAID,IAAI,CAACE,EAAT,GAAcxN,CAAd,GAAkBsO,CAA3B,CAAd;AACAjB,YAAQ,CAACrN,CAAD,CAAR,GAAcsN,IAAI,CAACG,GAAL,CAAS,IAAIH,IAAI,CAACE,EAAT,GAAcxN,CAAd,GAAkBsO,CAA3B,CAAd;AACA,GArB8B,CAuB/B;;;AACA,OAAK,IAAItO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAC3B,QAAIiE,CAAC,GAAGuK,WAAW,CAACxO,CAAD,EAAI2N,MAAJ,CAAnB;;AACA,QAAI1J,CAAC,GAAGjE,CAAR,EAAW;AACV,UAAI4N,IAAI,GAAGC,IAAI,CAAC7N,CAAD,CAAf;AACA6N,UAAI,CAAC7N,CAAD,CAAJ,GAAU6N,IAAI,CAAC5J,CAAD,CAAd;AACA4J,UAAI,CAAC5J,CAAD,CAAJ,GAAU2J,IAAV;AACAA,UAAI,GAAGE,IAAI,CAAC9N,CAAD,CAAX;AACA8N,UAAI,CAAC9N,CAAD,CAAJ,GAAU8N,IAAI,CAAC7J,CAAD,CAAd;AACA6J,UAAI,CAAC7J,CAAD,CAAJ,GAAU2J,IAAV;AACA;AACD,GAlC8B,CAoC/B;;;AACA,OAAK,IAAId,IAAI,GAAG,CAAhB,EAAmBA,IAAI,IAAIwB,CAA3B,EAA8BxB,IAAI,IAAI,CAAtC,EAAyC;AACxC,QAAIiB,QAAQ,GAAGjB,IAAI,GAAG,CAAtB;AACA,QAAIkB,SAAS,GAAGM,CAAC,GAAGxB,IAApB;;AACA,SAAK,IAAI9M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,IAAI8M,IAA5B,EAAkC;AACjC,WAAK,IAAI7I,CAAC,GAAGjE,CAAR,EAAWiO,CAAC,GAAG,CAApB,EAAuBhK,CAAC,GAAGjE,CAAC,GAAG+N,QAA/B,EAAyC9J,CAAC,IAAIgK,CAAC,IAAID,SAAnD,EAA8D;AAC7D,YAAI5J,CAAC,GAAGH,CAAC,GAAG8J,QAAZ;AACA,YAAIG,IAAI,GAAIL,IAAI,CAACzJ,CAAD,CAAJ,GAAUgJ,QAAQ,CAACa,CAAD,CAAlB,GAAwBH,IAAI,CAAC1J,CAAD,CAAJ,GAAUiJ,QAAQ,CAACY,CAAD,CAAtD;AACA,YAAIE,IAAI,GAAG,CAACN,IAAI,CAACzJ,CAAD,CAAL,GAAWiJ,QAAQ,CAACY,CAAD,CAAnB,GAAyBH,IAAI,CAAC1J,CAAD,CAAJ,GAAUgJ,QAAQ,CAACa,CAAD,CAAtD;AACAJ,YAAI,CAACzJ,CAAD,CAAJ,GAAUyJ,IAAI,CAAC5J,CAAD,CAAJ,GAAUiK,IAApB;AACAJ,YAAI,CAAC1J,CAAD,CAAJ,GAAU0J,IAAI,CAAC7J,CAAD,CAAJ,GAAUkK,IAApB;AACAN,YAAI,CAAC5J,CAAD,CAAJ,IAAWiK,IAAX;AACAJ,YAAI,CAAC7J,CAAD,CAAJ,IAAWkK,IAAX;AACA;AACD;AACD;AACD;;AAGD,SAASM,kBAAT,CAA4BZ,IAA5B,EAAkCC,IAAlC,EAAwC;AACvC;AACA,MAAIQ,CAAC,GAAGT,IAAI,CAAC1N,MAAb;AACA,MAAImO,CAAC,IAAIR,IAAI,CAAC3N,MAAd,EACC,MAAM,oBAAN;AACD,MAAIuO,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGJ,CAAC,GAAG,CAAJ,GAAQ,CAAnB;AACCI,KAAC,IAAI,CAAL;AADD,GANuC,CASvC;;;AACA,MAAItB,QAAQ,GAAG,IAAIlN,KAAJ,CAAUoO,CAAV,CAAf;AACA,MAAIjB,QAAQ,GAAG,IAAInN,KAAJ,CAAUoO,CAAV,CAAf;;AACA,OAAK,IAAItO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAC3B,QAAIiE,CAAC,GAAGjE,CAAC,GAAGA,CAAJ,IAASsO,CAAC,GAAG,CAAb,CAAR,CAD2B,CACD;;AAC1BlB,YAAQ,CAACpN,CAAD,CAAR,GAAcsN,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,EAAL,GAAUvJ,CAAV,GAAcqK,CAAvB,CAAd;AACAjB,YAAQ,CAACrN,CAAD,CAAR,GAAcsN,IAAI,CAACG,GAAL,CAASH,IAAI,CAACE,EAAL,GAAUvJ,CAAV,GAAcqK,CAAvB,CAAd;AACA,GAhBsC,CAkBvC;;;AACA,MAAIK,KAAK,GAAGC,eAAe,CAACF,CAAD,CAA3B;AACA,MAAIG,KAAK,GAAGD,eAAe,CAACF,CAAD,CAA3B;;AACA,OAAK,IAAI1O,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAC3B2O,SAAK,CAAC3O,CAAD,CAAL,GAAY6N,IAAI,CAAC7N,CAAD,CAAJ,GAAUoN,QAAQ,CAACpN,CAAD,CAAlB,GAAwB8N,IAAI,CAAC9N,CAAD,CAAJ,GAAUqN,QAAQ,CAACrN,CAAD,CAAtD;AACA6O,SAAK,CAAC7O,CAAD,CAAL,GAAW,CAAC6N,IAAI,CAAC7N,CAAD,CAAL,GAAWqN,QAAQ,CAACrN,CAAD,CAAnB,GAAyB8N,IAAI,CAAC9N,CAAD,CAAJ,GAAUoN,QAAQ,CAACpN,CAAD,CAAtD;AACA;;AACD,MAAI8O,KAAK,GAAGF,eAAe,CAACF,CAAD,CAA3B;AACA,MAAIK,KAAK,GAAGH,eAAe,CAACF,CAAD,CAA3B;AACAI,OAAK,CAAC,CAAD,CAAL,GAAW1B,QAAQ,CAAC,CAAD,CAAnB;AACA2B,OAAK,CAAC,CAAD,CAAL,GAAW1B,QAAQ,CAAC,CAAD,CAAnB;;AACA,OAAK,IAAIrN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAC3B8O,SAAK,CAAC9O,CAAD,CAAL,GAAW8O,KAAK,CAACJ,CAAC,GAAG1O,CAAL,CAAL,GAAeoN,QAAQ,CAACpN,CAAD,CAAlC;AACA+O,SAAK,CAAC/O,CAAD,CAAL,GAAW+O,KAAK,CAACL,CAAC,GAAG1O,CAAL,CAAL,GAAeqN,QAAQ,CAACrN,CAAD,CAAlC;AACA,GAhCsC,CAkCvC;;;AACA,MAAIgP,KAAK,GAAG,IAAI9O,KAAJ,CAAUwO,CAAV,CAAZ;AACA,MAAIO,KAAK,GAAG,IAAI/O,KAAJ,CAAUwO,CAAV,CAAZ;AACAQ,iBAAe,CAACP,KAAD,EAAQE,KAAR,EAAeC,KAAf,EAAsBC,KAAtB,EAA6BC,KAA7B,EAAoCC,KAApC,CAAf,CArCuC,CAuCvC;;AACA,OAAK,IAAIjP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAC3B6N,QAAI,CAAC7N,CAAD,CAAJ,GAAWgP,KAAK,CAAChP,CAAD,CAAL,GAAWoN,QAAQ,CAACpN,CAAD,CAAnB,GAAyBiP,KAAK,CAACjP,CAAD,CAAL,GAAWqN,QAAQ,CAACrN,CAAD,CAAvD;AACA8N,QAAI,CAAC9N,CAAD,CAAJ,GAAU,CAACgP,KAAK,CAAChP,CAAD,CAAN,GAAYqN,QAAQ,CAACrN,CAAD,CAApB,GAA0BiP,KAAK,CAACjP,CAAD,CAAL,GAAWoN,QAAQ,CAACpN,CAAD,CAAvD;AACA;AACD;AAGD;;;;;AAGA,SAASmP,YAAT,CAAsB9C,CAAtB,EAAyBO,CAAzB,EAA4BM,GAA5B,EAAiC;AAChC,MAAIoB,CAAC,GAAGjC,CAAC,CAAClM,MAAV;AACA,MAAImO,CAAC,IAAI1B,CAAC,CAACzM,MAAP,IAAiBmO,CAAC,IAAIpB,GAAG,CAAC/M,MAA9B,EACC,MAAM,oBAAN;AACD+O,iBAAe,CAAC7C,CAAD,EAAIuC,eAAe,CAACN,CAAD,CAAnB,EAAwB1B,CAAxB,EAA2BgC,eAAe,CAACN,CAAD,CAA1C,EAA+CpB,GAA/C,EAAoD0B,eAAe,CAACN,CAAD,CAAnE,CAAf;AACA;AAGD;;;;;AAGA,SAASY,eAAT,CAAyBE,KAAzB,EAAgCC,KAAhC,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,OAArD,EAA8DC,OAA9D,EAAuE;AACtE,MAAInB,CAAC,GAAGc,KAAK,CAACjP,MAAd;AACA,MAAImO,CAAC,IAAIe,KAAK,CAAClP,MAAX,IAAqBmO,CAAC,IAAIgB,KAAK,CAACnP,MAAhC,IAA0CmO,CAAC,IAAIiB,KAAK,CAACpP,MAArD,IACCmO,CAAC,IAAIkB,OAAO,CAACrP,MADd,IACwBmO,CAAC,IAAImB,OAAO,CAACtP,MADzC,EAEC,MAAM,oBAAN;AAEDiP,OAAK,GAAGA,KAAK,CAACvM,KAAN,EAAR;AACAwM,OAAK,GAAGA,KAAK,CAACxM,KAAN,EAAR;AACAyM,OAAK,GAAGA,KAAK,CAACzM,KAAN,EAAR;AACA0M,OAAK,GAAGA,KAAK,CAAC1M,KAAN,EAAR;AACA6M,WAAS,CAACN,KAAD,EAAQC,KAAR,CAAT;AACAK,WAAS,CAACJ,KAAD,EAAQC,KAAR,CAAT;;AAEA,OAAK,IAAIvP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAC3B,QAAI4N,IAAI,GAAGwB,KAAK,CAACpP,CAAD,CAAL,GAAWsP,KAAK,CAACtP,CAAD,CAAhB,GAAsBqP,KAAK,CAACrP,CAAD,CAAL,GAAWuP,KAAK,CAACvP,CAAD,CAAjD;AACAqP,SAAK,CAACrP,CAAD,CAAL,GAAWqP,KAAK,CAACrP,CAAD,CAAL,GAAWsP,KAAK,CAACtP,CAAD,CAAhB,GAAsBoP,KAAK,CAACpP,CAAD,CAAL,GAAWuP,KAAK,CAACvP,CAAD,CAAjD;AACAoP,SAAK,CAACpP,CAAD,CAAL,GAAW4N,IAAX;AACA;;AACD+B,kBAAgB,CAACP,KAAD,EAAQC,KAAR,CAAhB;;AAEA,OAAK,IAAIrP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsO,CAApB,EAAuBtO,CAAC,EAAxB,EAA4B;AAAG;AAC9BwP,WAAO,CAACxP,CAAD,CAAP,GAAaoP,KAAK,CAACpP,CAAD,CAAL,GAAWsO,CAAxB;AACAmB,WAAO,CAACzP,CAAD,CAAP,GAAaqP,KAAK,CAACrP,CAAD,CAAL,GAAWsO,CAAxB;AACA;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtTD;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;CAEA;;AACA;AACA;;IAEMsB,I;AACF,gBAAYC,GAAZ,EAAiBD,KAAjB,EAAsB;AAAA;;AAClB,SAAKxK,GAAL,GAAWyK,GAAX;AACA,SAAKC,IAAL,GAAYF,KAAZ;AACH;;;;+BAEU;AACP,aAAO,KAAKxK,GAAZ;AACH;;;yBAEI2K,I,EAAK;AACN,WAAKD,IAAL,CAAUzN,KAAV,CAAgB,IAAhB,EAAqB0N,IAArB;AACH;;;wBAEGC,K,EAAMC,G,EAAoB;AAAA,UAAhBC,IAAgB,uEAAX,CAAW;AAAA,UAATpO,MAAS,uEAAF,CAAE;AAC1B,UAAImO,GAAG,IAAItO,SAAX,EACIsO,GAAG,GAAGD,KAAN,EAAYA,KAAK,GAAG,CAApB;AACJ,UAAIG,CAAC,GAAG,IAAIjQ,KAAJ,CAAU+P,GAAG,GAACD,KAAJ,GAAUlO,MAApB,CAAR;;AACA,WAAI,IAAI9B,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC8B,MAAf,EAAuB9B,CAAC,EAAxB;AACImQ,SAAC,CAACnQ,CAAD,CAAD,GAAO2B,SAAP;AADJ;;AAEA,aAAM3B,CAAC,GAACiQ,GAAG,GAACD,KAAJ,GAAUlO,MAAlB,EAA0B9B,CAAC,EAA3B;AACImQ,SAAC,CAACnQ,CAAD,CAAD,GAAO,KAAK8P,IAAL,CAAUE,KAAK,GAAIhQ,CAAD,GAAIkQ,IAAtB,CAAP;AADJ;;AAEA,aAAOC,CAAP;AACH;;;;;;AACJ;;AAED,SAASC,GAAT,CAAaJ,KAAb,EAAmBC,GAAnB,EAA8B;AAAA,MAAPC,IAAO,uEAAF,CAAE;AAC1B,MAAID,GAAG,IAAItO,SAAX,EACIsO,GAAG,GAAGD,KAAN,EAAYA,KAAK,GAAG,CAApB;AACJ,MAAIG,CAAC,GAAG,IAAIjQ,KAAJ,CAAU+P,GAAG,GAACD,KAAd,CAAR;;AACA,OAAI,IAAIhQ,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACiQ,GAAG,GAACD,KAAnB,EAA0BhQ,CAAC,EAA3B;AACImQ,KAAC,CAACnQ,CAAD,CAAD,GAAOgQ,KAAK,GAAGhQ,CAAC,GAACkQ,IAAjB;AADJ;;AAEA,SAAOC,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;;ACjED;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA,IAAGE,KAAH,EAAS;AACL,MAAMC,aAAa,GAAG;AAClBC,aAAS,EAAE,mBAAUC,KAAV,EAAiBlQ,GAAjB,EAAsB;AAC7B,UAAMmQ,IAAI,GAAGD,KAAK,CAACE,cAAN,CAAqB,CAArB,CAAb;AACA,UAAMpP,IAAI,GAAGmP,IAAI,CAACnP,IAAlB;AACA,aAAOA,IAAI,CAAChB,GAAD,CAAJ,CAAUqQ,MAAV,CAAiBtE,CAAxB;AACH,KALiB;AAMlBuE,aAAS,EAAE,mBAAUJ,KAAV,EAAiBK,MAAjB,EAAyB;AAChC,UAAMC,OAAO,GAAG,KAAKP,SAAL,CAAeC,KAAf,EAAsBK,MAAM,CAACvQ,GAA7B,CAAhB;AACA,UAAMyQ,KAAK,GAAGP,KAAK,CAACQ,MAAN,CAAa,UAAb,CAAd;AACA,UAAMC,OAAO,GAAGT,KAAK,CAACA,KAAN,CAAYU,GAA5B,CAHgC,CAKhC;;AACAD,aAAO,CAACE,SAAR;AACAF,aAAO,CAACG,WAAR,GAAsBP,MAAM,CAACQ,KAA7B;AACAJ,aAAO,CAACK,SAAR,GAAoB,GAApB;AACAL,aAAO,CAACM,MAAR,CAAeT,OAAf,EAAwBC,KAAK,CAACS,GAAN,GAAU,EAAlC;AACAP,aAAO,CAACQ,MAAR,CAAeX,OAAf,EAAwBC,KAAK,CAACW,MAA9B;AACAT,aAAO,CAACU,MAAR,GAXgC,CAahC;;AACAV,aAAO,CAACW,SAAR,GAAoBf,MAAM,CAACQ,KAA3B;AACAJ,aAAO,CAACY,SAAR,GAAoB,QAApB;AACAZ,aAAO,CAACa,QAAR,CAAiBjB,MAAM,CAACkB,KAAxB,EAA+BjB,OAA/B,EAAwCC,KAAK,CAACS,GAAN,GAAU,EAAlD;AACH,KAvBiB;AAyBlBQ,qBAAiB,EAAE,2BAAUxB,KAAV,EAAiByB,MAAjB,EAAyB;AAAA;;AACxC,UAAIzB,KAAK,CAAC0B,MAAN,CAAaC,OAAjB,EAA0B;AACtB3B,aAAK,CAAC0B,MAAN,CAAaC,OAAb,CAAqBzK,OAArB,CAA8B,UAAAmJ,MAAM;AAAA,iBAAI,KAAI,CAACD,SAAL,CAAeJ,KAAf,EAAsBK,MAAtB,CAAJ;AAAA,SAApC;AACH;AACJ;AA7BiB,GAAtB;AAgCA,MAAMuB,aAAa,GAAG;AAClBxB,aAAS,EAAE,mBAAUJ,KAAV,EAAiBK,MAAjB,EAAyB;AAChC,UAAMwB,MAAM,GAAG7B,KAAK,CAACQ,MAAN,CAAa,UAAb,CAAf;AACA,UAAMsB,MAAM,GAAG9B,KAAK,CAACQ,MAAN,CAAa,UAAb,CAAf;AACA,UAAMC,OAAO,GAAGT,KAAK,CAACA,KAAN,CAAYU,GAA5B;AAEA,UAAIqB,OAAO,GAAGD,MAAM,CAACE,gBAAP,CAAwB3B,MAAM,CAAC4B,KAA/B,CAAd,CALgC,CAOhC;;AACAxB,aAAO,CAACE,SAAR;AACAF,aAAO,CAACG,WAAR,GAAsBP,MAAM,CAACQ,KAA7B;AACAJ,aAAO,CAACM,MAAR,CAAec,MAAM,CAACK,IAAtB,EAA2BH,OAA3B;AACAtB,aAAO,CAACQ,MAAR,CAAeY,MAAM,CAACM,KAAtB,EAA4BJ,OAA5B;AACAtB,aAAO,CAACU,MAAR,GAZgC,CAchC;;AACAV,aAAO,CAACW,SAAR,GAAoBf,MAAM,CAACQ,KAA3B;AACAJ,aAAO,CAACY,SAAR,GAAoB,MAApB;AACAZ,aAAO,CAACa,QAAR,CAAiBjB,MAAM,CAACkB,KAAxB,EAA+BM,MAAM,CAACK,IAAP,GAAY,CAA3C,EAA8CH,OAAO,GAAG,EAAxD;AACH,KAnBiB;AAqBlBP,qBAAiB,EAAE,2BAAUxB,KAAV,EAAiByB,MAAjB,EAAyB;AAAA;;AACxC,UAAIzB,KAAK,CAAC0B,MAAN,CAAaU,OAAjB,EAA0B;AACtBpC,aAAK,CAAC0B,MAAN,CAAaU,OAAb,CAAqBlL,OAArB,CAA8B,UAAAmJ,MAAM;AAAA,iBAAI,MAAI,CAACD,SAAL,CAAeJ,KAAf,EAAsBK,MAAtB,CAAJ;AAAA,SAApC;AACH;AACJ;AAzBiB,GAAtB;AA4BAR,OAAK,CAACwC,OAAN,CAAcC,QAAd,CAAuBxC,aAAvB;AACAD,OAAK,CAACwC,OAAN,CAAcC,QAAd,CAAuBV,aAAvB;AACH;;IAEKW,I;AACF,gBAAY3R,IAAZ,EAAiB2O,IAAjB,EAAsB;AAAA;;AAClB,SAAK3O,IAAL,GAAYA,IAAZ;AAEA,SAAKE,IAAL,GAAY;AACR0R,YAAM,EAAE,EADA;AAERC,cAAQ,EAAE;AAFF,KAAZ;AAKA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,OAAL,GAAe,EAAf;AACH;;;;4BAEO;AACJ,UAAG,KAAK3C,KAAR,EACI,KAAKA,KAAL,CAAW4C,OAAX;AACJ,WAAK9R,IAAL,CAAU2R,QAAV,GAAqB,EAArB;AACA,WAAKC,OAAL,GAAe,EAAf;AACA,WAAKC,OAAL,GAAe,EAAf;AACH;;;sBAEC7R,I,EAAM;AACJ,WAAKA,IAAL,CAAU0R,MAAV,GAAmB1R,IAAnB;AACH;;;0BAEKA,I,EAAM+R,K,EAA4C;AAAA,UAArChC,KAAqC,uEAA/B,SAA+B;AAAA,UAApBiC,MAAoB,uEAAX,SAAW;AACpD,UAAGD,KAAK,IAAI1R,SAAZ,EAAuB0R,KAAK,GAAG,UAAQ,KAAK/R,IAAL,CAAU2R,QAAV,CAAmB9S,MAAnC;AACvB,WAAKmB,IAAL,CAAU2R,QAAV,CAAmBxR,IAAnB,CAAwB;AACpB8R,YAAI,EAAE,MADc;AAEpBF,aAAK,EAAEA,KAFa;AAGpB/R,YAAI,EAAEA,IAHc;AAIpB+P,aAAK,EAAEiC,MAJa;AAKpBE,mBAAW,EAAEnC,KALO;AAMpBoC,YAAI,EAAE;AANc,OAAxB;AAQH;;;yBAEInS,I,EAAM+R,K,EAA0B;AAAA,UAAnBhC,KAAmB,uEAAX,SAAW;AACjC,UAAGgC,KAAK,IAAI1R,SAAZ,EAAuB0R,KAAK,GAAG,UAAQ,KAAK/R,IAAL,CAAU2R,QAAV,CAAmB9S,MAAnC;AACvB,WAAKmB,IAAL,CAAU2R,QAAV,CAAmBxR,IAAnB,CAAwB;AACpB8R,YAAI,EAAE,MADc;AAEpBF,aAAK,EAAEA,KAFa;AAGpB/R,YAAI,EAAEA,IAHc;AAIpBkS,mBAAW,EAAEnC,KAJO;AAKpBoC,YAAI,EAAE;AALc,OAAxB;AAOH;;;yBAEI1N,M,EAAQ;AAET,UAAImL,GAAG,GAAGzK,QAAQ,CAACsD,cAAT,CAAwBhE,MAAxB,CAAV;AACA,WAAKyK,KAAL,GAAa,IAAIH,KAAJ,CAAUa,GAAV,EAAc;AACvBqC,YAAI,EAAE,MADiB;AAEvBjS,YAAI,EAAE,KAAKA,IAFY;AAGvBoS,eAAO,EAAE;AACLC,oBAAU,EAAE,IADP;AAELC,6BAAmB,EAAE;AAFhB,SAHc;AAOvBzB,eAAO,EAAE,KAAKe,OAPS;AAQvBN,eAAO,EAAE,KAAKO;AARS,OAAd,CAAb;AAUA,aAAO,KAAK3C,KAAZ;AACH;;;6BAEQlQ,G,EAAKyR,K,EAA0B;AAAA,UAAnBV,KAAmB,uEAAX,SAAW;AACpC,WAAK6B,OAAL,CAAazR,IAAb,CAAkB;AACdnB,WAAG,EAAEA,GADS;AAEdyR,aAAK,EAAEA,KAFO;AAGdV,aAAK,EAAEA;AAHO,OAAlB;AAKH;;;6BAEQoB,K,EAAOV,K,EAA0B;AAAA,UAAnBV,KAAmB,uEAAX,SAAW;AACtC,WAAK8B,OAAL,CAAa1R,IAAb,CAAkB;AACdgR,aAAK,EAAEA,KADO;AAEdV,aAAK,EAAEA,KAFO;AAGdV,aAAK,EAAEA;AAHO,OAAlB;AAKH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxKE,IAAMwC,MAAb;AACI,kBAAYC,EAAZ,EAAe;AAAA;;AACX,SAAKA,EAAL,GAAUA,EAAV;AACH;;AAHL;AAAA;AAAA,8BAKc1S,IALd,EAKmBqR,KALnB,EAKyB;AACjB,WAAKrR,IAAL,IAAaqR,KAAb;AACH;AAPL;AAAA;AAAA,8BAScrR,IATd,EASmB;AACX,aAAO,KAAKA,IAAL,CAAP;AACH;AAXL;AAAA;AAAA,0BAaS;AACD,aAAO,0BAAP;AACH;AAfL;;AAAA;AAAA;AAgBC;AAGM,IAAM2S,WAAb;AAAA;;AAAA;;AACI,uBAAYD,EAAZ,EAAgB;AAAA;;AAAA,6BACNA,EADM;AAEf;;AAHL;AAAA;AAAA,wBAKQE,EALR,EAKWC,EALX,EAKc3F,CALd,EAKqB;AAAA,UAAL7B,CAAK,uEAAH,CAAG;AACb,UAAIlM,GAAG,GAAG0T,EAAE,CAAC9T,MAAb;AAAA,UACImB,IAAI,GAAG,IAAIpB,KAAJ,EADX;AAEAoB,UAAI,CAAC,CAAD,CAAJ,GAAQ2S,EAAR;AAEA,UAAI1T,GAAG,IAAI,KAAKuT,EAAL,CAAQ3T,MAAnB,EACI,OAAO,gCAAP;;AAEJ,WAAI,IAAIH,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACsO,CAAf,EAAkBtO,CAAC,EAAnB,EAAsB;AAClB,YAAIkU,CAAC,GAAG,IAAIhU,KAAJ,CAAUK,GAAV,CAAR;;AACA,aAAI,IAAI0D,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBiQ,WAAC,CAACjQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAa,KAAK6P,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAC,CAAChU,CAAC,GAAC,CAAH,IAAMyM,CAA9B,EAAgCnL,IAAI,CAACtB,CAAC,GAAC,CAAH,CAApC,CAApB;AACH;;AACDsB,YAAI,CAACG,IAAL,CAAUyS,CAAV;AACH;;AACD,aAAO5S,IAAP;AACH;AArBL;;AAAA;AAAA,EAAiCuS,MAAjC;AAwBO,IAAMM,UAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,wBACQH,EADR,EACWC,EADX,EACc3F,CADd,EACqB;AAAA,UAAL7B,CAAK,uEAAH,CAAG;AACb,UAAIlM,GAAG,GAAG0T,EAAE,CAAC9T,MAAb;AAAA,UACImB,IAAI,GAAG,IAAIpB,KAAJ,EADX;AAEAoB,UAAI,CAAC,CAAD,CAAJ,GAAQ2S,EAAR;AAEA,UAAI1T,GAAG,IAAI,KAAKuT,EAAL,CAAQ3T,MAAnB,EACI,OAAO,gCAAP;AAEJ,UAAIiU,CAAC,GAAG,IAAIlU,KAAJ,CAAUK,GAAV,CAAR;;AACA,WAAI,IAAIP,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACsO,CAAf,EAAkBtO,CAAC,EAAnB,EAAsB;AAClB,YAAIkU,CAAC,GAAG,IAAIhU,KAAJ,CAAUK,GAAV,CAAR;;AACA,aAAI,IAAI0D,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBmQ,WAAC,CAACnQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAa,KAAK6P,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAC,CAAChU,CAAC,GAAC,CAAH,IAAMyM,CAA9B,EAAgCnL,IAAI,CAACtB,CAAC,GAAC,CAAH,CAApC,CAApB;AACAkU,WAAC,CAACjQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAa,MAAIwI,CAAJ,IACd,KAAKqH,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAC,CAAChU,CAAC,GAAC,CAAH,IAAMyM,CAA9B,EAAgCnL,IAAI,CAACtB,CAAC,GAAC,CAAH,CAApC,IACA,KAAK8T,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAChU,CAAC,GAACyM,CAA1B,EAA4B2H,CAA5B,CAFc,CAApB;AAGH;;AACD9S,YAAI,CAACG,IAAL,CAAUyS,CAAV;AACH;;AACD,aAAO5S,IAAP;AACH;AArBL;;AAAA;AAAA,EAAgCuS,MAAhC;AAwBO,IAAMQ,gBAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,wBACQL,EADR,EACWC,EADX,EACc3F,CADd,EACsB;AAAA,UAAL7B,CAAK,uEAAH,CAAG;AACd,UAAIlM,GAAG,GAAG0T,EAAE,CAAC9T,MAAb;AAAA,UACImB,IAAI,GAAG,IAAIpB,KAAJ,EADX;AAEAoB,UAAI,CAAC,CAAD,CAAJ,GAAQ2S,EAAR;AAEA,UAAI1T,GAAG,IAAI,KAAKuT,EAAL,CAAQ3T,MAAnB,EACI,OAAO,gCAAP;AAEJ,UAAIiU,CAAC,GAAG,IAAIlU,KAAJ,CAAUK,GAAV,CAAR;AACA,UAAI+T,EAAE,GAAG,IAAIpU,KAAJ,CAAUK,GAAV,CAAT;AACA,UAAIgU,EAAE,GAAG,IAAIrU,KAAJ,CAAUK,GAAV,CAAT;AACA,UAAIiU,EAAE,GAAG,IAAItU,KAAJ,CAAUK,GAAV,CAAT;AACA,UAAIkU,EAAE,GAAG,IAAIvU,KAAJ,CAAUK,GAAV,CAAT;;AACA,WAAI,IAAIP,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACsO,CAAf,EAAkBtO,CAAC,EAAnB,EAAsB;AAClB,YAAIkU,CAAC,GAAG,IAAIhU,KAAJ,CAAUK,GAAV,CAAR,CADkB,CAElB;;AACA,aAAI,IAAI0D,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBqQ,YAAE,CAACrQ,CAAD,CAAF,GAAQ,KAAK6P,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAC,CAAChU,CAAC,GAAC,CAAH,IAAMyM,CAA9B,EAAgCnL,IAAI,CAACtB,CAAC,GAAC,CAAH,CAApC,CAAR;AACAoU,WAAC,CAACnQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAewI,CAAC,GAAC,CAAF,GAAI6H,EAAE,CAACrQ,CAAD,CAA5B;AACH,SANiB,CAQlB;;;AACA,aAAI,IAAIA,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBsQ,YAAE,CAACtQ,CAAD,CAAF,GAAQ,KAAK6P,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAC,CAAChU,CAAC,GAAC,GAAH,IAAQyM,CAAhC,EAAkC2H,CAAlC,CAAR;AACAA,WAAC,CAACnQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAewI,CAAC,GAAC,CAAF,GAAI8H,EAAE,CAACtQ,CAAD,CAA5B;AACH,SAZiB,CAclB;;;AACA,aAAI,IAAIA,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBuQ,YAAE,CAACvQ,CAAD,CAAF,GAAQ,KAAK6P,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAC,CAAChU,CAAC,GAAC,GAAH,IAAQyM,CAAhC,EAAkC2H,CAAlC,CAAR;AACAA,WAAC,CAACnQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAewI,CAAC,GAAC+H,EAAE,CAACvQ,CAAD,CAA1B;AACH,SAlBiB,CAoBlB;;;AACA,aAAI,IAAIA,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBwQ,YAAE,CAACxQ,CAAD,CAAF,GAAQ,KAAK6P,EAAL,CAAQ7P,CAAR,EAAW2E,IAAX,CAAgB,IAAhB,EAAqBoL,EAAE,GAAChU,CAAC,GAACyM,CAA1B,EAA4B2H,CAA5B,CAAR;AACH,SAvBiB,CAyBlB;;;AACA,aAAI,IAAInQ,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC1D,GAAf,EAAoB0D,CAAC,EAArB,EAAwB;AACpBiQ,WAAC,CAACjQ,CAAD,CAAD,GAAO3C,IAAI,CAACtB,CAAC,GAAC,CAAH,CAAJ,CAAUiE,CAAV,IAAewI,CAAC,IAClB6H,EAAE,CAACrQ,CAAD,CAAF,GAAQ,IAAEsQ,EAAE,CAACtQ,CAAD,CAAZ,GAAkB,IAAEuQ,EAAE,CAACvQ,CAAD,CAAtB,GAA4BwQ,EAAE,CAACxQ,CAAD,CADZ,CAAD,GACoB,CAD1C;AAEH;;AACD3C,YAAI,CAACG,IAAL,CAAUyS,CAAV;AACH;;AACD,aAAO5S,IAAP;AACH;AA/CL;;AAAA;AAAA,EAAsCuS,MAAtC,E;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAKO,SAASa,GAAT,CAAazG,CAAb,EAAsB;AAAA,MAAP0G,CAAO,uEAAL,GAAK;AACzB,MAAI1G,CAAC,IAAI,CAAT,EAAY,OAAO,IAAI0G,CAAX,CAAZ,KACK,IAAI1G,CAAC,IAAI,CAAT,EAAY,OAAO0G,CAAP,CAAZ,KACA,OAAO,CAAP;AACR;AAEM,SAASC,GAAT,CAAa3G,CAAb,EAAsB;AAAA,MAAP0G,CAAO,uEAAL,GAAK;AACzB,MAAI1G,CAAC,IAAI,CAAT,EAAY,OAAO,CAAP,CAAZ,KACK,IAAIA,CAAC,IAAI,CAAT,EAAY,OAAO,CAAP,CAAZ,KACA,OAAO,IAAE0G,CAAT;AACR;AAEM,SAASE,QAAT,GAAoB;AACvB,SAAOC,GAAP;AACH;AAEM,SAASC,QAAT,GAAwB;AAAA,MAANJ,CAAM,uEAAJ,GAAI;AAC3B,SAAOA,CAAP;AACH;AAEM,SAASK,QAAT,GAAwB;AAAA,MAANL,CAAM,uEAAJ,GAAI;AAC3B,SAAOrH,IAAI,CAAC2H,IAAL,CAAUN,CAAC,IAAE,IAAEA,CAAJ,CAAX,CAAP;AACH,C;;;;;;;;;;;;ACjDD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIO,SAASO,MAAT,CAAgB5G,CAAhB,EAAmBL,CAAnB,EAAsB;AACzB,MAAIA,CAAC,GAAGK,CAAR,EACI,OAAOwG,GAAP,CADJ,KAEK;AACD,QAAItU,CAAC,GAAG,CAAR;;AACA,SAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIiO,CAArB,EAAwBjO,CAAC,EAAzB,EAA6B;AACzBQ,OAAC,IAAI8N,CAAC,EAAN;AACA9N,OAAC,IAAIR,CAAL;AACH;;AACD,WAAOQ,CAAP;AACH;AACJ;AAAA;AAEM,SAASkU,GAAT,CAAazG,CAAb,EAAgBK,CAAhB,EAAmBqG,CAAnB,EAAsB;AACzB,MAAI1G,CAAC,GAAG,CAAJ,IAASA,CAAC,GAAGK,CAAjB,EAAoB,OAAO,CAAP,CAApB,KACK;AACD,QAAIqG,CAAC,IAAI,CAAT,EACI,OAAQ1G,CAAC,IAAI,CAAN,GAAW,CAAX,GAAe,CAAtB,CADJ,KAEK,IAAI0G,CAAC,IAAI,CAAT,EACD,OAAQ1G,CAAC,IAAIK,CAAP,GAAY,CAAZ,GAAgB,CAAtB,CADC,KAEA;AACD,UAAI6G,CAAC,GAAGD,MAAM,CAAC5G,CAAD,EAAIL,CAAJ,CAAd;AACA,UAAImH,IAAI,GAAG9H,IAAI,CAAC+H,GAAL,CAASV,CAAT,EAAY1G,CAAZ,IAAiBX,IAAI,CAAC+H,GAAL,CAAU,IAAEV,CAAZ,EAAiBrG,CAAC,GAACL,CAAnB,CAA5B;;AACA,UAAIkH,CAAC,IAAI,UAAT,EAAqB;AACjB,YAAIC,IAAI,IAAI,CAAZ,EAAe,OAAO,CAAP,CAAf,KACK,OAAOD,CAAP;AACR,OAHD,MAGO;AACH,eAAOA,CAAC,GAAGC,IAAX;AACH;AACJ;AACJ;AAAA;AACJ;AAEM,SAASR,GAAT,CAAa3G,CAAb,EAAgBK,CAAhB,EAAmBqG,CAAnB,EAAsB;AACzB,MAAI1G,CAAC,GAAG,CAAR,EAAW,OAAO,GAAP,CAAX,KACK,IAAIK,CAAC,GAAGL,CAAR,EAAW,OAAO,GAAP,CAAX,KAED,OAAO/N,KAAK,CAACmC,KAAN,CAAa,IAAb,EACHnC,KAAK,CAACoN,IAAI,CAACgI,KAAL,CAAWrH,CAAX,IAAgB,CAAjB,CADF,EACwB1E,GADxB,CAC6B,UAACgM,CAAD,EAAIvV,CAAJ,EAAU;AACtC,WAAOkV,MAAM,CAAC5G,CAAD,EAAItO,CAAJ,CAAN,GAAesN,IAAI,CAAC+H,GAAL,CAASV,CAAT,EAAY3U,CAAZ,CAAf,GACDsN,IAAI,CAAC+H,GAAL,CAAS,IAAIV,CAAb,EAAgBrG,CAAC,GAAGtO,CAApB,CADN;AAEH,GAJE,EAIAwV,MAJA,CAIQ,UAACC,IAAD,EAAOC,IAAP;AAAA,WAAgBD,IAAI,GAAGC,IAAvB;AAAA,GAJR,EAIqC,CAJrC,CAAP;AAKP;AAEM,SAASb,QAAT,CAAkBT,CAAlB,EAAoB9F,CAApB,EAAsBqG,CAAtB,EAAyB;AAC5B,MAAI1G,CAAJ;AAAA,MAAM0H,EAAN;AAAA,MAASC,EAAT;AAAA,MAAYC,GAAG,GAAC,CAAhB;AACH,MAAIzB,CAAC,IAAI,EAAL,IAAWA,CAAC,IAAI,EAApB,EAAwB,OAAOU,GAAP;AACxB7G,GAAC,GAAGX,IAAI,CAACwI,GAAL,CAAS,CAAT,EAAWxI,IAAI,CAACyI,GAAL,CAASzH,CAAT,EAAY0H,GAAD,CAAM1H,CAAC,GAAC2H,EAAR,CAAX,CAAX,CAAJ;;AACA,MAAItB,CAAC,GAAGC,GAAG,CAAC3G,CAAD,CAAX,EAAgB;AACf,OAAG;AACFA,OAAC,GAAGX,IAAI,CAACwI,GAAL,CAAS7H,CAAC,GAAC4H,GAAX,EAAe,CAAf,CAAJ;AACAA,SAAG,IAAI,CAAP;AACA,KAHD,QAGSlB,CAAC,GAAGC,GAAG,CAAC3G,CAAD,CAHhB;;AAIA0H,MAAE,GAAG1H,CAAL;AAAQ2H,MAAE,GAAG3H,CAAC,GAAG4H,GAAG,GAAC,CAAb;AACR,GAND,MAMO;AACN,OAAG;AACF5H,OAAC,GAAGX,IAAI,CAACyI,GAAL,CAAS9H,CAAC,GAAC4H,GAAX,EAAevH,CAAC,GAAC,CAAjB,CAAJ;AACAuH,SAAG,IAAI,CAAP;AACA,KAHD,QAGSlB,CAAC,GAAGC,GAAG,CAAC3G,CAAD,CAHhB;;AAIA2H,MAAE,GAAG3H,CAAL;AAAQ0H,MAAE,GAAG1H,CAAC,GAAG4H,GAAG,GAAC,CAAb;AACR;;AACD,SAAOD,EAAE,GAACD,EAAH,GAAM,CAAb,EAAgB;AACf1H,KAAC,GAAG,CAAC0H,EAAE,GAACC,EAAJ,IAAQ,CAAZ;AACA,QAAIjB,CAAC,GAAGC,GAAG,CAAC3G,CAAD,CAAX,EAAgB2H,EAAE,GAAG3H,CAAL,CAAhB,KACK0H,EAAE,GAAG1H,CAAL;AACL;;AACD,SAAO0H,EAAP;AACA;AAEM,SAASZ,QAAT,CAAkBzG,CAAlB,EAAoBqG,CAApB,EAAsB;AACzB,SAAOrG,CAAC,GAACqG,CAAT;AACH;AAEM,SAASK,QAAT,CAAkB1G,CAAlB,EAAoBqG,CAApB,EAAsB;AACzB,SAAOrH,IAAI,CAAC2H,IAAL,CAAU3G,CAAC,GAACqG,CAAF,IAAK,IAAEA,CAAP,CAAV,CAAP;AACH,C;;;;;;;;;;;;ACrGD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AAIO,SAASD,GAAT,CAAarI,CAAb,EAAqB;AAAA,MAALiC,CAAK,uEAAH,CAAG;AACxB,MAAIjC,CAAC,GAAG,CAAR,EACI,OAAO,CAAP,CADJ,KAEK,IAAIiC,CAAC,IAAI,CAAT,EACD,OAAOhB,IAAI,CAAC4I,GAAL,CAAS,CAAC7J,CAAD,GAAK,CAAd,IAAmB,CAA1B,CADC,KAEA;AACD,WAAOiB,IAAI,CAAC4I,GAAL,CAAU,CAAC5H,CAAC,GAAG,CAAJ,GAAQ,CAAT,IACbhB,IAAI,CAACtJ,GAAL,CAASqI,CAAC,GAAG,CAAb,CADa,GACKA,CAAC,GAAG,CADT,GACc8J,sDAAO,CAAC7H,CAAC,GAAC,CAAH,CAD/B,IACyC,CADhD;AAEH;AACJ;AAEM,SAASsG,GAAT,CAAavI,CAAb,EAAqB;AAAA,MAALiC,CAAK,uEAAH,CAAG;AACxB,MAAIjC,CAAC,GAAG,CAAR,EAAW,OAAO,GAAP,CAAX,KACK,IAAIiC,CAAC,IAAI,CAAT,EAAY,OAAO,IAAIhB,IAAI,CAAC4I,GAAL,CAAS,CAAC7J,CAAD,GAAK,CAAd,CAAX,CAAZ,KACA,OAAO+J,8DAAe,CAAC9H,CAAC,GAAG,CAAL,EAAQjC,CAAC,GAAG,CAAZ,CAAtB;AACR;AAEM,SAASwI,QAAT,CAAkBT,CAAlB,EAAyB;AAAA,MAAL9F,CAAK,uEAAH,CAAG;AAC5B,MAAIqG,CAAC,GAAG,EAAJ,IAAUA,CAAC,IAAI,EAAnB,EAAuB,OAAOG,GAAP;AAC1B,SAAO,KAAGuB,kEAAmB,CAACjC,CAAD,EAAG,MAAI9F,CAAP,CAA7B;AACA;AAEM,SAASyG,QAAT,GAAsB;AAAA,MAAJzG,CAAI,uEAAF,CAAE;AACzB,SAAOA,CAAP;AACH;AAEM,SAAS0G,QAAT,GAAsB;AAAA,MAAJ1G,CAAI,uEAAF,CAAE;AACzB,SAAO,IAAEA,CAAT;AACH,C;;;;;;;;;;;;AC1DD;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA,IAAMgI,GAAG,GAAGC,MAAM,CAACC,OAAnB;AACA,IAAMC,KAAK,GAAGF,MAAM,CAACG,SAAP,GAAiBJ,GAA/B,C,CAEA;;AACA,IAAM3B,CAAC,GAAG,CACN,iBADM,EAEL,CAAC,kBAFI,EAGL,kBAHK,EAIL,CAAC,kBAJI,EAKL,kBALK,EAML,CAAC,mBANI,EAOL,qBAPK,EAQL,qBARK,CAAV;AAYO,SAASgC,KAAT,CAAeC,CAAf,EAAiB;AACpB,MAAIA,CAAC,GAAG,GAAR,EACI,OAAOtJ,IAAI,CAACE,EAAL,IAAWF,IAAI,CAACG,GAAL,CAASH,IAAI,CAACE,EAAL,GAAQoJ,CAAjB,IAAsBD,KAAK,CAAC,IAAEC,CAAH,CAAtC,CAAP,CADJ,CACyD;AADzD,OAEK,IAAGA,CAAC,GAAG,GAAP,EACD,OAAOtJ,IAAI,CAAC4I,GAAL,CAASC,OAAO,CAACS,CAAD,CAAhB,CAAP,CADC,CAC4B;AAD5B,SAEA;AACDA,SAAC,IAAI,CAAL;AACA,YAAInK,CAAC,GAAG,mBAAR;;AACA,aAAK,IAAIzM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB;AACIyM,WAAC,IAAIkI,CAAC,CAAC3U,CAAD,CAAD,IAAQ4W,CAAC,GAAG5W,CAAZ,CAAL;AADJ;;AAEA,YAAI6W,EAAE,GAAGD,CAAC,GAAGE,CAAJ,GAAQ,GAAjB;AACA,eAAOxJ,IAAI,CAAC2H,IAAL,CAAU,IAAI3H,IAAI,CAACE,EAAnB,IAAyBF,IAAI,CAAC+H,GAAL,CAASwB,EAAT,EAAaD,CAAC,GAAG,GAAjB,CAAzB,GACDtJ,IAAI,CAAC4I,GAAL,CAAS,CAACW,EAAV,CADC,GACepK,CADtB;AAEH;AACJ,C,CAED;;AACA,IAAMsK,IAAI,GAAG,CACT,qBADS,EAET,CAAC,qBAFQ,EAGT,qBAHS,EAIT,CAAC,sBAJQ,EAKT,yBALS,EAMT,yBANS,EAOT,CAAC,yBAPQ,EAQT,yBARS,EAST,CAAC,yBATQ,EAUT,yBAVS,EAWT,CAAC,yBAXQ,EAYT,yBAZS,EAaT,CAAC,yBAbQ,EAcT,yBAdS,CAAb;AAiBO,SAASZ,OAAT,CAAiBS,CAAjB,EAAoB;AACvB,MAAGA,CAAC,GAAG,CAAP,EAAU,OAAO9B,GAAP;AACV,MAAIrI,CAAC,GAAG,sBAAR;;AACA,OAAI,IAAIzM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,EAAnB,EAAuBA,CAAC,EAAxB;AACIyM,KAAC,IAAIsK,IAAI,CAAC/W,CAAD,CAAJ,IAAW4W,CAAC,GAAG5W,CAAf,CAAL;AADJ;;AAEA,MAAI6W,EAAE,GAAGD,CAAC,GAAG,MAAI,GAAR,GAAc,GAAvB;AACA,SAAO,MAAMtJ,IAAI,CAACtJ,GAAL,CAAS,IAAEsJ,IAAI,CAACE,EAAhB,CAAN,GACF,CAACoJ,CAAC,GAAC,EAAH,IAAOtJ,IAAI,CAACtJ,GAAL,CAAS6S,EAAT,CADL,GAEHA,EAFG,GAEAvJ,IAAI,CAACtJ,GAAL,CAASyI,CAAT,CAFA,GAEYa,IAAI,CAACtJ,GAAL,CAAS4S,CAAT,CAFnB;AAGH,C,CAGD;;AAEQ,SAASR,eAAT,CAAyBnK,CAAzB,EAA4B2K,CAA5B,EAA+B;AACnC,MAAII,GAAG,GAAG,CAAV;AAAA,MAAavK,CAAC,GAAG,CAAjB;;AACA,OAAK,IAAIzM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC5BgX,OAAG,IAAKvK,CAAC,IAAImK,CAAC,IAAI3K,CAAC,GAAGjM,CAAR,CAAd;AACA,QAAIqM,CAAC,GAAG2K,GAAJ,GAAUV,GAAd,EAAmB;AACpB;;AAAA;AACD,SAAOhJ,IAAI,CAAC4I,GAAL,CAASjK,CAAC,GAAGqB,IAAI,CAACtJ,GAAL,CAAS4S,CAAT,CAAJ,GAAkBA,CAAlB,GACVT,OAAO,CAAClK,CAAC,GAAG,CAAL,CADG,GACOqB,IAAI,CAACtJ,GAAL,CAASgT,GAAT,CADhB,CAAP;AAEH;AAAA;AAEM,SAASX,mBAAT,CAA6B1B,CAA7B,EAAgCxE,CAAhC,EAAmC;AACtC,MAAIlM,CAAJ;AAAA,MAAOoI,CAAP;AAAA,MAAS4K,GAAT;AAAA,MAAaC,CAAb;AAAA,MAAe9C,CAAf;AAAA,MAAiB+C,EAAjB;AAAA,MAAoBC,IAApB;AAAA,MAAyBC,IAAzB;AAAA,MAA8BC,EAAE,GAACnH,CAAC,GAAC,CAAnC;AACHoH,KAAG,GAACpB,OAAO,CAAChG,CAAD,CAAX;AACA,MAAIA,CAAC,IAAI,EAAT,EAAa,OAAO2E,GAAP;AACb,MAAIH,CAAC,IAAI,EAAT,EAAa,OAAOrH,IAAI,CAACwI,GAAL,CAAS,IAAT,EAAc3F,CAAC,GAAG,OAAK7C,IAAI,CAAC2H,IAAL,CAAU9E,CAAV,CAAvB,CAAP;AACb,MAAIwE,CAAC,IAAI,EAAT,EAAa,OAAO,GAAP;;AACb,MAAIxE,CAAC,GAAG,EAAR,EAAY;AACXiH,QAAI,GAAC9J,IAAI,CAACtJ,GAAL,CAASsT,EAAT,CAAL;AACAD,QAAI,GAAG/J,IAAI,CAAC4I,GAAL,CAASoB,EAAE,IAAEF,IAAI,GAAC,EAAP,CAAF,GAAaG,GAAtB,CAAP;AACAJ,MAAE,GAAIxC,CAAC,GAAG,GAAL,GAAWA,CAAX,GAAe,KAAKA,CAAzB;AACAuC,KAAC,GAAG5J,IAAI,CAAC2H,IAAL,CAAU,CAAC,EAAD,GAAI3H,IAAI,CAACtJ,GAAL,CAASmT,EAAT,CAAd,CAAJ;AACA9K,KAAC,GAAG,CAAC,UAAQ6K,CAAC,GAAC,OAAX,KAAqB,KAAGA,CAAC,IAAE,UAAQA,CAAC,GAAC,OAAZ,CAAzB,IAAiDA,CAArD;AACA,QAAIvC,CAAC,GAAG,GAAR,EAAatI,CAAC,GAAG,CAACA,CAAL;AACbA,KAAC,GAAGiB,IAAI,CAACwI,GAAL,CAAS,KAAT,EAAe3F,CAAC,GAAC7C,IAAI,CAAC+H,GAAL,CAAS,KAAG,OAAK,KAAGlF,CAAR,CAAH,GAAc9D,CAAC,IAAE,KAAGiB,IAAI,CAAC2H,IAAL,CAAU9E,CAAV,CAAL,CAAxB,EAA2C,CAA3C,CAAjB,CAAJ;AACA,GARD,MAQO;AACN+G,KAAC,GAAG,MAAM/G,CAAC,IAAE,QAAMA,CAAC,GAAC,IAAV,CAAX;AACA,QAAIwE,CAAC,GAAGuC,CAAR,EAAW7K,CAAC,GAAGiB,IAAI,CAAC+H,GAAL,CAASV,CAAC,GAACuC,CAAX,EAAa,KAAG/G,CAAhB,CAAJ,CAAX,KACK9D,CAAC,GAAG,KAAGiB,IAAI,CAACtJ,GAAL,CAAS,KAAG,CAAC2Q,CAAC,GAACuC,CAAH,KAAO,KAAGA,CAAV,CAAZ,CAAP;AACL;;AACD,OAAKjT,CAAC,GAAC,CAAP,EAASA,CAAC,GAAC,EAAX,EAAcA,CAAC,EAAf,EAAmB;AAClB,QAAIoI,CAAC,IAAI,GAAT,EAAc,OAAO,GAAP;AACd4K,OAAG,GAAGb,eAAe,CAAC/J,CAAD,EAAG8D,CAAH,CAAf,GAAuBwE,CAA7B;AACA,QAAIxE,CAAC,GAAG,EAAR,EAAY+G,CAAC,GAAGG,IAAI,GAAC/J,IAAI,CAAC4I,GAAL,CAAS,EAAE7J,CAAC,GAACiL,EAAJ,IAAQA,EAAE,IAAEhK,IAAI,CAACtJ,GAAL,CAASqI,CAAT,IAAY+K,IAAd,CAAnB,CAAT,CAAZ,KACKF,CAAC,GAAG5J,IAAI,CAAC4I,GAAL,CAAS,CAAC7J,CAAD,GAAGiL,EAAE,GAAChK,IAAI,CAACtJ,GAAL,CAASqI,CAAT,CAAN,GAAkBkL,GAA3B,CAAJ;AACLnD,KAAC,GAAG6C,GAAG,GAACC,CAAR;AACA7K,KAAC,IAAK6K,CAAC,GAAG9C,CAAC,IAAE,KAAG,MAAI9G,IAAI,CAACyI,GAAL,CAAS,EAAT,EAAY3B,CAAC,IAAE,CAACjE,CAAC,GAAC,EAAH,IAAO9D,CAAP,GAAW,CAAb,CAAb,CAAT,CAAX;AACA,QAAIA,CAAC,IAAI,EAAT,EAAaA,CAAC,GAAG,OAAKA,CAAC,GAAG6K,CAAT,CAAJ;AACb,QAAI5J,IAAI,CAACkK,IAAL,CAAUN,CAAV,IAAeZ,GAAG,GAACjK,CAAvB,EAA2B;AAC3B;;AACD,SAAOA,CAAP;AACA,C;;;;;;;;;;;;AClID;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AACA;AACA;AACA;AAEA,IAAMoL,GAAG,GAAG,MAAMnK,IAAI,CAACE,EAAvB;AACA,IAAMkK,KAAK,GAAGpK,IAAI,CAAC2H,IAAL,CAAU,GAAV,CAAd;AACA,IAAM0C,IAAI,GAAGrK,IAAI,CAAC2H,IAAL,CAAUwC,GAAV,CAAb;AACA,IAAMG,KAAK,GAAG,MAAID,IAAlB;AAIO,SAASE,GAAT,CAAaxL,CAAb,EAAgB;AACnB,MAAIA,CAAC,GAAG,CAAR,EACI,OAAO,IAAE,KAAG,IAAE,WAASA,CAAX,GAAa,WAASA,CAAtB,GAAwB,IAAE,WAASA,CAAnC,GAAqC,IAAE,WAASA,CAAhD,GAAkD,CAArD,CAAF,GAA0D,CAAjE,CADJ,KAEK,IAAIA,CAAC,GAAG,CAAR,EACD,OAAO,CAAC,CAAD,GAAG,KAAG,IAAE,WAASA,CAAX,GAAa,WAASA,CAAtB,GAAwB,IAAE,WAASA,CAAnC,GAAqC,IAAE,WAASA,CAAhD,GAAkD,CAArD,CAAH,GAA2D,CAAlE,CADC,KAGD,OAAO,GAAP;AACP;AAAA;AAEM,SAASyL,KAAT,CAAezL,CAAf,EAAmC;AAAA,MAAjB0L,EAAiB,uEAAd,GAAc;AAAA,MAATC,GAAS,uEAAL,GAAK;AACtC,SAAO,OAAK,IAAEH,GAAG,CAAC,CAACxL,CAAC,GAAC0L,EAAH,IAAOC,GAAP,GAAWN,KAAZ,CAAV,CAAP;AACH;AAEM,SAASO,IAAT,CAAc5L,CAAd,EAAkC;AAAA,MAAjB0L,EAAiB,uEAAd,GAAc;AAAA,MAATC,GAAS,uEAAL,GAAK;AACrC,SAAOJ,KAAK,GAACI,GAAN,GAAU1K,IAAI,CAAC4I,GAAL,CAAS,CAAC,GAAD,IAAM,CAAC7J,CAAC,GAAC0L,EAAH,IAAOC,GAAb,IAAkB,CAA3B,CAAjB;AACH;AAEM,SAASE,aAAT,GAAyB;AAC5B,MAAI9D,CAAC,GAAG,CAAR;AAAA,MAAW+D,CAAC,GAAG,CAAf;;AACA,SAAM/D,CAAC,KAAK,CAAZ;AAAeA,KAAC,GAAG9G,IAAI,CAAC8K,MAAL,EAAJ;AAAf;;AACA,SAAMD,CAAC,KAAK,CAAZ;AAAeA,KAAC,GAAG7K,IAAI,CAAC8K,MAAL,EAAJ;AAAf;;AACA,SAAO9K,IAAI,CAAC2H,IAAL,CAAW,CAAC,GAAD,GAAO3H,IAAI,CAACtJ,GAAL,CAAUoQ,CAAV,CAAlB,IACD9G,IAAI,CAACC,GAAL,CAAUkK,GAAG,GAAGU,CAAhB,CADN;AAEH;AAEM,IAAIE,KAAK,GAAGJ,IAAZ;AACA,IAAIK,KAAK,GAAGR,KAAZ;AACA,SAASS,KAAT,GAAgC;AAAA,MAAjBR,EAAiB,uEAAd,GAAc;AAAA,MAATC,GAAS,uEAAL,GAAK;AACnC,SAAOD,EAAE,GAAGC,GAAG,GAAGE,aAAa,EAA/B;AACH,C,CAED;;AAMO,SAASM,aAAT,CAAuBhX,IAAvB,EAA6B8M,CAA7B,EAAgC;AACnC,MAAI9N,CAAC,GAAG,IAAIN,KAAJ,CAAUsB,IAAI,CAACrB,MAAf,CAAR;AACA,MAAI+W,CAAC,GAAG5J,IAAI,CAACgI,KAAL,CAAW,CAAChH,CAAC,GAAC,CAAH,IAAM,CAAjB,CAAR;;AACA,OAAI,IAAItO,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAACkX,CAAjB,EAAoBlX,CAAC,EAArB;AACIQ,KAAC,CAACR,CAAD,CAAD,GAAO2B,SAAP;AADJ;;AAEA,SAAM3B,CAAC,GAACwB,IAAI,CAACrB,MAAL,GAAY+W,CAApB,EAAuBlX,CAAC,EAAxB,EAA2B;AACvB;AACA,QAAI0O,CAAC,GAAG,CAAR;;AACA,SAAI,IAAIzK,CAAC,GAACjE,CAAC,GAACkX,CAAZ,EAAejT,CAAC,GAACjE,CAAC,GAACsO,CAAF,GAAI4I,CAArB,EAAwBjT,CAAC,EAAzB;AACIyK,OAAC,IAAIlN,IAAI,CAACyC,CAAD,CAAT;AADJ;;AAEAzD,KAAC,CAACR,CAAD,CAAD,GAAO0O,CAAC,GAACJ,CAAT;AACH;;AACD,SAAO9N,CAAP;AACH;AAEM,SAASiY,iBAAT,CAA2BC,CAA3B,EAA6BC,CAA7B,EAAkD;AAAA,MAAlB7W,MAAkB,uEAAX,CAAW;AAAA,MAAR3B,MAAQ;AACrD,MAAG,CAACA,MAAJ,EAAYA,MAAM,GAAGuY,CAAC,CAACvY,MAAX;AACZ,MAAI6W,GAAG,GAAC,GAAR;AAAA,MAAavK,CAAb;AAAA,MAAgB6B,CAAC,GAAC,CAAlB;;AACA,OAAI,IAAItO,CAAC,GAAG8B,MAAZ,EAAoB9B,CAAC,GAAGG,MAAxB,EAAgCH,CAAC,EAAjC,EAAoC;AAChC,QAAG0Y,CAAC,CAAC1Y,CAAD,CAAD,IAAQ2Y,CAAC,CAAC3Y,CAAD,CAAZ,EAAgB;AACZyM,OAAC,GAACiM,CAAC,CAAC1Y,CAAD,CAAD,GAAK2Y,CAAC,CAAC3Y,CAAD,CAAR;AACAgX,SAAG,IAAIvK,CAAC,GAACA,CAAF,GAAIkM,CAAC,CAAC3Y,CAAD,CAAZ;AACAsO,OAAC;AACJ;AACJ;;AACD,SAAO;AAACsK,QAAI,EAAE5B,GAAP;AAAYlD,MAAE,EAAExF,CAAC,GAAC;AAAlB,GAAP;AACH;AAGM,SAASuK,iBAAT,CAA2BH,CAA3B,EAA6BC,CAA7B,EAAgD;AAAA,MAAjB7W,MAAiB,uEAAV,CAAU;AAAA,MAAP3B,MAAO;AACnD,MAAI2Y,EAAE,GAAC,CAAP;AAAA,MAAUC,EAAE,GAAC,CAAb;AAAA,MAAgBC,EAAE,GAAC,CAAnB;AAAA,MAAsBC,GAAtB;AAAA,MAA2BC,EAAE,GAAC,CAA9B;AAAA,MAAiCC,GAAG,GAAC,CAArC;AAAA,MAAwC1M,CAAxC;AAAA,MAA2CqK,CAA3C;AAAA,MAA8CxI,CAAC,GAAC,CAAhD;AACA,MAAG,CAACnO,MAAJ,EAAYA,MAAM,GAAGuY,CAAC,CAACvY,MAAX;;AACZ,OAAI,IAAIH,CAAC,GAAG8B,MAAZ,EAAoB9B,CAAC,GAAGG,MAAxB,EAAgCH,CAAC,EAAjC,EAAoC;AAChC,QAAG0Y,CAAC,CAAC1Y,CAAD,CAAD,IAAQ2Y,CAAC,CAAC3Y,CAAD,CAAZ,EAAgB;AACZ8W,OAAC,GAAG4B,CAAC,CAAC1Y,CAAD,CAAL;AACA8Y,QAAE,IAAIhC,CAAN;AACAkC,QAAE,IAAIlC,CAAC,GAACA,CAAR;AACArK,OAAC,GAAGkM,CAAC,CAAC3Y,CAAD,CAAL;AACA+Y,QAAE,IAAItM,CAAN;AACAyM,QAAE,IAAIzM,CAAC,GAACA,CAAR;AACA0M,SAAG,IAAI1M,CAAC,GAACqK,CAAT;AACAxI,OAAC;AACJ;AACJ;;AACDwK,IAAE,IAAIxK,CAAN;AACAyK,IAAE,IAAIzK,CAAN;AAEA2K,KAAG,GAAGD,EAAN;AACAA,IAAE,GAAGA,EAAE,GAAC1K,CAAH,GAAKwK,EAAE,GAACA,EAAb;AACAI,IAAE,GAAGA,EAAE,GAAC5K,CAAH,GAAKyK,EAAE,GAACA,EAAb;AACAI,KAAG,GAAGA,GAAG,GAAC7K,CAAJ,GAAMwK,EAAE,GAACC,EAAf;AAEA,MAAI5I,CAAC,GAAGgJ,GAAG,GAAGH,EAAd;AAAA,MAAkBI,CAAC,GAAGL,EAAE,GAAGI,GAAG,GAAGH,EAAN,GAAWF,EAAtC;AACA,MAAI7B,GAAG,GAAG,GAAV;AAAA,MAAeoC,EAAf;;AACA,OAAI,IAAIrZ,CAAC,GAAG8B,MAAZ,EAAoB9B,CAAC,GAAGG,MAAxB,EAAgCH,CAAC,EAAjC,EAAoC;AAChC,QAAG0Y,CAAC,CAAC1Y,CAAD,CAAD,IAAQ2Y,CAAC,CAAC3Y,CAAD,CAAZ,EAAgB;AACZ8W,OAAC,GAAG4B,CAAC,CAAC1Y,CAAD,CAAL;AACAyM,OAAC,GAAGkM,CAAC,CAAC3Y,CAAD,CAAL;AACAqZ,QAAE,GAAGD,CAAC,GAAGtC,CAAC,GAAG3G,CAAb;AACA1D,OAAC,GAAIA,CAAC,GAAG4M,EAAT;AACApC,SAAG,IAAIxK,CAAC,GAACA,CAAT;AACH;AACJ;;AACDwK,KAAG,GAAG3J,IAAI,CAAC2H,IAAL,CAAUgC,GAAG,IAAE3I,CAAC,GAAC,CAAJ,CAAb,CAAN;AAEA,MAAIhC,CAAC,GAAG,IAAIsD,2CAAJ,CAAS,UAAQO,CAAC,CAACmJ,OAAF,CAAU,CAAV,CAAR,GAAqB,KAArB,GAA2BF,CAAC,CAACE,OAAF,CAAU,CAAV,CAApC,EAAiD,UAASjN,CAAT,EAAY;AAAC,WAAO8D,CAAC,GAAC9D,CAAF,GAAI+M,CAAX;AAAc,GAA5E,CAAR;AACA9M,GAAC,CAAC6D,CAAF,GAAMA,CAAN;AACA7D,GAAC,CAAC8M,CAAF,GAAMA,CAAN;AACA9M,GAAC,CAAC2K,GAAF,GAAQA,GAAR;AACA3K,GAAC,CAACiN,KAAF,GAAUtC,GAAG,GAACA,GAAJ,GAAQ+B,EAAR,GAAW1K,CAArB;AACAhC,GAAC,CAACkN,KAAF,GAAUvC,GAAG,GAACA,GAAJ,GAAQgC,GAAR,IAAa3K,CAAC,GAACA,CAAF,GAAI0K,EAAjB,CAAV;AACA,SAAO1M,CAAP;AACH;AAEM,SAASmN,sBAAT,CAAgCf,CAAhC,EAAmCC,CAAnC,EAAuD;AAAA,MAAjB7W,MAAiB,uEAAV,CAAU;AAAA,MAAP3B,MAAO;AAC1D,MAAI2Y,EAAE,GAAC,CAAP;AAAA,MAAUC,EAAE,GAAC,CAAb;AAAA,MAAgBC,EAAE,GAAC,CAAnB;AAAA,MAAsBC,GAAtB;AAAA,MAA2BC,EAAE,GAAC,CAA9B;AAAA,MAAiCC,GAAG,GAAC,CAArC;AAAA,MAAwC1M,CAAxC;AAAA,MAA2CqK,CAA3C;AAAA,MAA8CxI,CAAC,GAAC,CAAhD;AACA,MAAG,CAACnO,MAAJ,EAAYA,MAAM,GAAGuY,CAAC,CAACvY,MAAX;;AACZ,OAAI,IAAIH,CAAC,GAAG8B,MAAZ,EAAoB9B,CAAC,GAAGG,MAAxB,EAAgCH,CAAC,EAAjC,EAAoC;AAChC,QAAG,OAAO0Y,CAAC,CAAC1Y,CAAD,CAAR,IAAe,QAAf,IAA2B2Y,CAAC,CAAC3Y,CAAD,CAA/B,EAAmC;AAC/B8W,OAAC,GAAG4B,CAAC,CAAC1Y,CAAD,CAAL;AACA8Y,QAAE,IAAIhC,CAAN;AACAkC,QAAE,IAAIlC,CAAC,GAACA,CAAR;AACArK,OAAC,GAAGkM,CAAC,CAAC3Y,CAAD,CAAL;AACAyM,OAAC,GAAI,OAAKA,CAAN,GAAS,GAAT,GAAea,IAAI,CAACtJ,GAAL,CAASyI,CAAT,CAAnB;AACAsM,QAAE,IAAItM,CAAN;AACAyM,QAAE,IAAIzM,CAAC,GAACA,CAAR;AACA0M,SAAG,IAAI1M,CAAC,GAACqK,CAAT;AACAxI,OAAC;AACJ;AACJ;;AACDwK,IAAE,IAAIxK,CAAN;AACAyK,IAAE,IAAIzK,CAAN;AAEA2K,KAAG,GAAGD,EAAN;AACAA,IAAE,GAAGA,EAAE,GAAC1K,CAAH,GAAKwK,EAAE,GAACA,EAAb;AACAI,IAAE,GAAGA,EAAE,GAAC5K,CAAH,GAAKyK,EAAE,GAACA,EAAb;AACAI,KAAG,GAAGA,GAAG,GAAC7K,CAAJ,GAAMwK,EAAE,GAACC,EAAf;AAEA,MAAI5I,CAAC,GAAGgJ,GAAG,GAAGH,EAAd;AAAA,MAAkBI,CAAC,GAAGL,EAAE,GAAGI,GAAG,GAAGH,EAAN,GAAWF,EAAtC;AACA,MAAI7B,GAAG,GAAG,GAAV;AAAA,MAAeoC,EAAf;;AACA,OAAI,IAAIrZ,CAAC,GAAG8B,MAAZ,EAAoB9B,CAAC,GAAGG,MAAxB,EAAgCH,CAAC,EAAjC,EAAoC;AAChC,QAAG0Y,CAAC,CAAC1Y,CAAD,CAAD,IAAQ2Y,CAAC,CAAC3Y,CAAD,CAAZ,EAAgB;AACZ8W,OAAC,GAAG4B,CAAC,CAAC1Y,CAAD,CAAL;AACAyM,OAAC,GAAGkM,CAAC,CAAC3Y,CAAD,CAAL;AACAyM,OAAC,GAAI,OAAKA,CAAN,GAAS,GAAT,GAAea,IAAI,CAACtJ,GAAL,CAASyI,CAAT,CAAnB;AACA4M,QAAE,GAAGD,CAAC,GAAGtC,CAAC,GAAG3G,CAAb;AACA1D,OAAC,GAAIA,CAAC,GAAG4M,EAAT;AACApC,SAAG,IAAIxK,CAAC,GAACA,CAAT;AACH;AACJ;;AACDwK,KAAG,GAAG3J,IAAI,CAAC2H,IAAL,CAAUgC,GAAG,IAAE3I,CAAC,GAAC,CAAJ,CAAb,CAAN;AAEA6B,GAAC,GAAG7C,IAAI,CAAC4I,GAAL,CAAS/F,CAAT,CAAJ,EAAiBiJ,CAAC,GAAG9L,IAAI,CAAC4I,GAAL,CAASkD,CAAT,CAArB;AACA,MAAI9M,CAAC,GAAG,IAAIsD,2CAAJ,CAAS,WAASwJ,CAAC,CAACE,OAAF,CAAU,CAAV,CAAT,GAAsB,KAAtB,GAA4BnJ,CAAC,CAACmJ,OAAF,CAAU,CAAV,CAA5B,GAAyC,KAAlD,EAAwD,UAASjN,CAAT,EAAY;AAAC,WAAO+M,CAAC,GAAC9L,IAAI,CAAC+H,GAAL,CAASlF,CAAT,EAAW9D,CAAX,CAAT;AAAwB,GAA7F,CAAR;AACAC,GAAC,CAAC6D,CAAF,GAAMA,CAAN;AACA7D,GAAC,CAAC8M,CAAF,GAAMA,CAAN;AACA9M,GAAC,CAAC2K,GAAF,GAAQA,GAAR;AACA3K,GAAC,CAACiN,KAAF,GAAUjN,CAAC,CAAC6D,CAAF,IAAK8G,GAAG,GAACA,GAAJ,GAAQ+B,EAAR,GAAW1K,CAAhB,CAAV;AACAhC,GAAC,CAACkN,KAAF,GAAUlN,CAAC,CAAC8M,CAAF,IAAKnC,GAAG,GAACA,GAAJ,GAAQgC,GAAR,IAAa3K,CAAC,GAACA,CAAF,GAAI0K,EAAjB,CAAL,CAAV;AACA,SAAO1M,CAAP;AACH;;;;;;;;;;;;ACnMD,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAIA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TR\"] = factory();\n\telse\n\t\troot[\"TR\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/tabularrasa.js\");\n","/* Tabular Rasa JS Data Array Functions\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/data/array\n*/\n\nexport function array_map(Fun,Arr){\n    var i, R = new Array(Arr.length);\n    for (i=0;i<Arr.length;i++)\n        R[i] = Fun(Arr[i],i);\n    return R;\n};\n\nexport function array2d_col(arr,idx) {\n    var len = arr.length;\n    var r = new Array(len);\n    for(var i=0; i<len; i++)\n        r[i]=arr[i][idx];\n    return r;\n}","/* Tabular Rasa JS Data Functions\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/data\n*/\n\nimport * as table from \"./table\";\nimport {array_map,array2d_col} from \"./array\";\n\n\nexport {\n    table,\n    array_map,\n    array2d_col\n};\n\n","/* Tabular Rasa JS Data Table\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/data/table\n*/\n\nimport {array_map} from \"./array.js\";\n\nexport const cmp ={ \n    number: function(A, B) { return A-B; },\n    string: function(A, B) { return A.localeCompare(B); },\n    any: function(A, B) { return A.toString().localeCompare(B.toString()); }\n}\n\nexport class Table {\n\n    constructor(Name, Header){\n        this.name = Name;\n        this.header = Header || [];\n        this.data = [];\n        this.sorted = -1; // sorted column\n    }\n\n    clear() {\n        this.data = [];\n        this.sorted = -1;\n    }\n\n    length() {\n        return this.data.length;\n    }\n\n    add_colum(Name,Data) {\n        this.header.push(Name);\n        var Pos = this.header.length -1;\n        for (var i=0;i<this.data.length; i++){\n            if(Data && Data[i]) {\n                this.data[i][Pos] = Data[i];\n            } else {\n                this.data[i][Pos] = undefined;\n            }\n        }\n    }\n\n    get_colum (name) {\n        var i, r = new Array(this.data.length), col = (typeof name == \"string\") ? this.header.indexOf(name) : name;\n        for( i=0; i<this.data.length; i++){\n            r[i] = this.data[i][col];\n        }\n        return r;\n    }\n\n    map(Fun, offset, length) {\n        if (length == undefined || length > this.data.length || length < 0) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var Data = this.data, i;\n        for (i = offset; i < length; i++) {\n            Data[i] = Fun(Data[i],i);\n        }\n    }\n\n    map2(Fun, Target, offset, length){\n        if (length == undefined || length > this.data.length) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var i, Data = this.data, col = (typeof Target == \"string\") ? this.header.indexOf(Target) : Target;\n        for (i=offset;i<length;i++){\n            Data[i][col] = Fun(Data[i],i);\n        }\n    }\n\n    map3(Fun,Target,Inputs, offset, length){\n        if (length == undefined || length > this.data.length) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var Data = this.data, i, B,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? this.header.indexOf(D) : D; },Inputs),\n            col = (typeof D == \"string\") ? this.header.indexOf(Target) : Target;\n        for (i=offset;i<length;i++){\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            Data[i][col] = Fun.apply(null,[Data[i]].concat(B));\n        }\n    }\n      \n    fold(Fun, Acc){\n        var Data = this.data, i;\n        for (i = 0; i < Keys.length; i++) {\n            Acc = Fun(Data[i],Acc);\n        }\n        return Acc;\n    }\n\n    fold3(Fun, Acc, Inputs) {\n        var Data = this.data, i, B,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? this.header.indexOf(D) : D; },Inputs);\n        for (i = 0; i < Data.length; i++) {\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            B.push(Acc);\n            Acc = Fun.apply(null,B);\n        }\n        return Acc;\n    }\n\n    filter(Fun,Colum,Query){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        var Out = new Table(this.name+\" filter\",this.header.slice(0));\n        var Data = this.data, i;\n        if (Colum){\n            for (i = 0; i < Data.length; i++) {\n                if (0 == Fun(Data[i][Cidx],Query))\n                    Out.data.push(Data[i]);\n            }\n        } else {\n            for (i = 0; i < Data.length; i++) {\n                if (0 == Fun(Data[i],Query))\n                    Out.data.push(Data[i]);\n            }\n        }\n        return Out;\n    }\n      \n    select(Fun,Select,Query){\n        var Data = this.data, i, B, R,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? header.indexOf(D) : D; },Select);\n        var Out = init(this.name+\" filter\",array_map(function(I){return this.header[I]},In));\n        for (i = 0; i < Data.length; i++) {\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            B.push(Query);\n            R = Fun.apply(null,B);\n            if(R)\n                Out.data.push(R);\n        }\n        return Out;\n    }\n\n    reduce(Fun,Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        if (!this.sorted || this.sorted != Cidx)\n            this.sort(Fun,Cidx);\n        var Data = this.data, i;\n        var Last=Data[0][Cidx], Out = new Table(this.name+\" reduce \"+Colum,this.header.slice(0));\n        Out.data.push(Data[0]);\n        for (i = 1; i < Data.length; i++) {\n            if (0 != Fun(Data[i][Cidx],Last))\n                Out.data.push(Data[i]);\n            Last = Data[i][Cidx];\n        }\n        return Out;\n    }\n      \n    sort(Fun, Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        var Cmp = function(A,B) {\n            return this.cmp(A[this.idx],B[this.idx]);\n        }\n        this.data = this.data.sort(Cmp.bind({idx: Cidx, cmp: Fun}));\n        this.sorted = Cidx;\n        return Cidx;\n    }\n      \n    search_and_get(Fun,Value,Colum,Key){\n        var Idx = this.search(Fun,Value,Colum);\n        if (Idx >= 0) {\n            var Cidx = (typeof Key === \"string\" ) ? this.header.indexOf(Key) : Key;\n            return this.data[Idx][Cidx];\n        }\n    }\n      \n    search(Fun,Value,Colum){\n        var Cidx;\n        if (typeof Colum === \"string\" )\n            Cidx = this.header.indexOf(Colum);\n        else\n            Cidx = Colum;\n        if( this.sorted && this.sorted == Cidx ){ //binary binsearch\n            return this.binsearch(Fun, Value, Cidx);\n        } else {\n            var i, Data=this.data;\n            for (i=0; i<Data.length; i++){\n                if(0 == Fun(Data[i][Cidx],Value)){\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n      \n    binary_search(Fun,Value,Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        if (!this.sorted || this.sorted != Cidx)\n            sort(Fun,Cidx,this);\n        return this.binsearch(Fun, Value, Cidx);\n    }\n      \n    binsearch(Fun, Value, Cidx){\n        var Left = 0, Right = this.data.length - 1, Mid, R, Data = this.data;\n        while (Left <= Right) { // Interval\n          Mid = Left + ((Right - Left) / 2); // half interval\n          //console.log(Value,Data[Mid]);\n          R = Fun(Value,Data[Mid][Cidx]);\n          if (R == 0) // success\n            return Mid;\n          else\n            if (R < 0) // lower interval\n              Right = Mid - 1;\n            else // higher interval\n              Left = Mid + 1;\n        }\n        return -1;\n    }\n\n    get_row_obj(Row){\n        var Obj = {};\n        for(var i=0; i<this.header.length; i++){\n            Obj[this.header[i]] = this.data[Row][i];\n        }\n        return Obj\n    }\n\n    add_row_obj(Obj,Idx = -1) {\n        var Keys = Object.keys(Obj);\n        if (Idx < 0){\n            Idx = this.data.length;\n            this.data.push(new Array(this.header.length));\n        }\n\n        for(var i=0; i<Keys.length; i++ ){\n            var Pos = this.header.indexOf(Keys[i]);\n            if(Pos == -1){\n                console.log(\"TR_Table: Missing key: \"+Keys[i]);\n            } else {\n                this.data[Idx][Pos] = Obj[Keys[i]];\n            }\n        }\n    }\n     \n    add_obj_array(Obj) {\n         var i,j, L, Keys, Idx;\n         for(i=0; i<Obj.length; i++){\n            L = new Array(this.header.length);\n            Keys = Object.keys(Obj[i]);\n            for(j=0; j<Keys.length; j++ ){\n                Idx = this.header.indexOf(Keys[j]);\n                if (Idx >=0 ) {\n                    L[Idx] = Obj[i][Keys[j]];\n                }\n            }\n            this.data.push(L);\n        }\n    }\n\n    read_json(text) {\n        var l, i, j, json = JSON.parse(text);\n        for(i=0; i < json.length; i++){\n            l = new Array(this.header.length);\n            for(j=0; j<this.header.length; j++ ){\n                l[j] = json[i][this.header[j]];\n            }\n            this.data.push(l);\n        }\n        \n    }\n\n    read_csv(Text, FS, No_Header) {\n        var Last_Char = \"\", Field = \"\", Obj = [\"\"], Col = 0, Row = 0, No_Quote = !0, C, j, First_Row = (No_Header)? 0 : !0;\n        this.data = [];\n        this.header = [];\n        this.sorted = -1;\n        this.data.push(Obj);\n    \n        for (j = 0; j < Text.length; j++) {\n            C = Text[j]; //get current char\n            if (\"\\\"\" === C) { // if quote\n                if (No_Quote && C === Last_Char)\n                    Field += C; // if previous was a quote add quote to field string\n                No_Quote = !No_Quote; // switch boolean\n            }\n            else if (FS === C && No_Quote) { // if not quoted FS\n                if (First_Row) {\n                    this.header[Col++] = Field;\n                }\n                else {\n                    Obj[Col++] = Field;\n                }\n                C = Field = \"\";\n            }\n            else if (\"\\n\" === C && No_Quote) { // if not quoted line end\n                    if (\"\\r\" === Last_Char)\n                        Field = Field.slice(0, -1); //remove carriage return\n                    if (First_Row) {\n                        First_Row = !First_Row;\n                        this.header[Col] = Field;\n                        C = Field = \"\";\n                    }\n                    else {\n                        Obj[Col] = Field;\n                        this.data[++Row] = Obj = [];\n                    }\n                    C = Field = \"\";\n                    Col = 0;\n                }\n                else {\n                    Field += C;\n                }\n                Last_Char = C;\n        }\n        if (Col != 0) {\n            Obj[Col] = Field;\n        }\n        if (Obj.length != this.header.length)\n            this.data.pop();\n    }\n    \n    write_csv(FS) {\n        var text = \"\", row;\n        if (this.header) {\n            for (var i = 0; i < this.header.length; i++) {\n                if (i > 0)\n                    text += FS;\n                text += escape_csv(this.header[i], FS);\n            }\n            text += \"\\r\\n\";\n        }\n        for (var i = 0; i < this.data.length; i++) {\n            row = this.data[i];\n            for (var j = 0; j < row.length; j++) {\n                if (j > 0)\n                    text += FS;\n                text += escape_csv(str(row[j]), FS);\n            }\n            text += \"\\r\\n\";\n        }\n        return text;\n    }\n};\n\nfunction escape_csv(Value, FS) {\n    var R = \"\", C, Esc = false;\n    if (!Value)\n        return \"\";\n    for (var j = 0; j < Value.length; j++) {\n        C = Value[j];\n        if (C == \"\\\"\") {\n            R += C;\n            R += C;\n            Esc = true;\n        }\n        else if (C == \"\\n\" || C == \"\\r\" || C == FS) {\n            R += C;\n            Esc = true;\n        }\n        else {\n            R += C;\n        }\n    }\n    if (Esc) {\n        return \"\\\"\" + R + \"\\\"\";\n    }\n    else {\n        return R;\n    }\n}\n\nfunction str(o) {\n    switch (o) {\n        case null:\n          return \"null\";\n        case undefined:\n          return \"undefined\";\n        default:\n          return o.toString();\n    }\n}","/* Tabular Rasa JS DOX File\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/dox/file\n*/\n\n/**\n* read a file\n* @param {Function} Fun Callback function (State,Data)\n* @param {File} Filen a file object\n* @param {String} Type optional datatype\n*/\nexport function read(Fun,Filen,Type){\n    var Reader = new FileReader();\n    Reader.cb = Fun;\n    Reader.onload = function(Event) {\n        this.cb(200,Event.target.result);\n    };\n    Reader.onerror = function(Event) {\n        this.cb(404,Event.target.error.code);\n    };\n    if(Type == \"DataURL\")\n        Reader.readAsDataURL(Filen);\n    else\n        Reader.readAsText(Filen);\n};\n\n/**\n* save file as download\n* @param Filen Filename\n* @param Mime  Mimetype\n* @param Data  data string or blob\n**/\nexport function save(Filen, Mime, Data) { // Mime text/csv;charset=utf-8\n    var FileLink = document.createElement('a');\n    if (Mime.startsWith('text'))\n        FileLink.setAttribute('href', 'data:'+Mime+',' + encodeURIComponent(Data));\n    else\n        FileLink.setAttribute('href', 'data:'+Mime+',' + btoa(Data));\n    FileLink.setAttribute('download', Filen);\n  \n    if (document.createEvent) {\n        var Event = document.createEvent('MouseEvents');\n        Event.initEvent('click', true, true);\n        FileLink.dispatchEvent(Event);\n    } else {\n        FileLink.click();\n    }\n}","/* Tabular Rasa JS DOX\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/dox\n*/\n\n\nimport * as url from \"./url\";\nimport * as file from \"./file\";\n\n// load html from url and insert to target\nfunction load_inner_html(uri,target) {\n    load_data(uri, function(e){\n        target.innerHTML = e;\n        exec_js(target);\n        cTagLoader.forEach(l => l.load(target) );\n        cCodeView.forEach(l => l.update(target) );\n        cCalcValues.forEach(l => l.update(target) );\n        if (typeof MathJax != \"undefined\") \n            MathJax.typeset();\n    });\n};\n\nfunction exec_js(Elem){\n    var elem = Elem.querySelectorAll('SCRIPT');\n    elem.forEach( function(e) {\n        if(e.src != \"\") {\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", e.src, false);  // synchronous request\n            xhr.send(null);\n            e.innerText = xhr.responseText;\n        }\n        eval.call(window,e.innerText);\n    });\n}\n\n// load data from url and pass to callback\nfunction load_data(uri,Cb) {\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function (e) {\n        if (xhr.readyState == 4){\n            if (xhr.status == 200) {\n                Cb(xhr.responseText);\n            } else {\n                console.log(\"Error: (\"+xhr.status+\")\");\n            }\n        }\n    };\n    xhr.open('GET', uri, true);\n    xhr.send();\n};\n\nclass Router {\n    constructor(tag = \"hash-router\"){\n        this.tag = tag;\n        this.target = document.querySelector('['+tag+']');\n        this.get_url();\n\n        window.onhashchange = this.get_url.bind(this);\n    }\n\n    get_url() {\n        var map = url.hash_map(window.location);\n        var uri = (map[this.tag])? map[this.tag] : this.target.getAttribute(this.tag);\n        console.log(\"URL:\" + uri);\n        load_inner_html(uri,this.target);\n    }\n} \n\nconst cTagLoader = [];\nclass TagLoader {\n    constructor(target = document, tag = \"html-data\"){\n        this.tag = tag;\n        cTagLoader.push(this);\n        this.load(target);\n    }\n\n    load(target = document) {\n        var i, elem, uri, elems = target.querySelectorAll('['+this.tag+']');\n        for ( i=0; i<elems.length; i++ ){\n            elem = elems[i];\n            uri = elem.getAttribute(this.tag);\n            load_inner_html(uri,elem)\n        }\n    }\n}\n\nconst cCodeView = [];\nclass CodeView {\n    constructor(target = document, tag = \"script\"){\n        this.tag = tag;\n        cCodeView.push(this);\n        this.update(target);\n    }\n\n    update(target = document){\n        var i, elem, id, elems = target.querySelectorAll('code['+this.tag+']');\n        for ( i=0; i<elems.length; i++ ){\n            elem = elems[i];\n            id = elem.getAttribute(this.tag);\n            elem.innerText = document.getElementById(id).innerText;\n        }\n    }\n};\n\nconst cCalcValues = [];\nclass CalcValues{\n    constructor(target = document, tag = \"calc\"){\n        this.tag = tag;\n        cCalcValues.push(this);\n        this.update(target);\n    }\n\n    update(target = document){\n        var i, elem, val, elems = target.querySelectorAll('['+this.tag+']');\n        for ( i=0; i<elems.length; i++ ){\n            elem = elems[i];\n            val = elem.getAttribute(this.tag);\n            elem.innerHTML = eval.call(window,val);\n        }\n    }\n}\n\nexport {\n    //file,\n    Router,\n    TagLoader,\n    CodeView,\n    CalcValues,\n    url,\n    file\n};\n","/* Tabular Rasa JS DOX URL\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/dox/url\n*/\n\n// scan header\nexport function header_map(Xhttp){\n    var i, Elem, Key, Value, R={}, HL = Xhttp.getAllResponseHeaders().trim().split(/[\\r\\n]+/);\n    for ( i=0; i<HL.length; i++ ) {\n        Elem = HL[i].split(': ');\n        Key   = Elem.shift();\n        Value = Elem.join(': ');\n        R[Key] = Value;\n    }\n    return R;\n}\n  \nexport function hash_map(URL){\n    var i, R1, Res={}, Hash = (URL.hash.substr(1)).split(\"&\");\n    for (i=0; i<Hash.length; i++) {\n        R1 = Hash[i].split(\"=\");\n        Res[R1[0]]=decodeURIComponent(R1[1]) || R1[0];\n    }\n    return Res;\n}\n  \n// window.location\nexport function query_map(URL){\n    var i, R1, Res={}, Query = (URL.search.substr(1)).split(\"&\");\n    for (i=0; i<Query.length; i++) {\n        R1 = Query[i].split(\"=\");\n        Res[R1[0]]=R1[1] || R1[0];\n    }\n    return Res;\n}","/* Tabular Rasa JS IO File\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/io/file\n*/\n\n/**\n* read a file\n* @param {Function} Fun Callback function (State,Data)\n* @param {File} Filen a file object\n* @param {String} Type optional datatype\n*/\nexport function read(Fun,Filen,Type){\n    var Reader = new FileReader();\n    Reader.cb = Fun;\n    Reader.onload = function(Event) {\n        this.cb(200,Event.target.result);\n    };\n    Reader.onerror = function(Event) {\n        this.cb(404,Event.target.error.code);\n    };\n    if(Type == \"DataURL\")\n        Reader.readAsDataURL(Filen);\n    else\n        Reader.readAsText(Filen);\n};\n\n/**\n* save file as download\n* @param Filen Filename\n* @param Mime  Mimetype\n* @param Data  data string or blob\n**/\nexport function save(Filen, Mime, Data) { // Mime text/csv;charset=utf-8\n    var FileLink = document.createElement('a');\n    if (Mime.startsWith('text'))\n        FileLink.setAttribute('href', 'data:'+Mime+',' + encodeURIComponent(Data));\n    else\n        FileLink.setAttribute('href', 'data:'+Mime+',' + btoa(Data));\n    FileLink.setAttribute('download', Filen);\n  \n    if (document.createEvent) {\n        var Event = document.createEvent('MouseEvents');\n        Event.initEvent('click', true, true);\n        FileLink.dispatchEvent(Event);\n    } else {\n        FileLink.click();\n    }\n}","/* Tabular Rasa JS IO Functions\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/io\n*/\n\nimport * as file from \"./file\";\nimport * as loader from \"./loader\";\nimport * as url from \"./url\";\n\n\nexport {\n    file,\n    loader,\n    url\n};","/* Tabular Rasa JS IO Loader\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/io/loader\n*/\n\nimport {hash_map} from \"./url.js\";\n\n// load json from url and pass to callback\nexport function json(Url, Cb) {\n    data(Url,function (e){\n        Cb(JSON.parse(e));\n    });\n};\n\n// load html from url and insert to target\nexport function html(Url,Target) {\n    data(Url, function(e){\n        Target.innerHTML = e;\n        clean_code(Target,'clean-code');\n        exec_js(Target);\n        if (TagStore) tag(TagStore,Target);\n    });\n};\n\nfunction exec_js(Elem){\n    var elem = Elem.querySelectorAll('SCRIPT');\n    elem.forEach(function(e) {\n        eval.call(window,e.innerText);\n    });\n}\n\n// load data from url and pass to callback\nexport function data(Url,Cb) {\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function (e) {\n        if (xhr.readyState == 4){\n            if (xhr.status == 200) {\n                Cb(xhr.responseText);\n            } else {\n                console.log(\"Error: (\"+xhr.status+\")\");\n            }\n        }\n    };\n    xhr.open('GET', Url, true);\n    xhr.send();\n};\n\nexport function router(Tag){ // Tag: 'tr-router'\n    var Elem = document.querySelector('['+Tag+']');\n    var Map = hash_map(window.location);\n    var Src = (Map[Tag])? Map[Tag]+\".html\" : Elem.getAttribute(Tag);\n    // load default\n    html(Src,Elem);\n    // listen for changes\n    window.onhashchange = function () {\n        var Map = hash_map(window.location);\n        var Src = (Map[Tag])? Map[Tag]+\".html\" : Elem.getAttribute(Tag);\n        html(Src,Elem);\n    };\n};\n\n// load data once\nvar TagStore = null;\nexport function tag(Tag, Root = document) {\n    var i, Elem, Url, Elems = Root.querySelectorAll('['+Tag+']');\n    TagStore = Tag;\n    for ( i=0; i<Elems.length; i++ ){\n        Elem = Elems[i];\n        Url = Elem.getAttribute(Tag);\n        html(Url,Elem);\n    }\n};\n\n\n\n// Create clean code\nvar EntityMap = {\"&\": \"&amp;\",\"<\": \"&lt;\",\">\": \"&gt;\",'\"': '&quot;',\"'\": '&#39;',\"/\": '&#x2F;'};\nfunction escape_html(string) { return String(string).replace(/[&<>\"'\\/]/g, function (s) { return EntityMap[s]; }); };\nexport function clean_code(Target) {\n    var i, Elem, New, CodeElems = Target.querySelectorAll('[clean-code]');\n    for(i=0; i<CodeElems.length; i++) {\n        Elem = CodeElems[i];\n        New = escape_html(Elem.innerHTML)\n        Elem.innerHTML = New;\n    }\n};","/* Tabular Rasa JS IO URL\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/io/url\n*/\n\n// scan header\nexport function header_map(Xhttp){\n    var i, Elem, Key, Value, R={}, HL = Xhttp.getAllResponseHeaders().trim().split(/[\\r\\n]+/);\n    for ( i=0; i<HL.length; i++ ) {\n        Elem = HL[i].split(': ');\n        Key   = Elem.shift();\n        Value = Elem.join(': ');\n        R[Key] = Value;\n    }\n    return R;\n}\n  \nexport function hash_map(URL){\n    var i, R1, Res={}, Hash = (URL.hash.substr(1)).split(\"&\");\n    for (i=0; i<Hash.length; i++) {\n        R1 = Hash[i].split(\"=\");\n        Res[R1[0]]=decodeURIComponent(R1[1]) || R1[0];\n    }\n    return Res;\n}\n  \n// window.location\nexport function query_map(URL){\n    var i, R1, Res={}, Query = (URL.search.substr(1)).split(\"&\");\n    for (i=0; i<Query.length; i++) {\n        R1 = Query[i].split(\"=\");\n        Res[R1[0]]=R1[1] || R1[0];\n    }\n    return Res;\n}","/* Tabular Rasa JS Math Filter\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n\n/** \n* @module math/filter\n*/\n\n\nexport function filter(x, f, sides = 1, cyclic = false){\n\tvar h, l = x.length, l1 = f.length, l2, y = new Array(l);\n\t\n\tif( sides == 1 ){\n\t\tfor(var i=0; i<l; i++){\n\t\t\th = 0.0;\n\t\t\tl2 = ( l1 > i ) ? i: l1;\n\t\t\tfor(var j=0; j<l2; j++)\n\t\t\t\th += f[j]*x[i-j]; //f[0]*x[i-j]+...+f[p]*x[i+o-p];\n\t\t\ty[i] = h;\n\t\t}\n\t} else { // both sides\n\t\tfor(var i=0; i<l; i++){\n\t\t\th = 0.0;\n\t\t\tfor(var j=0; j<l1; j++)\n\t\t\t\th += f[j]*x[(i-j)%l]//f[j]*x[i+o]+...+f[p]*x[i+o-p];\n\t\t\ty[i] = h;\n\t\t}\n\t}\n\treturn y;\n}\n\n\nclass RFFT {\n    constructor(size){\n        this.size = size;\n        if ((size & (size - 1)) == 0) {\n            this.mode='Cooley-Tukey';\n            this.p_radix2(size);\n        } else {\n            this.mode='Bluestein';\n            this.p_bluestein(size);\n        }  \n    }\n\n    new_complx() {\n        return Array(2*(this.size/2+1));\n    }\n\n    fft(out,inp){\n        if( inp.length != this.size || out.length != 2*(inp.length/2+1))\n            return \"Error: size does not match\";\n\n        if(this.mode='Cooley-Tukey'){\n            \n        } else if(this.mode='Bluestein'){\n\n        } else return \"Error: unkown alg. \"+this.mode;\n\n        return  0;\n    }\n\n    ifft(out,inp) {\n        if( out.length != this.size || inp.length != 2*(out.length/2+1))\n            return \"Error: size does not match\";\n\n        if(this.mode='Cooley-Tukey'){\n\n        } else if(this.mode='Bluestein'){\n\n        } else return \"Error: unkown alg. \"+this.mode;\n\n        return  0;\n    }\n\n    //prepare radix-2\n    p_radix2(size){\n        // Trigonometric tables\n\t    this.cosTable = new Array(size / 2);\n\t    this.sinTable = new Array(size / 2);\n\t    for (var i = 0; i < size / 2; i++) {\n\t\t    this.cosTable[i] = Math.cos(2 * Math.PI * i / size);\n\t\t    this.sinTable[i] = Math.sin(2 * Math.PI * i / size);\n\t    }\n    }\n\n    //prepare bluestein\n    p_bluestein(size){\n        this.cosTable = new Array(size);\n\t    this.sinTable = new Array(size);\n\t    for (var i = 0; i < size; i++) {\n\t\t    var j = i * i % (size * 2);  \n\t\t    this.cosTable[i] = Math.cos(Math.PI * j / size);\n\t\t    this.sinTable[i] = Math.sin(Math.PI * j / size);\n\t    }\n    }\n\n    //perform radix 2 Cooley-Tukey DFT\n    radix2(data){\n        //radix 2\n        for (var i = 0; i < this.size; i++) {\n            var j = reverse_bits(i, levels);\n            if (j > i) {\n                var temp = real[i];\n                real[i] = real[j];\n                real[j] = temp;\n                temp = imag[i];\n                imag[i] = imag[j];\n                imag[j] = temp;\n            }\n        }\n\n        // Cooley-Tukey DFT\n\t    for (var size = 2; size <= this.size; size *= 2) {\n\t    \tvar halfsize = size / 2;\n\t    \tvar tablestep = this.size / size;\n\t    \tfor (var i = 0; i < this.size; i += size) {\n\t    \t\tfor (var j = i, k = 0; j < i + halfsize; j++, k += tablestep) {\n\t    \t\t\tvar l = j + halfsize;\n\t    \t\t\tvar tpre =  real[l] * this.cosTable[k] + imag[l] * this.sinTable[k];\n\t    \t\t\tvar tpim = -real[l] * this.sinTable[k] + imag[l] * this.cosTable[k];\n\t    \t\t\treal[l] = real[j] - tpre;\n\t    \t\t\timag[l] = imag[j] - tpim;\n\t    \t\t\treal[j] += tpre;\n\t    \t\t\timag[j] += tpim;\n\t    \t\t}\n\t    \t}\n        }   \n    }   \n}\n\n// Helper\n// reverse helper\nfunction reverse_bits(x, bits) {\n    var y = 0;\n    for (var i = 0; i < bits; i++) \n        y = (y << 1) | (x & 1), x >>>= 1;\n    return y;\n}\n\n//Array of zeros\nfunction new_array_0(n) {\n\tvar r = new Array(n);\n\tfor (var i = 0; i < n; i++)\n\t\tr[i] = 0.0;\n\treturn r;\n}\n\n//////////////////////////// END\n\n\n\nfunction fft_radix2(real, imag) {\n\t// Length variables\n\tvar n = real.length;\n\tif (n != imag.length)\n\t\tthrow \"Mismatched lengths\";\n\tif (n == 1)  // Trivial transform\n\t\treturn;\n\tvar levels = -1;\n\tfor (var i = 0; i < 32; i++) {\n\t\tif (1 << i == n)\n\t\t\tlevels = i;  // Equal to log2(n)\n\t}\n\tif (levels == -1)\n\t\tthrow \"Length is not a power of 2\";\n\t\n\t// Trigonometric tables\n\tvar cosTable = new Array(n / 2);\n\tvar sinTable = new Array(n / 2);\n\tfor (var i = 0; i < n / 2; i++) {\n\t\tcosTable[i] = Math.cos(2 * Math.PI * i / n);\n\t\tsinTable[i] = Math.sin(2 * Math.PI * i / n);\n\t}\n\t\n\t// Bit-reversed addressing permutation\n\tfor (var i = 0; i < n; i++) {\n\t\tvar j = reverseBits(i, levels);\n\t\tif (j > i) {\n\t\t\tvar temp = real[i];\n\t\t\treal[i] = real[j];\n\t\t\treal[j] = temp;\n\t\t\ttemp = imag[i];\n\t\t\timag[i] = imag[j];\n\t\t\timag[j] = temp;\n\t\t}\n\t}\n\t\n\t// Cooley-Tukey decimation-in-time radix-2 FFT\n\tfor (var size = 2; size <= n; size *= 2) {\n\t\tvar halfsize = size / 2;\n\t\tvar tablestep = n / size;\n\t\tfor (var i = 0; i < n; i += size) {\n\t\t\tfor (var j = i, k = 0; j < i + halfsize; j++, k += tablestep) {\n\t\t\t\tvar l = j + halfsize;\n\t\t\t\tvar tpre =  real[l] * cosTable[k] + imag[l] * sinTable[k];\n\t\t\t\tvar tpim = -real[l] * sinTable[k] + imag[l] * cosTable[k];\n\t\t\t\treal[l] = real[j] - tpre;\n\t\t\t\timag[l] = imag[j] - tpim;\n\t\t\t\treal[j] += tpre;\n\t\t\t\timag[j] += tpim;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nfunction transformBluestein(real, imag) {\n\t// Find a power-of-2 convolution length m such that m >= n * 2 + 1\n\tvar n = real.length;\n\tif (n != imag.length)\n\t\tthrow \"Mismatched lengths\";\n\tvar m = 1;\n\twhile (m < n * 2 + 1)\n\t\tm *= 2;\n\t\n\t// Trignometric tables\n\tvar cosTable = new Array(n);\n\tvar sinTable = new Array(n);\n\tfor (var i = 0; i < n; i++) {\n\t\tvar j = i * i % (n * 2);  // This is more accurate than j = i * i\n\t\tcosTable[i] = Math.cos(Math.PI * j / n);\n\t\tsinTable[i] = Math.sin(Math.PI * j / n);\n\t}\n\t\n\t// Temporary vectors and preprocessing\n\tvar areal = newArrayOfZeros(m);\n\tvar aimag = newArrayOfZeros(m);\n\tfor (var i = 0; i < n; i++) {\n\t\tareal[i] =  real[i] * cosTable[i] + imag[i] * sinTable[i];\n\t\taimag[i] = -real[i] * sinTable[i] + imag[i] * cosTable[i];\n\t}\n\tvar breal = newArrayOfZeros(m);\n\tvar bimag = newArrayOfZeros(m);\n\tbreal[0] = cosTable[0];\n\tbimag[0] = sinTable[0];\n\tfor (var i = 1; i < n; i++) {\n\t\tbreal[i] = breal[m - i] = cosTable[i];\n\t\tbimag[i] = bimag[m - i] = sinTable[i];\n\t}\n\t\n\t// Convolution\n\tvar creal = new Array(m);\n\tvar cimag = new Array(m);\n\tconvolveComplex(areal, aimag, breal, bimag, creal, cimag);\n\t\n\t// Postprocessing\n\tfor (var i = 0; i < n; i++) {\n\t\treal[i] =  creal[i] * cosTable[i] + cimag[i] * sinTable[i];\n\t\timag[i] = -creal[i] * sinTable[i] + cimag[i] * cosTable[i];\n\t}\n}\n\n\n/* \n * Computes the circular convolution of the given real vectors. Each vector's length must be the same.\n */\nfunction convolveReal(x, y, out) {\n\tvar n = x.length;\n\tif (n != y.length || n != out.length)\n\t\tthrow \"Mismatched lengths\";\n\tconvolveComplex(x, newArrayOfZeros(n), y, newArrayOfZeros(n), out, newArrayOfZeros(n));\n}\n\n\n/* \n * Computes the circular convolution of the given complex vectors. Each vector's length must be the same.\n */\nfunction convolveComplex(xreal, ximag, yreal, yimag, outreal, outimag) {\n\tvar n = xreal.length;\n\tif (n != ximag.length || n != yreal.length || n != yimag.length\n\t\t\t|| n != outreal.length || n != outimag.length)\n\t\tthrow \"Mismatched lengths\";\n\t\n\txreal = xreal.slice();\n\tximag = ximag.slice();\n\tyreal = yreal.slice();\n\tyimag = yimag.slice();\n\ttransform(xreal, ximag);\n\ttransform(yreal, yimag);\n\t\n\tfor (var i = 0; i < n; i++) {\n\t\tvar temp = xreal[i] * yreal[i] - ximag[i] * yimag[i];\n\t\tximag[i] = ximag[i] * yreal[i] + xreal[i] * yimag[i];\n\t\txreal[i] = temp;\n\t}\n\tinverseTransform(xreal, ximag);\n\t\n\tfor (var i = 0; i < n; i++) {  // Scaling (because this FFT implementation omits it)\n\t\toutreal[i] = xreal[i] / n;\n\t\toutimag[i] = ximag[i] / n;\n\t}\n}\n\n\n","/* Tabular Rasa JS Data Functions\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa/math\n*/\n\nimport * as stat from \"./stat/index\";\nimport * as filter from \"./filter/index\";\n//import * as func from \"./func\"\nimport * as solver from \"./solver/index\";\nimport * as plot from \"./plot\"\n\nclass Func{\n    constructor(Str, Func){\n        this.str = Str;\n        this.func = Func;\n    }\n\n    toString() {\n        return this.str;\n    }\n\n    calc(args){\n        this.func.apply(this,args)\n    }\n\n    seq(start,end,step=1,offset=0){\n        if (end == undefined)\n            end = start,start = 0;\n        var a = new Array(end-start+offset);\n        for(var i=0; i<offset; i++)\n            a[i] = undefined;\n        for(; i<end-start+offset; i++)\n            a[i] = this.func(start + (i)*step);\n        return a; \n    }\n};\n\nfunction seq(start,end,step=1){\n    if (end == undefined)\n        end = start,start = 0;\n    var a = new Array(end-start);\n    for(var i=0; i<end-start; i++)\n        a[i] = start + i*step;\n    return a;\n}\n\n\nexport {\n    Func,\n    seq,\n    stat,\n    filter,\n    solver,\n    plot\n};","/* Tabular Rasa JS Math Statistics\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module math/plot\n*/\n\nif(Chart){\n    const xMarkerPlugin = {\n        get_x_pos: function (chart, idx) {\n            const meta = chart.getDatasetMeta(0); \n            const data = meta.data;\n            return data[idx]._model.x;\n        },\n        draw_line: function (chart, marker) {\n            const xoffset = this.get_x_pos(chart, marker.idx);\n            const scale = chart.scales['y-axis-0'];\n            const context = chart.chart.ctx;\n      \n            // render vertical line\n            context.beginPath();\n            context.strokeStyle = marker.color;\n            context.lineWidth = 2.0;\n            context.moveTo(xoffset, scale.top+20);\n            context.lineTo(xoffset, scale.bottom);\n            context.stroke();\n      \n            // write label\n            context.fillStyle = marker.color;\n            context.textAlign = 'center';\n            context.fillText(marker.title, xoffset, scale.top+10);\n        },\n      \n        afterDatasetsDraw: function (chart, easing) {\n            if (chart.config.xMarker) {\n                chart.config.xMarker.forEach( marker => this.draw_line(chart, marker));\n            }\n        }\n    };\n    \n    const yMarkerPlugin = {\n        draw_line: function (chart, marker) {\n            const xscale = chart.scales['x-axis-0'];\n            const yscale = chart.scales[\"y-axis-0\"];\n            const context = chart.chart.ctx;\n      \n            var y_value = yscale.getPixelForValue(marker.value);\n\n            // render vertical line\n            context.beginPath();\n            context.strokeStyle = marker.color;\n            context.moveTo(xscale.left,y_value);\n            context.lineTo(xscale.right,y_value);\n            context.stroke();\n      \n            // write label\n            context.fillStyle = marker.color;\n            context.textAlign = 'left';\n            context.fillText(marker.title, xscale.left+5, y_value + 10);\n        },\n      \n        afterDatasetsDraw: function (chart, easing) {\n            if (chart.config.yMarker) {\n                chart.config.yMarker.forEach( marker => this.draw_line(chart, marker));\n            }\n        }\n    };\n\n    Chart.plugins.register(xMarkerPlugin);\n    Chart.plugins.register(yMarkerPlugin);\n}\n\nclass Plot {\n    constructor(name,args){\n        this.name = name\n\n        this.data = {\n            labels: [],\n            datasets: [],\n        }\n\n        this.xmarker = [];\n        this.ymarker = [];\n    }\n\n    clear() {\n        if(this.chart)\n            this.chart.destroy();\n        this.data.datasets = []; \n        this.xmarker = [];\n        this.ymarker = [];\n    }\n\n    x(data) {\n        this.data.labels = data;\n    }\n\n    fline(data, label, color=\"#af5431\", fcolor = \"#c45850\") {\n        if(label == undefined) label = \"Plot \"+this.data.datasets.length;\n        this.data.datasets.push({\n            type: 'line',\n            label: label,\n            data: data,\n            color: fcolor,\n            borderColor: color,\n            fill: true,\n        });\n    } \n\n    line(data, label, color = \"#af5431\") {\n        if(label == undefined) label = \"Plot \"+this.data.datasets.length;\n        this.data.datasets.push({\n            type: 'line',\n            label: label,\n            data: data,\n            borderColor: color,\n            fill: false,\n        });\n    }    \n\n    draw(target) {\n        \n        var ctx = document.getElementById(target);\n        this.chart = new Chart(ctx,{\n            type: 'line', \n            data: this.data,\n            options: { \n                responsive: true,\n                maintainAspectRatio: true\n            },\n            xMarker: this.xmarker,\n            yMarker: this.ymarker\n        });\n        return this.chart;\n    }\n\n    x_marker(idx, title, color = \"#c45850\") {\n        this.xmarker.push({\n            idx: idx, \n            title: title, \n            color: color \n        });\n    }\n\n    y_marker(value, title, color = \"#c45850\") {\n        this.ymarker.push({\n            value: value, \n            title: title, \n            color: color \n        });\n    }\n}\n\nexport {\n    Plot\n}","\nexport class Solver {\n    constructor(df){\n        this.df = df;\n    }\n\n    set_param(name,value){\n        this[name] = value;\n    }\n\n    get_param(name){\n        return this[name];\n    }\n\n    run(){\n        return \"ERROR: no solver defined\";\n    }\n};\n\n\nexport class EulerSolver extends Solver{\n    constructor(df) {\n        super(df);\n    }\n\n    run(t0,X0,n,h=1) {\n        var len = X0.length,\n            data = new Array();\n        data[0]=X0;\n\n        if (len != this.df.length)\n            return \"ERROR: dimensions do not match\";\n\n        for(var i=1; i<n; i++){\n            var d = new Array(len);\n            for(var j=0; j<len; j++){\n                d[j] = data[i-1][j]+this.df[j].call(this,t0+(i-1)*h,data[i-1]);\n            }\n            data.push(d);\n        }\n        return data;\n    }\n}\n\nexport class HeunSolver extends Solver{\n    run(t0,X0,n,h=1) {\n        var len = X0.length,\n            data = new Array();\n        data[0]=X0;\n\n        if (len != this.df.length)\n            return \"ERROR: dimensions do not match\";\n\n        var u = new Array(len);\n        for(var i=1; i<n; i++){\n            var d = new Array(len);\n            for(var j=0; j<len; j++){\n                u[j] = data[i-1][j]+this.df[j].call(this,t0+(i-1)*h,data[i-1]);\n                d[j] = data[i-1][j]+0.5*h * \n                    ( this.df[j].call(this,t0+(i-1)*h,data[i-1])\n                    + this.df[j].call(this,t0+i*h,u));\n            }\n            data.push(d);\n        }\n        return data;\n    }\n}\n\nexport class RungeKuttaSolver extends Solver{\n    run(t0,X0,n, h=1) {\n        var len = X0.length,\n            data = new Array();\n        data[0]=X0;\n\n        if (len != this.df.length)\n            return \"ERROR: dimensions do not match\";\n\n        var u = new Array(len);\n        var k1 = new Array(len);\n        var k2 = new Array(len);\n        var k3 = new Array(len);\n        var k4 = new Array(len);\n        for(var i=1; i<n; i++){\n            var d = new Array(len);\n            // k1\n            for(var j=0; j<len; j++){\n                k1[j] = this.df[j].call(this,t0+(i-1)*h,data[i-1]);\n                u[j] = data[i-1][j] + h/2*k1[j];\n            }\n\n            // k2\n            for(var j=0; j<len; j++){\n                k2[j] = this.df[j].call(this,t0+(i-0.5)*h,u);\n                u[j] = data[i-1][j] + h/2*k2[j];\n            }\n\n            // k3\n            for(var j=0; j<len; j++){\n                k3[j] = this.df[j].call(this,t0+(i-0.5)*h,u);\n                u[j] = data[i-1][j] + h*k3[j];\n            }\n\n            // k4\n            for(var j=0; j<len; j++){\n                k4[j] = this.df[j].call(this,t0+i*h,u);\n            }\n\n            //sum all\n            for(var j=0; j<len; j++){\n                d[j] = data[i-1][j] + h * \n                    (k1[j] + 2*k2[j] + 2*k3[j] + k4[j]) / 6;\n            }\n            data.push(d);\n        }\n        return data;\n    }\n}","/* Tabular Rasa JS Math Bernoulli Distribution\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module math/stat/bernoulli\n*/\n\n\nexport function pdf(k,p=0.5) {\n    if (k == 0) return 1 - p\n    else if (k == 1) return p\n    else return 0;\n}\n\nexport function cdf(k,p=0.5) {\n    if (k >= 1) return 1;\n    else if (k <= 0) return 0;\n    else return 1-p;\n}\n\nexport function quantile() {\n    return NaN\n}\n\nexport function expected(p=0.5){\n    return p;\n}\n\nexport function variance(p=0.5){\n    return Math.sqrt(p*(1-p));\n}","/* Tabular Rasa JS Math Statistics F Distribution\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module math/stat/binomial\n*/\n\nexport function choose(n, k) {\n    if (k > n) \n        return NaN;\n    else {\n        let r = 1;\n        for (let i = 1; i <= k; i++) {\n            r *= n--;\n            r /= i;\n        }\n        return r\n    }\n};\n\nexport function pdf(k, n, p) {\n    if (k < 0 || k > n) return 0\n    else {\n        if (p == 0) \n            return (k == 0) ? 1 : 0;\n        else if (p == 1) \n            return( k == n) ? 1 : 0;\n        else {\n            let c = choose(n, k);\n            let pows = Math.pow(p, k) * Math.pow((1-p), (n-k));\n            if (c == 'Infinity') {\n                if (pows == 0) return 0\n                else return c;\n            } else {\n                return c * pows;\n            }\n        }\n    };\n}\n\nexport function cdf(k, n, p) {\n    if (k < 0) return 0.0;\n    else if (n < k) return 1.0;\n    else \n        return Array.apply( null, \n            Array(Math.floor(k) + 1) ).map( (_, i) => {\n                return choose(n, i) * Math.pow(p, i) \n                    * Math.pow(1 - p, n - i);\n            }).reduce( (prev, next) => prev + next, 0 );\n}\n\nexport function quantile(u,n,p) {\n    let k,kl,ku,inc=1;\n\tif (u <= 0. || u >= 1.) return NaN;\n\tk = Math.max(0,Math.min(n,(Int)(n*pe)));\n\tif (p < cdf(k)) {\n\t\tdo {\n\t\t\tk = Math.max(k-inc,0);\n\t\t\tinc *= 2;\n\t\t} while (p < cdf(k));\n\t\tkl = k; ku = k + inc/2;\n\t} else {\n\t\tdo {\n\t\t\tk = Math.min(k+inc,n+1);\n\t\t\tinc *= 2;\n\t\t} while (p > cdf(k));\n\t\tku = k; kl = k - inc/2;\n\t}\n\twhile (ku-kl>1) {\n\t\tk = (kl+ku)/2;\n\t\tif (p < cdf(k)) ku = k;\n\t\telse kl = k;\n\t}\n\treturn kl;\n}\n\nexport function expected(n,p){\n    return n*p;\n}\n\nexport function variance(n,p){\n    return Math.sqrt(n*p*(1-p));\n}","/* Tabular Rasa JS Math Statistics Chi Squared Distribution\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module math/stat/chi_squared\n*/\n\nimport {lngamma, gamma_inc_lower,inv_gamma_inc_lower} from \"../gamma\";\n\n\n\nexport function pdf(x, n=1) {\n    if (x < 0) \n        return 0\n    else if (n == 2) \n        return Math.exp(-x / 2) / 2\n    else {\n        return Math.exp( (n / 2 - 1) * \n            Math.log(x / 2) - x / 2 - (lngamma(n/2))) / 2;\n    }\n}\n\nexport function cdf(x, n=1) {\n    if (x < 0) return 0.0\n    else if (n == 2) return 1 - Math.exp(-x / 2)\n    else return gamma_inc_lower(n / 2, x / 2)\n}\n\nexport function quantile(u,n=1) {\n    if (p < 0. || p >= 1.) return NaN;\n\treturn 2.*inv_gamma_inc_lower(u,0.5*n);\n}\n\nexport function expected(n=1){\n    return n;\n}\n\nexport function variance(n=1){\n    return 2*n;\n}","/* Tabular Rasa JS Math Statistics Gamma Function\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module math/stat/gamma\n*/\n\nconst EPS = Number.EPSILON;\nconst FPMIN = Number.MIN_VALUE/EPS;\n\n//https://en.wikipedia.org/wiki/Lanczos_approximation\nconst p = [\n    676.5203681218851\n    ,-1259.1392167224028\n    ,771.32342877765313\n    ,-176.61502916214059\n    ,12.507343278686905\n    ,-0.13857109526572012\n    ,9.9843695780195716e-6\n    ,1.5056327351493116e-7\n];\n\n\nexport function gamma(z){\n    if (z < 0.5)\n        return Math.PI / (Math.sin(Math.PI*z) * gamma(1-z))  // Reflection formula\n    else if(z > 100) \n        return Math.exp(lngamma(z)); // https://github.com/substack/gamma.js/blob/master/index.js\n    else {\n        z -= 1;\n        var h = 0.99999999999980993;\n        for (var i = 0; i < 8; i++) \n            h += p[i] / (z + i);\n        var h2 = z + g + 0.5;\n        return Math.sqrt(2 * Math.PI) * Math.pow(h2, z + 0.5)\n            * Math.exp(-h2) * h;\n    }\n}\n   \n// https://github.com/substack/gamma.js/blob/master/index.js\nconst p_ln = [\n    57.156235665862923517,\n    -59.597960355475491248,\n    14.136097974741747174,\n    -0.49191381609762019978,\n    0.33994649984811888699e-4,\n    0.46523628927048575665e-4,\n    -0.98374475304879564677e-4,\n    0.15808870322491248884e-3,\n    -0.21026444172410488319e-3,\n    0.21743961811521264320e-3,\n    -0.16431810653676389022e-3,\n    0.84418223983852743293e-4,\n    -0.26190838401581408670e-4,\n    0.36899182659531622704e-5\n];\n\nexport function lngamma(z) {\n    if(z < 0) return NaN; \n    var h = 0.99999999999999709182;\n    for(var i = 0; i < 14; i++) \n        h += p_ln[i] / (z + i);\n    var h2 = z + 607/128 + 0.5;\n    return 0.5 * Math.log(2*Math.PI)\n        +(z+.5)*Math.log(h2)-\n        h2+Math.log(h)-Math.log(z);\n}\n\n\n// https://github.com/lh3/samtools/tree/master/bcftools\n\nexport  function gamma_inc_lower(s, z) {\n    let sum = 1, h = 1;\n    for (var i = 1; i < 100; i++) {\n      sum += (h *= z / (s + i));\n      if (x / sum < EPS) break;\n    };\n    return Math.exp(s * Math.log(z) - z \n        - lngamma(s + 1) + Math.log(sum));\n};\n\nexport function inv_gamma_inc_lower(p, a) {\n    let j, x,err,t,u,pp,lna1,afac,a1=a-1;\n\tgln=lngamma(a);\n\tif (a <= 0.) return NaN;\n\tif (p >= 1.) return Math.max(100.,a + 100.*Math.sqrt(a));\n\tif (p <= 0.) return 0.0;\n\tif (a > 1.) {\n\t\tlna1=Math.log(a1);\n\t\tafac = Math.exp(a1*(lna1-1.)-gln);\n\t\tpp = (p < 0.5)? p : 1. - p;\n\t\tt = Math.sqrt(-2.*Math.log(pp));\n\t\tx = (2.30753+t*0.27061)/(1.+t*(0.99229+t*0.04481)) - t;\n\t\tif (p < 0.5) x = -x;\n\t\tx = Math.max(1.e-3,a*Math.pow(1.-1.0/(9.*a)-x/(3.*Math.sqrt(a)),3));\n\t} else {\n\t\tt = 1.0 - a*(0.253+a*0.12);\n\t\tif (p < t) x = Math.pow(p/t,1./a);\n\t\telse x = 1.-Math.log(1.-(p-t)/(1.-t));\n\t}\n\tfor (j=0;j<12;j++) {\n\t\tif (x <= 0.0) return 0.0;\n\t\terr = gamma_inc_lower(x,a) - p;\n\t\tif (a > 1.) t = afac*Math.exp(-(x-a1)+a1*(Math.log(x)-lna1));\n\t\telse t = Math.exp(-x+a1*Math.log(x)-gln);\n\t\tu = err/t;\n\t\tx -= (t = u/(1.-0.5*Math.min(1.,u*((a-1.)/x - 1))));\n\t\tif (x <= 0.) x = 0.5*(x + t);\n\t\tif (Math.fabs(t) < EPS*x ) break;\n\t}\n\treturn x;\n}\n","/* Tabular Rasa JS Math Statistics\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module math/stat\n*/\n\nimport {Func} from \"../index\";\nimport * as bernoulli from './distributions/bernoulli';\nimport * as binomial from './distributions/binomial';\nimport * as chi_squared from './distributions/chi_squared';\n\nconst tau = 2.0 * Math.PI;\nconst sqrt2 = Math.sqrt(2.0);\nconst s2pi = Math.sqrt(tau);\nconst is2pi = 1.0/s2pi;\n\n\n\nexport function erf(x) {\n    if( x > 0 )\n        return 1-1/(1+0.278393*x+0.230389*x^2+0.000972*x^3+0.078108*x^4)^4;\n    else if( x < 0 )\n        return -1+1/(1-0.278393*x+0.230389*x^2-0.000972*x^3+0.078108*x^4)^4;\n    else\n        return 0.0;\n};\n\nexport function cnorm(x, mu=0.0, sig=1.0) {\n    return 0.5*(1+erf((x-mu)/sig/sqrt2))\n}\n\nexport function norm(x, mu=0.0, sig=1.0) {\n    return is2pi/sig*Math.exp(-0.5*((x-mu)/sig)^2);\n}\n\nexport function boxmullerrand() {\n    var u = 0, v = 0;\n    while(u === 0) u = Math.random(); \n    while(v === 0) v = Math.random();\n    return Math.sqrt( -2.0 * Math.log( u ) ) \n        * Math.cos( tau * v );\n}\n\nexport var dnorm = norm;\nexport var pnorm = cnorm;\nexport function rnorm(mu=0.0, sig=1.0) {\n    return mu + sig * boxmullerrand();\n}\n\n//export qnorm() = //quartile function\n\n\n\n\n\nexport function floating_mean(Data, n) {\n    var r = new Array(Data.length);\n    var t = Math.floor((n-1)/2);\n    for(var i = 0; i<t; i++)\n        r[i] = undefined;\n    for(; i<Data.length-t; i++){\n        //calc mean\n        var m = 0;\n        for(var j=i-t; j<i+n-t; j++)\n            m += Data[j];\n        r[i] = m/n;\n    }\n    return r;\n}\n\nexport function chi_squared_value(X,Y, offset=0, length) {\n    if(!length) length = X.length;\n    var sum=0.0, h, n=0;\n    for(var i = offset; i < length; i++){\n        if(X[i] && Y[i]){\n            h=X[i]-Y[i];\n            sum += h*h/Y[i];\n            n++;\n        }\n    }\n    return {chi2: sum, df: n-1};\n}\n\n\nexport function linear_regression(X,Y,offset=0, length){\n    var xm=0, ym=0, sx=0, sx2, sy=0, sxy=0, h, g, n=0;\n    if(!length) length = X.length;\n    for(var i = offset; i < length; i++){\n        if(X[i] && Y[i]){\n            g = X[i];\n            xm += g;\n            sx += g*g;\n            h = Y[i];\n            ym += h;\n            sy += h*h;\n            sxy += h*g;\n            n++;\n        }\n    }\n    xm /= n;\n    ym /= n;\n\n    sx2 = sx;\n    sx = sx/n-xm*xm;\n    sy = sy/n-ym*ym;\n    sxy = sxy/n-xm*ym;\n\n    var a = sxy / sx, b = ym - sxy / sx * xm;\n    var err = 0.0, hh;\n    for(var i = offset; i < length; i++){\n        if(X[i] && Y[i]){\n            g = X[i];\n            h = Y[i];\n            hh = b + g * a;\n            h = (h - hh);\n            err += h*h;\n        }\n    }\n    err = Math.sqrt(err/(n-2));\n\n    var f = new Func(\"f(x)=\"+a.toFixed(2)+\"*x+\"+b.toFixed(2),function(x) {return a*x+b;});\n    f.a = a;\n    f.b = b;\n    f.err = err;\n    f.err_a = err*err/sx*n;\n    f.err_b = err*err*sx2/(n*n*sx);\n    return f;\n}\n\nexport function exponential_regression(X, Y, offset=0, length){\n    var xm=0, ym=0, sx=0, sx2, sy=0, sxy=0, h, g, n=0;\n    if(!length) length = X.length;\n    for(var i = offset; i < length; i++){\n        if(typeof X[i] == \"number\" && Y[i]){\n            g = X[i];\n            xm += g;\n            sx += g*g;\n            h = Y[i];\n            h = (0.0==h)?0.0 : Math.log(h);\n            ym += h;\n            sy += h*h;\n            sxy += h*g;\n            n++;\n        }\n    }\n    xm /= n;\n    ym /= n;\n\n    sx2 = sx;\n    sx = sx/n-xm*xm;\n    sy = sy/n-ym*ym;\n    sxy = sxy/n-xm*ym;\n\n    var a = sxy / sx, b = ym - sxy / sx * xm;\n    var err = 0.0, hh;\n    for(var i = offset; i < length; i++){\n        if(X[i] && Y[i]){\n            g = X[i];\n            h = Y[i];\n            h = (0.0==h)?0.0 : Math.log(h);\n            hh = b + g * a;\n            h = (h - hh);\n            err += h*h;\n        }\n    }\n    err = Math.sqrt(err/(n-2));\n\n    a = Math.exp(a), b = Math.exp(b);\n    var f = new Func(\"f(x)=(\"+b.toFixed(2)+\")*(\"+a.toFixed(2)+\")^x\",function(x) {return b*Math.pow(a,x);});\n    f.a = a;\n    f.b = b;\n    f.err = err;\n    f.err_a = f.a*(err*err/sx*n);\n    f.err_b = f.b*(err*err*sx2/(n*n*sx));\n    return f;\n}\n\n\nexport {\n\n\n    // Distributions\n    bernoulli,\n    binomial,\n    chi_squared\n};","// extracted by mini-css-extract-plugin","/* Tabular Rasa JS\n** Copyright (c) 2018-2020 Benjamin Benno Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module tabularrasa\n*/\n\nimport \"./scss/simple.scss\";\nimport * as dox from \"./dox/index\";\nimport * as data from \"./data/index\";\nimport * as io from \"./io/index\";\nimport * as math from \"./math/index\";\n\nexport {\n    dox,\n    data,\n    io,\n    math\n}"],"sourceRoot":""}